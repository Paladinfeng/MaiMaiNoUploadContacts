webpackJsonp([29],{1153:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a=s(113),i=s(76),o=n(i),l=s(992),c=s(284),d=n(c),u=s(1),p=s(41),m=(s(171),s(90)),f=(s(50),s(46)),_=s(75),h=_.parse_online_json,g=_.toast_error_handler,y=s(15),v=s(114),k=u.createClass({displayName:"YewenTaskCard",mixins:[p],contextTypes:{fconf:u.PropTypes.object,auth_info:u.PropTypes.object,req:u.PropTypes.object},formatCompleteBottomText:function(){return"已回答"},ignoreTask:function(){var e=this;(0,l.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},cardClick:function(e){e.stopPropagation();var t=this.props.question.question_id,s={qid:t,from:"tasklist"},n="http://yewen.maimai.cn/app/write_answer?"+y.stringify(s);f(n,"回答悬赏问题-业问","fetch")},ignore:function(e){e&&e.stopPropagation();var t=this.props,s=t.question,n=t.cursor,i=t.index,l=this.context,c=l.fconf,d=l.auth_info,u=c.online_url+"user/v4/ignore_yw_question?"+y.stringify(r({qid:s.question_id},d)),p=fetch(u).then(h).then(function(){(0,o.default)("已忽略"),(0,a.sendWebViewBroadcast)("yewen_is_done",{id:s.question_id,done:2})}).catch(function(e){throw n.select("yewen_questions","questions",i).select("done").set(0),e}).catch(g);v("忽略中",p)},componentDidMount:function(){},componentWillUnmount:function(){},complete:function(e){e.stopPropagation(),this.cardClick(e)},renderBottomButtons:function(){return u.createElement("div",{style:{width:"92px"}},u.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},u.createElement("img",{style:b.dealImg,src:"/static/images/wrong.png"})),u.createElement("div",{style:{float:"left"},onClick:this.complete},u.createElement("img",{style:b.dealImg,src:"/static/images/right_A.png"})))},renderDoneArea:function(){var e=this.props.question;return u.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():"已忽略")},render:function(){var e=this.context,t=(e.auth_info,e.fconf,this.props),s=t.question;t.pending;return u.createElement(d.default,{component:"li",className:"list-group-item",pressDelay:800},u.createElement("div",{className:"media list-group-item-heading list-group-item-text"},u.createElement("div",{className:"media-left media-middle"},u.createElement("img",{style:b.avatar,src:"/static/images/yewen_icon.jpg",onClick:this.cardClick})),u.createElement("div",{className:"media-body media-middle",onClick:this.cardClick},u.createElement("div",{style:b.name},u.createElement("div",{style:b.namestr},"用户悬赏",s.value,"元提问")),u.createElement("div",{style:b.line1,className:"text-muted small lineClamp2"},u.createElement(m,{text:s.title,support_dref:!0}))),u.createElement("div",{className:"media-right media-middle"},s.done?this.renderDoneArea():this.renderBottomButtons())))}}),b={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},oneButton:{display:"inline-block",width:"60px",paddingLeft:4,paddingRight:4},avatar:{width:52,height:52},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},test:{background:"red"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"62px",marginTop:7}};e.exports=k},1154:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a=s(1e3),i=(n(a),s(77)),o=n(i),l=s(167),c=s(164),d=s(995),u=n(d),p=s(113),m=s(76),f=n(m),_=s(288),h=n(_),g=s(992),y=s(284),v=n(y),k=s(1),b=s(41),q=(s(171),s(90)),w=s(50),x=s(46),E=s(75),M=E.parse_online_json,C=E.toast_error_handler,N=s(15),B=(s(282).format_for_message,s(114)),T=k.createClass({displayName:"NewTaskCard",mixins:[b],contextTypes:{fconf:k.PropTypes.object,auth_info:k.PropTypes.object,req:k.PropTypes.object},cardClick:function(e){(({10:this.groupMid,12:this.inviteMid,6:this.spreadMid,3:this.recMid,4:this.transMid,8:this.inclvMid,20008:this.openUrlForCshow,19:this.openCardUrlForJob,23:this.openCardUrlForCompany,20:this.openCardUrlForJob,1e4:this.props.updateMyselfInfo,2000001:this.frMid})[this.props.task.type]||this.iconClick)(e)},avatarClick:function(e){var t=this.props.task.icon_mmid;1e4==this.props.task.type?this.props.updateMyselfInfo():t?this.iconClick(e):({10:this.groupDetail,12:this.groupDetail,20008:this.openUrlForCshow,19:this.openAvatarUrlForJob,23:this.openAvatarUrlForCompany,20:this.openAvatarUrlForJob,6:this.openCardUrlForJob}[this.props.task.type]||this.iconClick)(e)},formatBottomText:function(){var e=this.props.task;if(e.type>2e6)return"查看";switch(e.type){case 1:return"通过";case 3:return"引荐";case 4:return"通过";case 5:return"投递";case 6:return"分享";case 8:return"通过";case 12:return"加入";case 20008:return"查看";case 1e4:return"完善";default:return"通过"}},formatCompleteBottomText:function(){var e=this.props.task;if(e.type>2e6)return"已读";switch(e.type){case 1:return"已通过";case 3:return"已引荐";case 4:return"已通过";case 5:return"已投递";case 6:return"已分享";case 8:return"已通过";case 12:return"已加入";case 20008:return"已查看";case 1e4:return"已完善";default:return"已通过"}},ignoreTask:function(){var e=this;(0,g.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},openUrlForCshow:function(e){this.ignore(),w("/contact/magic_moment?source=todo","人脉秀")},openCardUrlForJob:function(e){var t=this.props.task;w(t.card_url,"职位详情")},openCardUrlForCompany:function(e){var t=this.props.task;w(t.card_url,"公司详情")},openAvatarUrlForJob:function(e){var t=this.props.task;w(t.avatar_url,"页面")},openAvatarUrlForCompany:function(e){var t=this.props.task;w(t.avatar_url,"公司详情 ")},frMid:function(e){var t="/user_conf/fr_mid?src=list&task_id="+this.props.task.id;x(t,"好友申请","fetch")},inclvMid:function(e){var t="/user_conf/inclv_mid?src=list&task_id="+this.props.task.id;x(t,"好友申请","fetch")},recMid:function(e){var t="/user_conf/rec_mid?src=list&task_id="+this.props.task.id;x(t,"求引荐好友","fetch")},transMid:function(e){var t="/user_conf/trans_mid?src=list&task_id="+this.props.task.id;x(t,"转达好友申请","fetch")},groupMid:function(e){var t="/user_conf/group_mid?task_id="+this.props.task.id;x(t,"加群申请","fetch")},inviteMid:function(e){var t="/user_conf/invite_mid?task_id="+this.props.task.id;x(t,"群邀请","fetch")},spreadMid:function(e){var t="/user_conf/spread_mid?task_id="+this.props.task.id;x(t,"求分享职位","fetch")},groupDetail:function(e){var t="/group?gid="+this.props.task.mid;w(t)},iconClick:function(e){e.stopPropagation();var t=this.props.task,s=t.icon_mmid,n=t.bktoken,r={from:"tasklist"};n&&(r.bktoken=n);var a="/contact/detail/"+s+"?"+N.stringify(r);x(a,"人脉详情","fetch")},ignore:function(e){var t=this;e&&e.stopPropagation();var s=this.props,n=s.task,a=s.cursor,i=s.index,o=s.resume_request_block,l=s.resume_storage_request_block,c=s.candidate_hunter_service_block,d=this.context,u=d.fconf,m=d.auth_info,_=u.online_url+"user/v3/ignore_task?"+N.stringify(r({id:n.id,type:n.type},m));if(n.label_item)var h=JSON.stringify({company:n.label_item.company,position:n.label_item.position,description:""}),g=JSON.stringify({school:n.label_item.school,department:n.label_item.department,description:"",degree:n.label_item.degree});var y=fetch(_).then(M).then(function(){20008!=n.type&&(0,f.default)("已忽略"),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:2}),21==n.type?t.openEditView(h):22==n.type&&t.openEditView(g)}).catch(function(e){throw 10==n.type?"其他管理员已忽略"==e?(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:2}):"其他管理员已通过"==e&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:1}):1==o?a.select("resume_request_tasks","requests",i).select("done").set(0):1==c?a.select("candidate_hunter_service_tasks","requests",i).select("done").set(0):1==l?a.select("resume_storage_request_tasks","requests",i).select("done").set(0):a.select("tasks","requests",i).select("done").set(0),e}).catch(C);20008==n.type?y.then(function(e){return e}).catch(function(e){throw e}):B("忽略中",y)},openEditView:function(e){21==this.props.task.type?(0,c.openWorkExpCustom)(!1,e):(0,c.openEduExpCustom)(!1,e)},addFriend:function(){this.props.mystatus.status?this.sendRequest({lv:1}):(0,l.showModalForConfirm)({title:"您完善个人信息后才能加好友",ok_text:"去完善",ok:function(){(0,c.completeRealProfile)(c.refreshPageSilent)},cancel_text:"取消"})},recommendFriend:function(){var e=this,t=this.props.task,s="向"+t.trg_name+"说明引荐"+t.src_name+"的理由（不少于5个字）";o.default.popup(k.createElement(u.default,{title:"填写转达理由（必填）",placeholder:s,checkbox:"同时拉个群聊聊(更真诚可信哦~)",ok:function(s,n){if(s.length<5)return void alert("转达理由不能少于5个字");o.default.dismiss(),e.sendRequest({attach:s},function(e){n&&(0,c.startGroupChat)(t.mmids)})}}))},increaseFriendLevel:function(){var e=this,t=this.props.task;t.confirm&&0==t.confirm.post?(0,l.showModalForConfirm)({title:t.confirm.text,ok_text:"确定",ok:function(){e.sendRequest()},cancel_text:"取消"}):this.sendRequest()},sendResumeStorage:function(){var e=this.props,t=e.cursor,s=e.task,n=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"job/v3/recommend/accept_resume_storage_invite?"+N.stringify(r({cid:s.cid,type:s.type,cr_id:s.id},o)),c=fetch(l,{credentials:"same-origin"}).then(M).then(function(e){t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3}),(0,f.default)("已表达感兴趣")}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3})):(0,f.default)("网络连接失败")});B("处理中...",c)},sendResume:function(){var e=this.props,t=e.cursor,s=e.task,n=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"job/v3/recommend/accept_anonymous_invite?"+N.stringify(r({jid:s.jid,type:s.type},o)),c=fetch(l).then(M).then(function(e){t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3}),MaiMai_Native.native_chat&&e&&e.to_uid?MaiMai_Native.native_chat("",e.to_uid):(0,f.default)("已表达感兴趣")}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3})):(0,f.default)("网络连接失败")});B("处理中...",c)},applyCandidateHunterService:function(){var e=this.props,t=e.cursor,s=e.task,n=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"talent/v3/co_hunter/apply?"+N.stringify(r({jid:s.jid,type:s.type},o)),c=fetch(l).then(M).then(function(e){(0,f.default)("提交成功"),t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3})}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",n).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:3})):(0,f.default)("网络连接失败")});B("投递中",c)},sendRequest:function(e,t){var s=this,n=this.props,a=n.cursor,i=n.task,o=n.index,l=this.context,c=l.fconf,d=l.auth_info;if(i.label_item)var u=JSON.stringify({company:i.label_item.company,position:i.label_item.position,description:""}),m=JSON.stringify({school:i.label_item.school,department:i.label_item.department,description:"",degree:i.label_item.degree});e=e||{};var _=c.online_url+"user/v3/complete_task?"+N.stringify(r({id:i.id,type:i.type},d,e)),h=1==i.type;h&&((0,f.default)("已通过"),a.select("tasks","requests",o).select("done").set(3),window.MaiMai_Native&&window.MaiMai_Native.show_notice_remind&&window.MaiMai_Native.show_notice_remind(),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:3}));var g=fetch(_).then(M).then(function(e){21==i.type?s.openEditView(u):22==i.type&&s.openEditView(m),i.type<2e6&&(h||(0,f.default)("已通过"),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:1,asyncMode:h})),t&&t(e)}).catch(function(e){throw 10==i.type?"其他管理员已忽略"==e?(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:2}):"添加的成员已在群中"!=e&&"其他管理员已通过"!=e||(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:1}):(a.select("tasks","requests",o).select("done").set(0),h&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:0,asyncMode:h})),e}).catch(C);h||B("通过中",g)},componentDidMount:function(){6==this.props.task.type&&(0,p.bindBroadcast)("task_is_done",this.updateTaskState)},componentWillUnmount:function(){},updateTaskState:function(e){6==this.props.task.type&&this.props.task.id==e&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:e,done:1})},spreadJob:function(){2==this.props.task.job.status?(0,f.default)("该职位已过期"):(0,c.spreadJob)(this.props.task)},complete:function(e){e.stopPropagation();var t=this.props.task;1e4==t.type?this.props.updateMyselfInfo():1==t.type?this.addFriend():3==t.type?this.recommendFriend():6==t.type?this.spreadJob():8==t.type?this.increaseFriendLevel():4==t.type?this.addFriend():20008==t.type?this.openUrlForCshow():19==t.type?this.sendResume():20==t.type?this.applyCandidateHunterService():23==t.type?this.sendResumeStorage():2000001==t.type?this.frMid():this.sendRequest()},renderBottomButtons:function(){var e=this.props.task;e.type;if(1e4!=e.type&&20008!=e.type){if(1==e.type&&2==e.real_accepted)return;return e.type>2e6?k.createElement("div",{className:"text-right"},k.createElement("span",{className:"text-center"},k.createElement("button",{onClick:this.cardClick,className:"voidBlueBtnM small white-bg"},"查看"))):k.createElement("div",{style:{width:"92px"}},k.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},k.createElement("img",{style:R.dealImg,src:"/static/images/wrong.png"})),k.createElement("div",{style:{float:"left"},onClick:this.complete},k.createElement("img",{style:R.dealImg,src:1==e.type||8==e.type||3==e.type||4==e.type?"/static/images/right_A.png":"/static/images/right_B.png"})))}return k.createElement("div",{className:"text-right"},k.createElement("span",{className:"text-center"},k.createElement("button",{onClick:this.complete,className:"voidBlueBtnM small white-bg"},20008==e.type?"查看":"完善")))},renderDoneArea:function(){var e=this.props.task;return k.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():e.type>2e6?"已读":"已忽略")},renderMember:function(){var e=this.props.task.member||{};return 1==e.mem_id||2==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img1",onClick:this.openMyMember}):3==e.mem_id||5==e.mem_id||6==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img2",onClick:this.openMyMember}):4==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img3",onClick:this.openMyMember}):k.createElement("span",{className:"cursor-pointer  add_huiyuan_img",onClick:this.openMyMember})},openMyMember:function(e){e.stopPropagation(),x("/uh_memlist?tpl=show&fr=tasks","会员权益","fetch")},render:function(){var e=this.context,t=(e.auth_info,e.fconf,this.props),s=t.task,n=(t.pending,(0,h.default)("small",s.is_alert&&s.is_alert>0?"text-danger":"text-muted"),""),r=s.frm&&s.frm.indexOf("job")>=0,a=s.block&&1==s.block;n=a?"warn-icon":s.is_reply||r?"":s.is_alert?"warn-icon":s.is_eval||s.is_light||s.qr||s.sch?"eval-icon":1e4==s.type&&1!=s.ustatus?"text-red":"";var i=!!(s.is_eval||s.is_light||r||a||s.sch||s.qr||19==s.type||20==s.type);return k.createElement(v.default,{component:"li",className:"list-group-item",pressDelay:800},k.createElement("div",{className:"list-group-item-heading list-group-item-text"},k.createElement("div",{className:"media-left media-middle"},k.createElement("img",{className:"avatar-56 radius-50",src:s.icon,onClick:this.avatarClick})),k.createElement("div",{className:"media-body media-middle",onClick:this.cardClick},k.createElement("div",{style:R.name},k.createElement("div",{style:R.namestr},s.title)),k.createElement("div",{style:R.line1,className:"text-muted small lineClamp2"},k.createElement(q,{text:s.rtext||s.text,support_dref:!0}),(1==s.type||8==s.type)&&1==s.judge&&k.createElement("span",{className:"add_v_img"}),(1==s.type||8==s.type)&&s.member&&1==s.member.mem_st&&this.renderMember()),!1),k.createElement("div",{className:"media-right media-middle"},s.done?this.renderDoneArea():this.renderBottomButtons())),i&&k.createElement("div",{className:"lineClamp2 font-13",style:R.addTxt,onClick:this.cardClick},k.createElement("div",{className:n},k.createElement("span",null,a?"用户已被封禁":r||s.sch||s.qr?s.attach:s.is_alert?s.attach:s.is_light?s.lightspot:s.attach))))}}),R={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},oneButton:{display:"inline-block",width:"60px",paddingLeft:4,paddingRight:4},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},test:{background:"red"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"66px",marginTop:7}};e.exports=T},1155:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a=s(1e3),i=(n(a),s(77)),o=(n(i),s(167),s(164)),l=s(995),c=(n(l),s(113)),d=s(76),u=n(d),p=s(288),m=(n(p),s(992)),f=s(284),_=n(f),h=s(78),g=n(h),y=s(1),v=s(41),k=(s(171),s(90)),b=(s(50),s(46)),q=s(75),w=q.parse_online_json,x=q.toast_error_handler,E=s(15),M=(s(282).format_for_message,y.createClass({displayName:"NewTaskCardService2",mixins:[v],contextTypes:{fconf:y.PropTypes.object,auth_info:y.PropTypes.object,req:y.PropTypes.object},formatCompleteBottomText:function(){switch(this.props.order.type){case"service":case"chatgift":default:return"已接单"}},ignoreTask:function(){var e=this;(0,m.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},ignore:function(e){e&&e.stopPropagation();var t=this.props,s=t.order,n=t.cursor,a=t.index,i=this.context,o=i.fconf,l=i.auth_info,d="service"==s.type?o.online_url+"talent/v3/usrv/order_reject?"+E.stringify(r({orderid:s.orderid},l)):o.online_url+"talent/v3/uh/chatgift_reject?"+E.stringify(r({uhdealid:s.id,process_channel:"task_list"},l));fetch(d).then(w).then(function(e){1==e.ret&&((0,u.default)("已忽略"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:s.orderid,done:2}))}).catch(function(e){throw n.select("services2","orders",a).select("done").set(0),e}).catch(x)},sendRequest:function(e,t){var s=this.props,n=s.cursor,a=s.order,i=s.index,l=this.context,d=l.fconf,p=l.auth_info;e=e||{};var m="talent/v3/usrv/order_accept?";"service"==a.type&&0==a.service.call&&2==a.st?m="talent/v3/usrv/order_confirm?":"service"==a.type&&0==a.service.call&&5==a.st&&(m="talent/v3/usrv/order_refund?");var f="service"==a.type?d.online_url+m+E.stringify(r({orderid:a.orderid},p,e)):d.online_url+"talent/v3/uh/chatgift_accept?"+E.stringify(r({uhdealid:a.id,process_channel:"task_list"},p,e));fetch(f).then(w).then(function(e){1==e.ret?"service"==a.type&&0==a.service.call&&2==a.st?((0,u.default)("已确认"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),t&&t(e)):"service"==a.type&&0==a.service.call&&5==a.st?((0,u.default)("已同意"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),t&&t(e)):((0,u.default)("已通过"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),setTimeout(function(){(0,o.startChatView)(null,"service"==a.type?a.srcu:a.from_uid,!1,null,!1)},800),t&&t(e)):(0,u.default)(e.error)}).catch(function(e){throw n.select("services2","orders",i).select("done").set(0),e}).catch(x)},goContactDetail:function(){var e=this.props.order;(0,g.default)(e.srcucard.id,this.context)},goUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b(e,t,"fetch")},componentDidMount:function(){var e=this.props.order;window["_orderStartCall_"+e.orderid]=this._orderStartCall},componentWillUnmount:function(){},complete:function(e){e.stopPropagation(),this.sendRequest()},renderBottomButtons:function(){var e=this,t=this.props.order,s=(t.type,y.createElement("div",{style:{width:"92px"}},y.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},y.createElement("img",{style:C.dealImg,src:"/static/images/wrong.png"})),y.createElement("div",{style:{float:"left"},onClick:this.complete},y.createElement("img",{style:C.dealImg,src:"/static/images/greenRight_A.png"}))));if("service"==t.type&&0==t.service.call&&2==t.st){var n="确认服务";1==t.for_member&&(n="确认见面"),s=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[C.noPaddingRight,{width:"80px"}],onClick:this.complete},n))}else"service"==t.type&&0==t.service.call&&5==t.st?s=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[C.noPaddingRight,{width:"80px"}],onClick:this.complete},"同意退款")):"service"==t.type&&1==t.service.call&&2==t.st&&(s=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[C.noPaddingRight,{width:"80px"}],onClick:this.orderStartCall},"开始通话")),t.actual_cost>0&&(s=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[C.noPaddingRight,{width:"80px"}],onClick:this.orderStartCall},"重拨"))));return"zd"==t.type&&(s=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[C.noPaddingRight,{width:"80px"}],onClick:function(){e.goUrl(t.btn_url,"订单详情")}},"去回答"))),s},_orderStartCall:function(e){var t=this.context,s=t.auth_info,n=t.fconf,a=this.props.order,i=n.online_url+"talent/v3/usrv/order_start_call?"+E.stringify(r({orderid:a.orderid},s));fetch(i).then(w).then(function(e){1==e.ret?((0,u.default)("正在连线，请您耐心等待..."),setTimeout(function(){alert("完成通话后，请您确认服务并评价。如遇未接通，可尝试重新拨打。"),location.reload()},1e4)):((0,u.default)(e.error),setTimeout(function(){location.reload()},1e3))}).catch(x)},orderStartCall:function(e){var t=this.props.order;e.stopPropagation(),confirm("您确定开始通话吗?")&&(MaiMai_Native.native_save_service_phone_no?MaiMai_Native.native_save_service_phone_no("_orderStartCall_"+t.orderid):this._orderStartCall(""))},renderDoneArea:function(){var e=this.props.order;return y.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():"已忽略")},renderMember:function(){var e=this.props.order.member||{};return 1==e.mem_id||2==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img1",onClick:this.openMyMember}):3==e.mem_id||5==e.mem_id||6==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img2",onClick:this.openMyMember}):4==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img3",onClick:this.openMyMember}):y.createElement("span",{className:"cursor-pointer  add_huiyuan_img",onClick:this.openMyMember})},openMyMember:function(e){e.stopPropagation(),b("/uh_memlist?tpl=show&fr=tasks","会员权益","fetch")},render:function(){var e=this,t=(this.context.req,this.props.order),s=t.title,n="";"service"==t.type?(n="已支付"+t.cost+"元购买服务",1==t.for_member&&(n="")):"chatgift"==t.type?3==t.pay_status&&1==t.refund_type&&0==t.is_accept_later?n="对方已等待超过24小时，请处理":1==t.pay_status&&(n=t.cost+"元心意礼金请你喝杯咖啡",1==t.is_noincome&&(n="奖励1点影响力，请您处理一下")):"zd"==t.type&&(n="回答后，您将收入"+t.cost_in.toFixed(1)+"元");var r="service-icon";return"service"==t.type&&0==t.service.call&&2==t.st?(n=t.srcucard.name+"已接单，服务完成后请您确认，Ta将收到服务费。3个工作日后将自动确认。",1==t.for_member&&(n=t.srcucard.name+"已接受见面邀请,约好线下见面时间后请确认。"),r="remind-icon"):"service"==t.type&&0==t.service.call&&5==t.st?(n=t.srcucard.name+"申请退款，请您处理。3个工作日后未处理，系统将自动退款。",r="remind-icon"):"service"==t.type&&1==t.service.call&&2==t.st&&(n=t.srcucard.name+"已同意通话，协商通话时间后请点击“开始通话”发起。15天后未发起自动取消订单",t.actual_cost>0&&(n="您已通话。有需要可重拨或点击卡片去“确认服务”。3个工作日内未处理将自动确认。"),r="remind-icon"),y.createElement(_.default,{component:"li",className:"list-group-item"},y.createElement("div",{className:"media list-group-item-heading list-group-item-text"},y.createElement("div",{className:"media-left media-middle"},y.createElement("img",{style:C.avatar,src:t.srcucard.avatar,onClick:this.goContactDetail})),y.createElement("div",{className:"media-body media-middle",onClick:function(){e.goUrl(t.btn_url,"service"==t.type?"订单详情":"极速联系")}},y.createElement("div",{style:C.name},y.createElement("div",{style:C.namestr},s)),y.createElement("div",{style:C.line1,className:"text-muted small lineClamp1"},y.createElement(k,{text:t.srcucard.name+" | "+t.srcucard.career,support_dref:!0}),1==t.srcucard.judge&&y.createElement("span",{className:"add_v_img"}),t.member&&1==t.member.mem_st&&this.renderMember()),("chatgift"==t.type||"service"==t.type&&1==t.st)&&y.createElement("div",{className:"lineClamp2 font-13"},y.createElement("span",null,"附言: ",t.msg?t.msg:"无")),"zd"==t.type&&y.createElement("div",{className:"lineClamp2 font-13"},y.createElement("span",null,"问题: ",t.msg?t.msg:"无"))),y.createElement("div",{className:"media-right media-middle"},t.done?this.renderDoneArea():this.renderBottomButtons())),y.createElement("div",{style:C.addTxt,onClick:function(){e.goUrl(t.btn_url,"订单详情")}},y.createElement("div",{className:"service"==t.type?r:"commu-icon"},n)))}})),C={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},avatar:{width:52,height:52},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"62px",marginTop:7},noPaddingRight:{marginRight:"-10px",marginTop:"6px"}};e.exports=M},689:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),u=s(15),p=n(u),m=s(75),f=s(981),_=n(f),h=s(1),g=n(h),y=s(165),v=n(y),k=s(1007),b=n(k),q=s(986),w=n(q),x=s(1153),E=n(x),M=s(1154),C=n(M),N=s(1155),B=n(N),T=s(272),R=n(T),S=s(46),j=n(S),P=s(114),O=n(P),W=s(164),F=s(113),L=s(167),V=s(292),A=n(V),I=s(982),U=s(983);s(985)("app");t.default=e.exports=(l=o=function(e){function t(){var e,s,n,i;r(this,t);for(var o=arguments.length,l=Array(o),d=0;d<o;d++)l[d]=arguments[d];return s=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.loadMoreContacts=function(){var e=n.props.cursor,s=n.refs.loader;s&&s.bindRequest(function(){return t.loadContacts(n.context,n.nextPage).then(function(t){e.select("contacts","contacts").concat(t.contacts||[]),e.select("contacts","remain").set(t.remain||0),n.nextPage++})})},n.loadMoreServices=function(){var e=n.props,s=e.cursor,r=e.services2,a=n.refs.loader;a&&a.bindRequest(function(){return t.loadServices(n.context,r.more_idx).then(function(e){s.select("services2","orders").concat(e.orders||[]),s.select("services2","more_num").set(e.more_num||0),s.select("services2","more_idx").set(e.more_idx||0)})})},n.loadMoreQuestions=function(){var e=n.props,s=e.cursor,r=(e.yewen_questions,n.refs.loader);r&&r.bindRequest(function(){return t.loadQuestions(n.context,n.nextPage||1).then(function(e){s.select("yewen_questions","questions").concat(e.questions||[]),s.select("yewen_questions","more").set(e.more||0),n.nextPage++})})},n.loadMore=function(){var e=n.props.cursor,s=n.refs.loader;s&&s.bindRequest(function(){return console.log("============= request loading  "),t.loadData(n.context,n.nextPage||1).then(function(t){e.select("tasks","requests").concat(t.requests),e.select("tasks","remain").set(t.remain),n.nextPage++,n.context.req.query.badge||(0,F.sendWebViewBroadcast)("load_more",{})})})},n.reloadReqs=function(){var e=n.props.cursor,s=n.refs.loader;s&&s.bindRequest(function(){return t.loadData(n.context,0).then(function(t){e.select("tasks","requests").set(t.requests),e.select("tasks","remain").set(t.remain)})})},n.componentDidMount=function(){var e=n.context.req;n.nextPage=1,window.setting=n.setting,window.ignoreAllAddFr=n.ignoreAllAddFr,n.props.mystatus.status||(0,F.bindBroadcast)("User_Info_Changed",W.refreshPageSilent),(0,F.bindBroadcast)("task_mid_is_done",n.updateMidTaskState),(0,F.bindBroadcast)("yewen_is_done",n.updateYewenQuestionState),(0,F.bindBroadcast)("acceptFriendSuc",n.updateTaskStateByUid),(0,F.bindBroadcast)("phone_service_end",n.onPhoneServiceEnd),(0,F.bindBroadcast)("ignore_all_add_fr",W.refreshPageSilent),(0,F.bindBroadcast)("ignore_alert",n.ignoreAlert),n.context.req.query.badge&&(0,F.bindBroadcast)("load_more",n.loadMore),n.context.req.query.open_webjid&&(0,j.default)("/job?webjid="+n.context.req.query.open_webjid,"职位详情","fetch"),1==e.query.pending&&window.MaiMai_Native&&window.MaiMai_Native.native_clear_task_list_badge&&window.MaiMai_Native.native_clear_task_list_badge()},n.spliceTaskList=function(e){var t=n.props,s=t.cursor,r=t.displayLen,a=t.tasks,i=t.originLen,o=n.context.req;r>i?(r--,s.select("displayLen").set(r)):s.select("displayLen").set(i),s.select("tasks","requests").splice([e,1]),o.query.badge&&s.select("tasks","requests").get().length<=i&&a.remain>0&&n.loadMore()},n.spliceQuestionList=function(e){var t=n.props,s=t.cursor,r=t.yewen,a=t.yewen_questions,i=t.originLen,o=n.context.req;r>i?(r--,s.select("yewen").set(r)):s.select("yewen").set(i),s.select("yewen_questions","questions").splice([e,1]),o.query.badge&&s.select("yewen_questions","questions").get().length<=i&&a.more>0&&n.loadMoreQuestions()},n.spliceOrderList=function(e){var t=n.props,s=t.cursor,r=t.uh,a=t.services2,i=t.originLen,o=n.context.req;r>i?(r--,s.select("uh").set(r)):s.select("uh").set(i),s.select("services2","orders").splice([e,1]),o.query.badge&&s.select("services2","orders").get().length<=i&&a.more_num>0&&n.loadMoreServices()},n.updateMidTaskState=function(e){if(e.id){var t=n.props,s=t.cursor,r=t.tasks,a=t.resume_request_tasks,i=t.resume_storage_request_tasks,o=t.candidate_hunter_service_tasks,l=r.all_total;0==e.done&&e.asyncMode?l++:1==e.done&&e.asyncMode||l--,s.select("tasks").select("all_total").set(l),r.requests.map(function(t,r){t.id==e.id&&(s.select("tasks","requests",r).select("done").set(e.done),1!=e.done&&2!=e.done||n.spliceTaskList(r))}),n.show_resume_request_block()&&a.requests.map(function(t,n){t.id==e.id&&(s.select("resume_request_tasks","requests",n).select("done").set(e.done),1!=e.done&&2!=e.done||s.select("tasks","requests").splice([index,1]))}),n.show_resume_storage_block()&&i.requests.map(function(t,n){t.id==e.id&&(s.select("resume_storage_request_tasks","requests",n).select("done").set(e.done),1!=e.done&&2!=e.done||s.select("tasks","requests").splice([index,1]))}),n.show_candidate_hunter_service_block()&&o.requests.map(function(t,n){t.id==e.id&&(s.select("candidate_hunter_service_tasks","requests",n).select("done").set(e.done),1!=e.done&&2!=e.done||s.select("tasks","requests").splice([index,1]))})}else if(e.orderid){var c=n.props,s=c.cursor,d=c.services2,l=d.total_num;l--,s.select("services2").select("total_num").set(l),d.orders.map(function(t,r){t.orderid==e.orderid&&(s.select("services2","orders",r).select("done").set(e.done),n.spliceOrderList(r))})}},n.updateTaskStateByUid=function(e){var t=n.props,s=t.cursor,r=t.tasks,a=r.all_total;r.requests.map(function(t,r){t.icon_user==e&&1==t.type&&(s.select("tasks","requests",r).select("done").set(1),n.spliceTaskList(r),a--,s.select("tasks").select("all_total").set(a))})},n.updateYewenQuestionState=function(e){var t=n.props,s=t.cursor,r=t.yewen_questions,a=r.total||0;r.questions.map(function(t,r){t.question_id==e.id&&(s.select("yewen_questions","questions",r).select("done").set(1),n.spliceQuestionList(r),a--,s.select("yewen_questions").select("total").set(a))})},n.onPhoneServiceEnd=function(){location.reload()},n.ignoreAlert=function(){n.props.cursor.select("tasks","alert_fr").set(null)},n.to_privacy_setting=function(){var e=n.context,t=e.fconf,s=e.auth_info,r=n.props.cursor;fetch(t.online_url+"user/v3/ignore_fr_alert?"+p.default.stringify(c({},s))),r.select("tasks","alert_fr").set(null),(0,F.sendWebViewBroadcast)("ignore_alert",{}),(0,j.default)("/user_conf/privacy_add_friends","防打扰设置","fetch")},n.close_alert=function(){var e=n.props.cursor,t=n.context,s=t.fconf,r=t.auth_info;fetch(s.online_url+"user/v3/ignore_fr_alert?"+p.default.stringify(c({},r))),e.select("tasks","alert_fr").set(null),(0,F.sendWebViewBroadcast)("ignore_alert",{})},n.updateMyselfInfo=function(){(0,j.default)("/contact/detail/"+n.context.auth_info.u+"?edit_mode=1&from=task_list_edit","编辑资料","fetch")},n.more_tasks=function(){n.reloadReqs(),(0,j.default)("/user_conf/task_list?pending=2","待处理事项","fetch")},n.more_services=function(){(0,j.default)("/user_conf/task_list?pending=3","待处理订单","fetch")},n.more_questions=function(){(0,j.default)("/user_conf/task_list?pending=4","回答悬赏问题-业问","fetch")},n.more_request_resume_tasks=function(){n.reloadReqs(),(0,j.default)("/user_conf/task_list?pending=5","待处理职业机会","fetch")},n.more_request_resume_storage_tasks=function(){n.reloadReqs(),(0,j.default)("/user_conf/task_list?pending=7","待处理职业机会","fetch")},n.more_candidate_hunter_service_tasks=function(){n.reloadReqs(),(0,j.default)("/user_conf/task_list?pending=6","职业发展顾问推荐","fetch")},n.ignoreAllAddFr=function(){(0,L.showModalForConfirm)({title:"忽略全部待处理好友请求，同时待处理的好友申请将被清空",ok_text:"忽略全部",ok:function(){var e=n.context,t=e.fconf,s=e.auth_info,r=fetch(t.online_url+"user/v3/ignore_all_frtasks?"+p.default.stringify(c({},s))).then(m.parse_online_json).then(function(e){(0,F.sendWebViewBroadcast)("ignore_all_add_fr",{})}).catch(m.toast_error_handler);(0,O.default)("请求中...",r)},cancel_text:"取消"})},n.filterRequests=function(){var e=n.props.tasks,t=n.context.req,s=n.show_resume_request_block(),r=n.show_resume_storage_block(),a=s||5!=t.query.pending,i=r||7!=t.query.pending;return e.requests?e.requests.filter(function(e){return 1e4==e.type||!(a&&19==e.type||i&&23==e.type)&&0==e.done}):[]},n.filterResumeRequests=function(){var e=n.props.resume_request_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},n.filterResumeStorageRequests=function(){var e=n.props.resume_storage_request_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},n.filterCandidateHunterServices=function(){var e=n.props.candidate_hunter_service_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},n.indexOfRequests=function(e){return n.props.tasks.requests.indexOf(e)},n.show_resume_request_block=function(){var e=n.props.resume_request_tasks;return e&&e.requests&&e.requests.length>0},n.show_resume_storage_block=function(){var e=n.props.resume_storage_request_tasks;return e&&e.requests&&e.requests.length>0},n.show_candidate_hunter_service_block=function(){var e=n.props.candidate_hunter_service_tasks;return e&&e.requests&&e.requests.length>0},n.open_vip_page=function(){(0,j.default)("/uh_memlist?fr=tasklst_1","购买会员","fetch")},i=s,a(n,i)}return i(t,e),d(t,[{key:"setting",value:function(){(0,j.default)("/user_conf/privacy_add_friends","防打扰设置","fetch")}},{key:"render",value:function(){var e,t=this,s=this.props,n=s.tasks,r=s.services2,a=s.contacts,i=s.displayLen,o=(s.uh,s.uhbadge),l=s.yewen,c=s.ywbadge,d=s.yewen_questions,u=s.cursor,p=s.resume_request_tasks,m=s.resume_storage_request_tasks,f=s.candidate_hunter_service_tasks,h=s.mycard,y=this.context.req,k=this.filterRequests();k&&k[0]&&1e4==k[0].type&&i++;var q=a&&a.contacts.length>0;1==y.query.pending&&y.query.badge?(e=R.default,e.top_right_item={title:"设置",callback:"setting()"}):2==y.query.pending&&n.all_total>0&&(e=R.default,e.top_right_item={title:"忽略全部",callback:"ignoreAllAddFr()"});var x=r&&r.orders.length>0,M=d&&d.questions.length>0,N=this.filterResumeRequests(),T=this.filterResumeStorageRequests(),S=this.show_resume_request_block()&&N.length>0,j=this.show_resume_storage_block()&&T.length>0,P=this.filterCandidateHunterServices(),O=this.show_candidate_hunter_service_block()&&P.length>0,W=!1,F=q?{loadMore:this.loadMoreContacts,hasMore:a.remain>0}:x&&3==y.query.pending?{loadMore:this.loadMoreServices,hasMore:r.more_num>0}:M&&4==y.query.pending?{loadMore:this.loadMoreQuestions,hasMore:d.more>0}:{loadMore:this.loadMore,hasMore:n.remain>0},L=n.all_total<=0&&!x&&!M&&S<=0&&j<=0&&!O&&!q;return g.default.createElement("div",null,e&&g.default.createElement(U,{msg_to_app:e}),g.default.createElement(_.default,{title:0!=y.query.pending?3==y.query.pending?"待处理订单":4==y.query.pending?"回答悬赏问题-业问":5==y.query.pending?"待处理职业机会":7==y.query.pending?"待处理企业邀请":"待处理事项":"已处理"}),L&&g.default.createElement("div",{className:" p-y-lg m-y-lg text-center"},g.default.createElement("div",{className:"font-0"},g.default.createElement("div",{className:"empty-view imacss imacss-loading"})),g.default.createElement("div",{className:"text-center font-12 text-blue-0ba0ff"},"暂无待处理事项哦~")),n.alert_fr&&g.default.createElement("div",{className:"taskTips yellowBg p-y-10 p-l-10 clearfix"},g.default.createElement("div",{className:"fl"},g.default.createElement("span",{className:"small imacss imacss-msg_edit3x msg_edit_icon",onClick:this.to_privacy_setting},"好友请求太多骚扰?点此设置防打扰")),g.default.createElement("div",{className:"fr",onClick:this.close_alert},g.default.createElement("span",{className:"p-x-10"},"×"))),g.default.createElement(I,{loadMore:F.loadMore,hasMore:F.hasMore,loader:g.default.createElement(v.default,{ref:"loader",reload:F.loadMore,cursor:u.select("loading_status")})},g.default.createElement("div",{className:"panel panel-default"},x&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"待处理订单")),g.default.createElement("ul",{className:"list-group"},(x&&3!=y.query.pending||r&&r.orders)&&(x&&y.query.pending,r.orders).map(function(e,s){return g.default.createElement(B.default,{updateMyselfInfo:t.updateMyselfInfo,order:e,mystatus:t.props.mystatus,cursor:u,index:s})}),!1),M&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"业问用户提问")),M&&g.default.createElement("ul",{className:"list-group"},(c<=10?d.questions.slice(0,l):d.questions).map(function(e,s){return g.default.createElement(E.default,{updateMyselfInfo:t.updateMyselfInfo,question:e,mystatus:t.props.mystatus,cursor:u,index:s})}),M&&y.query.pending&&y.query.badge&&d.total>(d.questions&&d.questions.length>l?l:d.questions.length)&&g.default.createElement(w.default,{title:"全部悬赏问题 ("+d.total+") >>",onClick:this.more_questions})),j>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",{className:"text-muted"},"待处理企业邀请，即刻处理加入企业人才库~")),j>0&&g.default.createElement("ul",{className:"list-group"},T.slice(0,1).map(function(e,s){return g.default.createElement(C.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,resume_storage_request_block:1,index:s})}),(m.remain>0||(T&&T.length)>1)&&g.default.createElement(w.default,{title:"全部待处理企业请求 >>",onClick:this.more_request_resume_storage_tasks})),S>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",{className:"text-muted"},"待处理职业机会，即刻处理获取心仪offer")),S>0&&g.default.createElement("ul",{className:"list-group"},N.slice(0,1).map(function(e,s){return g.default.createElement(C.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,resume_request_block:1,index:s})}),(p.remain>0||(N&&N.length)>1)&&g.default.createElement(w.default,{title:"全部待处理职业机会 >>",onClick:this.more_request_resume_tasks})),O&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"职业发展顾问推荐")),O&&g.default.createElement("ul",{className:"list-group"},P.slice(0,1).map(function(e,s){return g.default.createElement(C.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,candidate_hunter_service_block:1,index:s})}),(f.remain>0||(P&&P.length)>1)&&g.default.createElement(w.default,{title:"全部推荐 >>",onClick:this.more_candidate_hunter_service_tasks})),n.all_total>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},5==y.query.pending?"待处理职业机会,尽快处理会有更多高薪机会哦~":7==y.query.pending?"待处理企业邀请，即刻处理加入企业人才库~":"待处理申请")),g.default.createElement("ul",{className:"list-group"},(1==y.query.pending&&y.query.badge-o-c<=10?k.slice(0,i):k).map(function(e){var s=t.indexOfRequests(e);return g.default.createElement("div",{key:e.id},2==y.query.pending&&!W&&2==e.real_accepted&&(W=!0)&&g.default.createElement("div",{className:"panel-heading",style:{background:"#f9f9f9"}},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"未提醒的好友请求")),g.default.createElement(C.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,index:s}))}),(q||y.query.pending&&y.query.badge)&&n.all_total>(k.length>i?i:k.length)&&g.default.createElement(w.default,{title:"全部待处理事项 >>",onClick:this.more_tasks})),q&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"你可能认识"),(1!=h.mem_st||1==h.mem_st&&2==h.mem_id)&&g.default.createElement("span",{className:"font-13 text-blue-416596 pull-right",onClick:this.open_vip_page},g.default.createElement("i",{className:"task_vip_icon"}),"我也要推广自己，提升人气！")),q&&g.default.createElement("ul",{className:"list-group"},a.contacts.map(function(e,s){return g.default.createElement(b.default,{contact:e,pingback:{fr:3,position:s},status:t.props.mystatus.status,key:e.id,from:"rec_list",cursor:u.select("contacts","contacts",s),mycard:t.props.mycard})})))))}}],[{key:"loadData",value:function(e,t){var s=e.auth_info,n=e.req,r=e.fconf,a=r.online_url+"user/v3/tasks?"+p.default.stringify(c({page:t,count:10,pending:n.query.pending},s,{channel:"beta",version:"3.33.6"}));return(0,A.default)(fetch(a),1e4).then(m.parse_online_json)}},{key:"loadContacts",value:function(e,t){var s=e.auth_info,n=(e.req,e.fconf,"/sdk/contact/rec_frs?"+p.default.stringify(c({page:t,count:10},s)));return fetch(n,{credentials:"same-origin"}).then(m.parse_online_json)}},{key:"loadQuestions",value:function(e,t){var s=e.auth_info,n=(e.req,e.fconf),r=n.online_url+"/user/v4/yewen_questions?"+p.default.stringify(c({page:t,count:10},s));return fetch(r,{credentials:"same-origin"}).then(m.parse_online_json)}},{key:"loadServices",value:function(e,t){var s=e.auth_info,n=(e.req,e.fconf),r=n.online_url+"talent/v3/usrv/myorders_v2?"+p.default.stringify(c({more_idx:t,limit:10},s));return fetch(r).then(m.parse_online_json)}}]),t}(g.default.Component),o.contextTypes={auth_info:g.default.PropTypes.object,req:g.default.PropTypes.object,fconf:g.default.PropTypes.object},l)}});