webpackJsonp([69],{1642:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(c);t.default=e.exports=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.cname,n=e.logo,a=e.count,o=e.rank,r=e.topCount,l=e.voted,c="dbv-company-result-item"+(l?" dbv-company-result-item-active":"");return i.default.createElement("div",{className:c},i.default.createElement("div",{className:"dbv-company-result-item-fill",style:{width:a/r*100+"%"}}),i.default.createElement("div",{className:"dbv-company-result-item-rank"},o+1),i.default.createElement("div",{className:"dbv-company-result-item-icon"},i.default.createElement("img",{src:n,alt:""})),i.default.createElement("div",{className:"dbv-company-result-item-name"},t),i.default.createElement("div",{className:"dbv-company-result-item-count"},a,"名 ",i.default.createElement("p",null,"员工已支持")))}}]),t}(i.default.Component)},940:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,i,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(983),d=a(f),m=n(1642),p=a(m),v=n(981),b=a(v),y=n(1),_=a(y),h=n(15),g=a(h),E=n(75),w=a(E),k=n(17),j=(a(k),n(115));t.default=e.exports=(i=c=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.voteForMyCompany=function(e){if(e.stopPropagation(),n.context.auth_info.u<0)return void(0,j.launch_webview)();var t=n.context.auth_info,a="/sdk/activity/didi_vote?"+g.default.stringify(u({cname:n.props.company.stdname,clogo:n.props.company.clogo},t));fetch(a,{credentials:"same-origin"}).then(w.default.parse_online_json).then(function(e){n.setState({voted:!0})}).catch(w.default.toast_error_handler).catch(function(){n.setState({voted:!0})})},n.renderMoreItem=function(){var e={share_info:{title:"你出行，公司直付——让老板听到你们的呼声！",icon_url:"",desc:""},more_items:[{title:"分享",callback:"MaiMai_Native.native_share(1)"}]};return _.default.createElement(d.default,{msg_to_app:e})},n.state={voted:!!n.props.voted},n}return l(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var n={title:"你出行，公司直付——让老板听到你们的呼声！",link:window.location.href,imgUrl:"",desc:"",success:function(){},cancel:function(){}};t.wx_sdk.onMenuShareAppMessage(n),t.wx_sdk.onMenuShareTimeline(n),t.wx_sdk.onMenuShareQQ(n),t.wx_sdk.onMenuShareQZone(n)}}},{key:"render",value:function(){var e=this.state.voted,t=this.props,n=t.company,a=t.all_company,o=Array.from(a).find(function(e){return e.logo==n.clogo}),r=Array.from(a).findIndex(function(e){return e.logo==n.clogo}),l=-1!=r?r:a.length,c=o?o.count:1;return _.default.createElement("div",{style:{maxWidth:750,margin:"0 auto"}},_.default.createElement(b.default,{title:"你出行，公司直付——让老板听到你们的呼声！"}),this.renderMoreItem(),_.default.createElement("div",{className:"dbv-content"},_.default.createElement("div",{className:"font-0 dbv-slogan"},_.default.createElement("img",{className:"mw-100",src:"/static/images/activity/didi_for_biz_vote/slogan.png"})),_.default.createElement("div",{className:"font-0"},_.default.createElement("img",{className:"mw-100",src:"/static/images/activity/didi_for_biz_vote/didi-car.png"})),_.default.createElement("div",{className:"dbv-bg"},_.default.createElement("div",{className:"dbv-desc"},"一入职场深似海，加班贴票都是命。",_.default.createElement("br",null),"月末报销贴票耗尽最后一丝HP值？",_.default.createElement("br",null),"每个月活着全靠打车报销回款？偏偏不信命！",_.default.createElement("br",null),"点击支持，让企业为加班/商务出行直接支付，",_.default.createElement("br",null),"你的老板也许能听到你的呼声哦！"),_.default.createElement("div",{className:"dbv-company-result"},_.default.createElement("div",{className:"dbv-my-company"},_.default.createElement(p.default,{logo:n.clogo,cname:n.stdname,count:c,rank:l,topCount:a[0].count,voted:e})),_.default.createElement("div",{className:"dbv-all-company"},a.slice(0,10).map(function(e,t){return _.default.createElement(p.default,{key:t,logo:e.logo,cname:e.name,count:e.count,rank:t,topCount:a[0].count})}))))),_.default.createElement("div",{className:"font-0 p-x p-y-30 dbv_buttton_top"}),!e&&_.default.createElement("div",{className:"font-0 p-x p-y-20 dbv-vote-area",onClick:this.voteForMyCompany},_.default.createElement("div",{className:"dbv-vote-button"},"支持",_.default.createElement("span",{className:"light_right_finger dbv-vote-finger"}))))}}]),t}(_.default.Component),c.contextTypes={req:_.default.PropTypes.object,fconf:_.default.PropTypes.object,auth_info:_.default.PropTypes.object,wx_sdk:_.default.PropTypes.object},i)}});