webpackJsonp([38],{1181:function(t,e,a){"use strict";var i=a(1),n=a(1182),o=i.createClass({displayName:"ReplyModule",getInitialState:function(){var t=this.props.text1;return{timerdata:{isClocking:!1,maxTime:null,reset:!1,hide:!0},hasTime:0,record:"startRecord",again:"again hid",ok:"ok hid",text:t||"录音最长时间60秒，回答后将收入5元。后续被¥1收听后，与提问者平分",againClick:null,okClick:null,hasRecord:!1}},timeDone:function(t){this.setState({hasTime:t}),this.props.cursor.select("record_secs").set(t),this.setState({hasRecord:!0})},autoReset:function(){this.setState({record:"playRecord",again:"again",text:"轻按下方按钮试听录音",ok:"ok",timerdata:{reset:!1,isClocking:!1,maxTime:this.state.timerdata.maxTime,hide:this.state.timerdata.hide}})},render:function(){var t=this.state.record,e=this.state.again,a=this.state.ok,o=(this.state.time,this.state.text),s=this.state.againClick,r=this.state.okClick;return i.createElement("div",null,i.createElement("div",{className:"textBox"},i.createElement("strong",null,i.createElement(n,{isClocking:this.state.timerdata.isClocking,maxTime:this.state.timerdata.maxTime,reset:this.state.timerdata.reset,hide:this.state.timerdata.hide,callBack:this.timeDone,autoResetCB:this.autoReset,total:this.state.hasRecord?this.state.hasTime:null})),o),i.createElement("div",{className:"replyModule"},i.createElement("div",{className:e,onClick:s},"重录"),i.createElement("div",{className:t,onClick:this.handleClick}),i.createElement("div",{className:a,onClick:r},"确认发送")),i.createElement("div",{className:"cancelBtn clearfix",onClick:this.props.rejectAnswer},"忽略问题"))},againClick:function(t){this.setState(this.getInitialState())},okClick:function(t){this.props.postAnswer()},handleClick:function(t){var e=this.props,a=e.startRecord,i=e.stopRecord,n=e.playData,o=e.stopPlay;"startRecord"==this.state.record?(this.setState({record:"recording",text:"轻按下方按钮结束录音",timerdata:{isClocking:!0,maxTime:59,reset:!0,hide:!1}}),a()):"recording"==this.state.record?(this.setState({record:"playRecord",again:"again",ok:"ok",againClick:this.againClick,okClick:this.okClick,text:"轻按下方按钮试听录音",timerdata:{isClocking:!1,maxTime:59,reset:!1,hide:!1}}),i()):"playRecord"==this.state.record?(this.setState({record:"playing",again:"again hid",ok:"ok hid",text:"试听中...",timerdata:{isClocking:!0,maxTime:this.state.hasTime,reset:!0,hide:!1}}),n()):"playing"==this.state.record&&(this.setState({record:"playRecord",again:"again",ok:"ok",againClick:this.againClick,okClick:this.okClick,text:"轻按下方按钮试听录音",timerdata:{isClocking:!1,maxTime:59,reset:!1,hide:!1}}),o())}});t.exports=o},1182:function(t,e,a){"use strict";var i=a(1),n=i.createClass({displayName:"Timer",getDefaultProps:function(){return{isClocking:!1,maxTime:null,callBack:null,reset:!1,hide:!0}},getInitialState:function(){return{isClocking:!1,interval:null,total:0,reset:!1}},tick:function(){this.setState({total:this.state.total+1}),this.state.total>=this.props.maxTime&&(this.isClockingChange(!1),this.props.autoResetCB())},isClockingChange:function(t){if(this.setState({isClocking:this.props.isClocking}),t){var e=setInterval(this.tick,1e3);this.setState({interval:e})}else clearInterval(this.state.interval),this.setState({interval:null}),this.props.total?(this.setState({total:this.props.total}),this.props.callBack(this.props.total)):this.props.callBack(this.state.total)},componentDidMount:function(){},componentDidUpdate:function(t,e){this.props.reset!=t.reset&&(this.setState({reset:this.props.reset}),this.props.reset&&(clearInterval(this.state.interval),this.setState({interval:null,total:0,reset:!1}))),this.props.isClocking!=t.isClocking&&this.isClockingChange(this.props.isClocking)},componentWillUnmount:function(){clearInterval(this.interval)},render:function(){var t={};return this.props.hide&&(t={display:"none"}),i.createElement("span",{style:t},"0:",this.state.total)}});t.exports=n},1184:function(t,e,a){"use strict";var i=a(1),n=a(78),o=i.createClass({displayName:"Anscard",contextTypes:{auth_info:i.PropTypes.object,fconf:i.PropTypes.object,req:i.PropTypes.object},goContactDetail:function(){var t=this.props.card;this.context.auth_info;n(t.encode_mmid||t.id,this.context)},render:function(){var t=this.props.card;return i.createElement("div",{className:"questionerCard clear",onClick:this.goContactDetail},i.createElement("em",{className:"qcname"},t.name),i.createElement("em",{className:"jtitle"},t.career))}});t.exports=o},900:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r,l,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},d=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),u=a(1002),p=(i(u),a(1)),h=i(p),f=a(981),_=i(f),m=a(75),y=a(15),v=i(y),g=a(76),w=i(g),k=a(113),C=(i(k),a(17)),b=i(C),q=a(114),x=i(q),M=a(1179),T=i(M),N=a(1180),S=(i(N),a(988)),E=(i(S),a(1181)),j=i(E),P=a(1183),R=(i(P),a(1184)),D=i(R),A=a(1185),O=i(A),B=a(50),z=i(B),I=a(113),U=a(983),V=a(998);e.default=t.exports=(l=r=function(t){function e(){var t,a,i,s;n(this,e);for(var r=arguments.length,l=Array(r),d=0;d<r;d++)l[d]=arguments[d];return a=i=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),i.state={playing:0,stop_play_timeout_id:0,needVersion:!1},i.onPaySuc=function(t){t=JSON.parse(t),window.location.reload()},i.startRecord=function(){window.MaiMai_Native.native_start_record?window.MaiMai_Native.native_start_record(""):alert(MaiMai_Native.native_start_record)},i.stopRecord=function(){window.MaiMai_Native.native_stop_record?window.MaiMai_Native.native_stop_record("onStop"):alert(MaiMai_Native.native_stop_record)},i.onStop=function(t){i.props.cursor.select("record").set(t)},i.playData=function(){window.MaiMai_Native.native_play_record?window.MaiMai_Native.native_play_record(i.props.cursor.select("record").get()):alert(MaiMai_Native.native_play_record)},i.playUrl=function(){if(window.MaiMai_Native.native_play_record_url){if(window.MaiMai_Native.native_play_record_url(i.props.question.question.answer_url),0==i.state.playing){var t=setTimeout(function(){i.setState({playing:0})},1e3*i.props.question.question.answer_seconds);i.setState({stop_play_timeout_id:t})}}else alert(window.MaiMai_Native.native_play_record_url)},i.playUrl2=function(){0==i.state.playing?i.playUrl():(i.stopPlay(),i.state.stop_play_timeout_id>0&&(clearTimeout(i.state.stop_play_timeout_id),i.setState({stop_play_timeout_id:0}))),i.setState({playing:1==i.state.playing?0:1})},i.onPlayDone=function(){i.setState({playing:0})},i.stopPlay=function(){window.MaiMai_Native.native_stop_play_record?window.MaiMai_Native.native_stop_play_record():alert(MaiMai_Native.native_stop_play_record)},i.postAnswer=b.default.debounce(function(){var t=i.context,e=t.auth_info,a=t.fconf,n=(t.req,a.online_url+"talent/v3/zd/post_audio?"+v.default.stringify(c({},e)));(0,x.default)("请求中...",fetch(n,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.default.stringify({fdata:i.props.cursor.select("record").get()})}).then(m.parse_online_json).then(function(t){i.props.cursor.select("recordid").set(t.id),i.postAnswer2()}))},1e3,!0),i.postAnswer2=b.default.debounce(function(){var t=i.context,e=t.auth_info,a=t.fconf,n=t.req,o=a.online_url+"talent/v3/zd/answer_add?"+v.default.stringify(c({qid:n.query.qid,answer:i.props.cursor.select("recordid").get(),secs:i.props.cursor.select("record_secs").get()},e));fetch(o,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.default.stringify({})}).then(m.parse_online_json).then(function(t){(0,w.default)("提交成功"),(0,I.sendWebViewBroadcast)("task_mid_is_done",{orderid:i.props.question.question.orderid,done:1}),window.location.reload()})},1e3,!0),i.BuyAdd=b.default.debounce(function(){var t=i.context,e=t.auth_info,a=t.fconf,n=t.req,o=i.props.question,s=a.online_url+"talent/v3/zd/buy_add?"+v.default.stringify(c({qid:n.query.qid},e));(0,x.default)("请求中...",fetch(s,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.default.stringify({})}).then(m.parse_online_json).then(function(t){var e="/pay/pay_zd_buy?"+v.default.stringify({u2:o.question.auid,cost:t.cost,zd_bid:t.bid});(0,z.default)(e,"职答支付")}))},1e3,!0),i.rejectAnswer=b.default.debounce(function(){var t=i.context,e=t.auth_info,a=t.fconf,n=(t.req,i.props.question),o=a.online_url+"talent/v3/zd/answer_reject?"+v.default.stringify(c({qid:n.question.id},e));(0,x.default)("请求中...",fetch(o,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.default.stringify({})}).then(m.parse_online_json).then(function(t){1==t.ret&&(0,w.default)("提交成功"),window.location.reload()}))},1e3,!0),i.checkVersion=function(){window.MaiMai_Native.native_play_record_url||i.setState({needVersion:!0})},i.shareQuestion=function(){var t=i.context.fconf,e=i.props.question,a=t.web_url+"zd/question?"+v.default.stringify({qid:e.question.id});MaiMai_Native.native_share_v2(1,JSON.stringify({url:a}))},s=a,o(i,s)}return s(e,t),d(e,[{key:"componentDidMount",value:function(){window.onStop=this.onStop,window.onPlayDone=this.onPlayDone,window.shareQuestion=this.shareQuestion,window.native_image_data=V,document.body.style.backgroundColor="#f1f1f1",(0,I.bindBroadcast)("broadcast_web_pay_suc",this.onPaySuc),this.checkVersion()}},{key:"renderToAsk",value:function(){var t=this.props.question,e=this.context.auth_info,a="回答后，您将收入"+t.cost_in.toFixed(1)+"元";return e.u==t.question.auid?h.default.createElement("div",null,h.default.createElement(_.default,{title:"问题详情"}),h.default.createElement(T.default,{ucard:t.qucard,msg:t.question.content,cost:a}),h.default.createElement("div",{className:"clear"}),h.default.createElement(j.default,{startRecord:this.startRecord,stopRecord:this.stopRecord,playData:this.playData,stopPlay:this.stopPlay,cursor:this.props.cursor,postAnswer:this.postAnswer,text1:"录音最长60秒，回答后将收入"+t.cost_in.toFixed(1)+"元。后续每被收听一次，可再收入0.45元",rejectAnswer:this.rejectAnswer})):h.default.createElement("div",null)}},{key:"renderDetail",value:function(){var t=this.props.question,e=this.context.auth_info,a="1元学习下",i=this.BuyAdd;1!=t.has_buy&&e.u!=t.question.quid&&e.u!=t.question.auid||(a=0==this.state.playing?"点击播放":"播放中...",i=this.playUrl2);var n={},o=[];o.push({title:"分享职答",callback:"shareQuestion()"});var s="",r="";return s="快来收听"+t.aucard.name+"的职答吧~",r=t.question.content,n.more_items=o,n.share_info={title:s,name:"职答",desc:r,icon_callback:'native_image_data("au_avatar")',icon_type:"1"},h.default.createElement("div",null,e.u>0&&2==t.question.pay_status&&h.default.createElement(U,{msg_to_app:n}),h.default.createElement(_.default,{title:"问题详情"}),h.default.createElement(O.default,{qucard:t.qucard,question:t.question,aucard:t.aucard,buy_msg:a,buy:i}),h.default.createElement("div",{className:"clear"}),1==t.question.st&&h.default.createElement(D.default,{card:t.aucard}))}},{key:"render",value:function(){var t=this.props.question,e=this.context.auth_info;return 1==this.state.needVersion&&e.u>0?h.default.createElement("div",null,h.default.createElement(_.default,{title:"问题详情"}),h.default.createElement("div",{className:"qTips"},"职答需要新版本支持，请升级脉脉！")):1==t.question.pay_status&&e.u==t.question.auid?this.renderToAsk():this.renderDetail()}}]),e}(h.default.Component),r.contextTypes={auth_info:h.default.PropTypes.object,fconf:h.default.PropTypes.object,req:h.default.PropTypes.object},l)}});