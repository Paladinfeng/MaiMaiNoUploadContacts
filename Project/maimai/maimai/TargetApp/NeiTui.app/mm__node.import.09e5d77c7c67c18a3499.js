webpackJsonp([121],{1152:function(e,t,n){"use strict";var a=n(1),r=a.createClass({displayName:"FormCellSmall",render:function(){return a.createElement("div",{onClick:this.props.onClick},a.createElement("li",{className:"list-group-item form-cell"},a.createElement("div",{className:"media list-group-item-heading list-group-item-text"},a.createElement("div",{className:"text-muted"},a.createElement("span",{className:"small"},this.props.content),a.createElement("span",{className:"arrow imacss imacss-arrow4",style:{marginBottom:"0"}})),a.createElement("div",{className:"large title"},a.createElement("span",{style:{paddingLeft:"3px"}},this.props.title)))))}});e.exports=r},781:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(1),u=a(c),s=n(981),f=a(s),d=n(1012),p=(a(d),n(15)),m=(a(p),n(75)),y=n(113),h=n(46),v=a(h),b=n(50),g=(a(b),n(164),n(166)),_=a(g),w=n(114),E=a(w),x=n(17),q=a(x),N=n(76),C=(a(N),n(1152)),O=(a(C),n(1e3)),j=a(O),k=n(77),F=a(k),P=n(116),T=(a(P),n(78)),S=(a(T),n(1026)),B=_.default.Style,M=function(e){function t(){var e,n,a,l;r(this,t);for(var i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.directAddFriend=q.default.debounce(function(){var e=a.context,t=e.req,n=e.auth_info,r=e.fconf,o=a.refs.msg_input.value;if(o.length<10)return void alert("申请附言不得少于10个字");var l=a.state.lv||1,i=(0,S.addFriend)({lv:l,auth_info:n,fconf:r,u2:t.query.u2,acc:t.query.acc,attach:o,from:t.query.from}).then(function(e){(0,y.sendWebViewBroadcast)("addFriendRequestSent",t.query.u2),(0,v.default)("/contact/add_friend_requested?u2="+t.query.u2,"申请成功","fetch"),window.MaiMai_Native.close_native?window.MaiMai_Native.close_native("",!0):(window.history.back(),window.location.reload())}).catch(m.toast_error_handler);(0,E.default)("请求中...",i)},1e3,!0),a.inputOnChange=function(e){a.forceUpdate()},a.getInputValue=function(){return a.refs&&a.refs.msg_input?a.refs.msg_input.value:"still"==a.context.req.query.from?"":1==a.context.req.query.force_attach?"":(0,S.getDefaultAttach)(a.props.mycard)},a.openChooseLayer=function(){F.default.popup(u.default.createElement(j.default,{onChoose:function(e){a.setState({lv:e})},level:a.state?a.state.lv:1}))},l=n,o(a,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.state.lv||1;j.default.levelInfos[e-1][0],j.default.levelInfos[e-1][1];return u.default.createElement("div",null,u.default.createElement(f.default,{title:"好友申请"}),u.default.createElement(B,{rules:{body:{background:"#f9f9f9"}}}),u.default.createElement("div",{className:"panel-default borderBottom p-b-10"},u.default.createElement("div",{className:"panel-heading",style:{color:"#808080",border:"none"}},"填写附言")),u.default.createElement("div",{className:"addfrFrame addFriendRow borderBottom",style:{marginTop:"0",marginBottom:"20px"}},u.default.createElement("textarea",{ref:"msg_input",style:{fontSize:"15px"},placeholder:"认真填写申请附言，对方更容易通过",value:this.getInputValue(),onChange:this.inputOnChange})),u.default.createElement("div",{style:{margin:"0 10px"}},u.default.createElement("button",{onClick:this.directAddFriend,className:"btn btn-lg m-y btn-block btn-secondary"},"提交")))}}]),t}(u.default.Component);M.contextTypes={req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,auth_info:u.default.PropTypes.object},e.exports=(0,_.default)(M)}});