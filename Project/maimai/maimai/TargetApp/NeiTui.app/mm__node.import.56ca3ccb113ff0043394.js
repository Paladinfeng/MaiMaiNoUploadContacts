webpackJsonp([23],{1136:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),f=n(1137),d=r(f),u=n(17),p=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.onSelected=function(){r.forceUpdate()},i=n,o(r,i)}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.feed,r=t.cursor,a=t.from_error,o=u.find(r.select("feed","unwill").get(),function(e){return e.selected}),i="btn-secondary";a&&!o&&(i="btn-gray-dd");var l="确定";return a||o||(l="不感兴趣"),c.default.createElement("div",{className:"p-x"},c.default.createElement("div",{className:"white-bg border-radius-3 p-t-18 p-b-10"},c.default.createElement("div",{className:"p-x m-b clearfix"},c.default.createElement("div",{className:"fl text-gray-7d p-y-5"},this.props.text||"可选屏蔽理由,推荐更精准"),c.default.createElement("div",{className:"fr"},c.default.createElement("div",{className:"btn font-13 btn-radius-20 p-y-5 p-x-10 text-white "+i,onClick:this.props.onClick},l))),c.default.createElement("div",{className:"p-x-10 clearfix text-center l-h-24"},n.feed.unwill.map(function(t,n){return c.default.createElement(d.default,{cursor:r.select("feed","unwill",n),onClick:e.onSelected})}))))}}]),t}(c.default.Component);t.default=e.exports=p},1137:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(984),f=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.select=function(e){var t=n.props.cursor.select("selected").get();n.props.cursor.select("selected").set(!t),e.stopPropagation()},n}return o(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props.cursor.select("text").get(),n=this.props.cursor.select("selected").get();return s.default.createElement("div",{className:"halfWidth p-x-5 m-b-15 fl"},s.default.createElement("div",{className:"l-h-2 p-x-5 btn-radius-20 "+(n?"btn-secondary":"border-f2-1 text-black-3"),style:(0,c.textOverflow)(1),onClick:function(t){e.props.onClick&&e.props.onClick(t),e.select(t)}},t))}}]),t}(s.default.Component);t.default=e.exports=f},1143:function(e,t,n){"use strict";var r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,l){"object"===o(t)&&void 0!==e?e.exports=l():(r=l,void 0!==(a="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=a))}(0,function(){function e(){var e=i.classPrefix,t=i.ptrElement,n=i.iconArrow,r=i.iconRefreshing,a=i.instructionsRefreshing,o=i.instructionsPullToRefresh,l=i.instructionsReleaseToRefresh,s=t.querySelector("."+e+"icon"),c=t.querySelector("."+e+"text");s.innerHTML="refreshing"===u?r:n,"releasing"===u&&(c.innerHTML=l),"pulling"!==u&&"pending"!==u||(c.innerHTML=o),"refreshing"===u&&(c.innerHTML=a)}function t(){function t(){var e=i.cssProp,t=i.ptrElement,n=i.classPrefix;t.classList.remove(n+"refresh"),t.style[e]="0px",u="pending"}function n(t){var n=i.triggerElement;window.scrollY||(s=t.touches[0].screenY),"pending"===u&&(clearTimeout(r),m=n.contains(t.target),u="pending",e())}function a(t){var n=i.ptrElement,r=i.resistanceFunction,a=i.distMax,o=i.distThreshold,l=i.cssProp,p=i.classPrefix;if(s?c=t.touches[0].screenY:window.scrollY||(s=t.touches[0].screenY),!m||"refreshing"===u)return void(!window.scrollY&&s<c&&t.preventDefault());"pending"===u&&(n.classList.add(p+"pull"),u="pulling",e()),s&&c&&(f=c-s),f>0&&(t.preventDefault(),n.style[l]=d+"px",d=r(f/o)*Math.min(a,f),"pulling"===u&&d>o&&(n.classList.add(p+"release"),u="releasing",e()),"releasing"===u&&d<o&&(n.classList.remove(p+"release"),u="pulling",e()))}function o(){var n=i.ptrElement,a=i.onRefresh,o=i.refreshTimeout,l=i.distThreshold,p=i.distReload,m=i.cssProp,h=i.classPrefix;if("releasing"===u&&d>l)u="refreshing",n.style[m]=p+"px",n.classList.add(h+"refresh"),r=setTimeout(function(){var e=a(t);e&&"function"==typeof e.then&&e.then(function(){return t()}),e||a.length||t()},o);else{if("refreshing"===u)return;n.style[m]="0px",u="pending"}e(),n.classList.remove(h+"release"),n.classList.remove(h+"pull"),s=c=null,f=d=0}return window.addEventListener("touchend",o),window.addEventListener("touchstart",n),window.addEventListener("touchmove",a,{passive:!1}),{onTouchStart:n,onTouchMove:a,onTouchEnd:o}}function n(){var e=i.mainElement,t=i.getMarkup,n=i.getStyles,r=i.classPrefix,a=i.onInit;if(!i.ptrElement){var o=document.createElement("div");e!==document.body?e.parentNode.insertBefore(o,e):document.body.insertBefore(o,document.body.firstChild),o.classList.add(r+"ptr"),o.innerHTML=t().replace(/__PREFIX__/g,r),i.ptrElement=o}var l=document.createElement("style");return l.textContent=n().replace(/__PREFIX__/g,r).replace(/\s+/g," "),document.head.appendChild(l),"function"==typeof a&&a(i),{styleNode:l,ptrElement:i.ptrElement}}var r,a=function(){return'<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'},o=function(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}"},i={},l={distThreshold:60,distMax:80,distReload:50,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"下拉刷新",instructionsReleaseToRefresh:"松开刷新",instructionsRefreshing:"加载中,请稍候...",refreshTimeout:500,getMarkup:a,getStyles:o,onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)}},s=null,c=null,f=0,d=0,u="pending",p=!1,m=!1;return{init:function(e){void 0===e&&(e={});var r;Object.keys(l).forEach(function(t){i[t]=e[t]||l[t]}),"string"==typeof i.mainElement&&(i.mainElement=document.querySelector(i.mainElement)),"string"==typeof i.ptrElement&&(i.ptrElement=document.querySelector(i.ptrElement)),"string"==typeof i.triggerElement&&(i.triggerElement=document.querySelector(i.triggerElement)),p||(r=t(),p=!0);var a=n(),o=a.styleNode,s=a.ptrElement;return{destroy:function(){window.removeEventListener("touchstart",r.onTouchStart),window.removeEventListener("touchend",r.onTouchEnd),window.removeEventListener("touchmove",r.onTouchMove),o.parentNode.removeChild(o),s.parentNode.removeChild(s),p=!1,r=null,o=null,s=null,i={}}}}}})},1425:function(e,t,n){"use strict";(function(r){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),p=a(u),m=n(984),h=n(77),_=a(h),v=n(1136),y=a(v),b=n(15),g=a(b),E=n(1123),w=a(E),x=n(282),N=n(17),P=n(46),T=n(278),j=(c=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.gotoArticleDetail=N.debounce(function(){var e=this.props,t=e.feed,n=e.cursor,a=this.context,o=a.auth_info,i=a.fconf;if(n.select("feed","viewed").set(1),t.feed.target)P(t.feed.target,"查看全文","fetch");else if(3==t.feed.prefix_type)P("/article/topic?id="+t.feed.data_id+"&from=headline","查看全文","fetch");else if(4==t.feed.prefix_type&&window.MaiMai_Native.native_feed_detail)window.MaiMai_Native.native_feed_detail(t.fid);else if(5==t.feed.prefix_type&&window.MaiMai_Native.native_live_video)window.MaiMai_Native.native_live_video(t.feed.data_id,t.feed.qlive_uid==o.u);else{var l="/article/detail?fid="+t.fid+"&from=headline&update_hlbanner=true";P(l,"查看全文","fetch")}var s=r("#great-article-card-ul a"),c=-1;s&&(c=s.index(r("#great-article-card-"+t.fid)));var d=i.online_url+"feed/v3/view_feed?"+g.default.stringify(f({fid:3==t.feed.prefix_type?t.feed.data_id:t.fid,source:"headline",pos:c},o));fetch(d).catch(function(){})},1e3,!0),n.showCover=function(e){e.stopPropagation(),e.preventDefault();var t=n.props,r=t.feed,a=t.cursor;_.default.popup(p.default.createElement(y.default,{onClick:n.feedback,feed:r,cursor:a}))},n.feedback=function(e){var t=n.props.feed;_.default.dismiss(),n.props.onPopupDismiss(t.fid),e.stopPropagation()},n.state={show_cover:!1},n}return l(t,e),d(t,[{key:"componentWillMount",value:function(){(0,x.localeZh)(T)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.cursor,a=t.feed,o=this.context,i=o.auth_info,l=o.fconf;w.default.threshold(.9),(0,w.default)("#great-article-card-"+a.fid).once("enter",function(){var t=r("#great-article-card-ul a"),o=-1;if(t&&(o=t.index(r("#great-article-card-"+a.fid))),!e.props.feed.feed.pingbacked){var s=l.online_url+"feed/v3/view_headline?"+g.default.stringify(f({fids:a.fid,source:"headline",pos:o},i));console.log(s),fetch(s,{credentials:"same-origin"}).then(function(){console.log("pingback ok!")}).catch(function(){});var c=n.get();c&&c.fid?n.select("feed","pingbacked").set(!0):console.log("==========  data removed")}})}},{key:"render",value:function(){var e=this.props,t=e.feed,n=e.hlfid,r=!!(t.feed.pics&&t.feed.pics.length>0),a=!!(r&&t.feed.pics.length<3),o="";t.feed.source&&t.feed.source.name&&(o=t.feed.source.name.length>7?t.feed.source.name.substring(0,6)+"...":t.feed.source.name,r&&1==t.feed.source.cont_type&&(a=!0));var i=t.feed.rec_info.str,l=t.feed.rec_info.reason,s="";if(1==l){var c=t.feed.rec_info.extra_info;i=c.company+c.position+c.realname,i.length>9&&(i=i.substring(0,8)+"..."),s="点评"}else if(4==l){var f=t.feed.rec_info.extra_info;i=N.map(f,function(e){return e.name}).join("、"),s=(f.length>1?"等"+f.length+"人":"")+t.feed.rec_info.action}var d=t.feed.time_str;if(!d){d=T(t.feed.crtime);var u=T();d=T.duration(u-d).asHours()<=21?d.fromNow():d.format("M月D日")}var h="text-black-3";return t.fid==n?h="text-blue-1c4781":1==t.feed.viewed&&(h="text-gray-7d"),p.default.createElement("a",{id:"great-article-card-"+t.fid,href:"javascript:;",className:"hl_tap_color"},p.default.createElement("div",{className:"m-x font-hl border-bottom-e0 p-b-12 "+(r?"p-t-15 ":"p-t-18"),onClick:this.gotoArticleDetail.bind(this)},p.default.createElement("div",{className:"media-body p-relative"},p.default.createElement("div",{className:"font-17 "+h+(r?" m-b-12":" m-b-10"),style:(0,m.textOverflow)(2)},t.feed.title),r&&!a&&p.default.createElement("div",{className:"m-b-12 clearfix",style:{height:"85px"}},p.default.createElement("div",{className:"fl w-33 h-100",style:{paddingRight:2}},p.default.createElement("div",{className:"border-a-1 h-100 o-hidden"},p.default.createElement("img",{className:"mw-100 hl_image_center",src:t.feed.pics[0]}))),p.default.createElement("div",{className:"fl w-33 h-100",style:{paddingRight:2}},p.default.createElement("div",{className:"border-a-1 h-100 p-relative o-hidden",style:{left:1}},p.default.createElement("img",{className:"mw-100 hl_image_center",src:t.feed.pics[1]}))),p.default.createElement("div",{className:"fl w-33 h-100",style:{paddingLeft:2}},p.default.createElement("div",{className:"border-a-1 h-100 o-hidden"},p.default.createElement("img",{className:"mw-100 hl_image_center",src:t.feed.pics[2]})))),p.default.createElement("div",{className:"text-gray-bc small l-h-1 p-r-15 clearfix"+(a?" p-absolute-bottom w-100":" p-relative")},1==t.feed.ctr_hot&&p.default.createElement("div",{className:"fl m-r-5 font-0"},p.default.createElement("span",{className:"hot_text_icon",style:{marginTop:"-2px"}})),3==t.feed.prefix_type&&p.default.createElement("div",{className:"fl m-r-5"},p.default.createElement("span",{className:"topic_icon"})),!i&&p.default.createElement("div",{className:"fl l-h-16"},o&&!1&&p.default.createElement("span",{className:"m-r-10"},o),p.default.createElement("span",null,d),!1),i&&3!=t.feed.prefix_type&&1==l&&p.default.createElement("div",{className:"clearfix text-black-3"},p.default.createElement("span",{className:"super_icon d-i-b fl m-r-5"}),p.default.createElement("span",{className:"text-orange-ff7200 d-i-b m-t-5"},i),s),i&&3!=t.feed.prefix_type&&(2==l||3==l||5==l||6==l)&&!t.feed.rec_info.rec_num&&p.default.createElement("div",{className:"text-black-3"},i),i&&3!=t.feed.prefix_type&&(2==l||3==l||5==l||6==l)&&t.feed.rec_info.rec_num&&p.default.createElement("div",{className:"text-black-3"},p.default.createElement("span",{className:"text-orange-ff7200"},t.feed.rec_info.rec_num),t.feed.rec_info.rec_action),i&&3!=t.feed.prefix_type&&4==l&&p.default.createElement("div",{className:"text-black-3"},p.default.createElement("span",{className:"text-blue-1c4781"},i),s),p.default.createElement("div",{className:"close_verticle_middle",onClick:this.showCover},p.default.createElement("span",{className:"close_gray"})))),r&&a&&p.default.createElement("div",{className:"media-right p-l-10"},p.default.createElement("div",{style:{width:"113px",height:"85px"}},p.default.createElement("div",{className:"border-a-1 h-100 o-hidden"},p.default.createElement("img",{className:"mw-100 hl_image_center",src:t.feed.pics[0]}))))))}}]),t}(p.default.Component),s.contextTypes={req:p.default.PropTypes.object,fconf:p.default.PropTypes.object,auth_info:p.default.PropTypes.object},c);t.default=e.exports=j}).call(t,n(280))},1426:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),u=n(78),p=r(u),m=n(17),h=r(m),_=(s=l=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.gotoDetail=h.default.debounce(function(e,t){if(82==t)return void e.stopPropagation();(0,p.default)(t,this.context),e.stopPropagation()},1e3,!0),i=n,o(r,i)}return i(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.banner,n=t.same_profession_cnt,r=t.spend_time,a=t.top_avatars,o=t.last_days;r=r>0?parseInt(Math.ceil(r/60)):0;var i="";return i=r<=0&&o<=0?"挑选喜欢的文章，开始阅读吧。":r>0&&o<=0?"你今天已阅读"+r+"分钟。":r<=0&&o>0?"你今天尚未阅读，挑选文章开始阅读吧，已坚持"+o+"天。":"你今天已阅读"+r+"分钟，已坚持"+o+"天",d.default.createElement("div",null,d.default.createElement("div",{className:"hl_reader_bg p-b-10"},d.default.createElement("div",{className:"p-x p-t-10 font-18 text-white"},d.default.createElement("div",{className:"font-bold"},"上进的职场人,",d.default.createElement("br",null),"平均每天花15分钟阅读行业头条。"),d.default.createElement("div",{className:"font-13"},i))),o<=1&&d.default.createElement("div",{className:"p-relative border-bottom-e0 p-y m-b-20 m-x-10"},d.default.createElement("div",{className:"hl_reader_number"},d.default.createElement("span",{className:"text-blue"},n),"同行正在读")),o<=1&&d.default.createElement("div",{className:"text-center font-0"},d.default.createElement("div",{className:"hl_reader_list d-i-b clearfix"},a.map(function(t){return d.default.createElement("div",{className:"fl font-0 p-x-10 m-b-10",key:t.avatar},d.default.createElement("div",{className:"avatar-33 font-0",onClick:function(n){e.gotoDetail(n,t.id)}},d.default.createElement("img",{className:"mw-100 radius-50",src:t.avatar})))}))),d.default.createElement("div",{className:"p-y-5 gray-bg-f2",style:{paddingBottom:"0px"}}))}}]),t}(d.default.Component),l.contextTypes={req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,auth_info:d.default.PropTypes.object},s);t.default=e.exports=_},709:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),u=r(d),p=n(75),m=n(981),h=r(m),_=n(15),v=r(_),y=n(1425),b=r(y),g=n(113),E=n(165),w=r(E),x=n(17),N=r(x),P=n(1143),T=r(P),j=n(283),O=n(982),k=n(1426);t.default=e.exports=(s=l=function(e){function t(){var e,n,r,i;a(this,t);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.updateBanner=function(){var e=r.context,t=e.req,n=e.fconf,a=e.auth_info,o=r.props,i=o.cursor,l=(o.feeds,n.online_url+"feed/v3/get_ptops_banner?"+v.default.stringify(c({},N.default.omit(t.query,"unread"),a)));fetch(l,{credentials:"same-origin"}).then(p.parse_online_json).then(function(e){i.select("feeds","banner").set(e.banner)}).catch(function(e){return(0,p.toast_error_handler)(e)})},r.loadMore=function(){0!=r.props.feeds.remain&&"loading"!=r.props.loading&&r.refs.loader.bindRequest(function(){var e=r.context.req,t=r.props,n=t.cursor,a=t.feeds,o=e.pathname+"?"+v.default.stringify(c({},N.default.omit(e.query,"unread"),{skip:a.feeds.length,jsononly:1}));return fetch(o,{credentials:"same-origin"}).then(p.parse_online_json).then(function(e){if("loading"!=r.props.loading)if(e.data.feeds.feeds&&e.data.feeds.feeds.length>0){var t=a.feeds.concat(e.data.feeds.feeds);n.select("feeds","feeds").set(t),n.select("feeds","remain").set(e.data.feeds.remain)}else n.select("feeds","remain").set(e.data.feeds.remain)}).catch(function(e){return(0,p.toast_error_handler)(e)})})},r.onFeedback=function(e){var t=r.props,n=t.feeds,a=t.cursor,o=N.default.find(n.feeds,function(t){return t.fid==e}),i=N.default.filter(o.feed.unwill,function(e){return e.selected});try{var l="/article/unwill?"+v.default.stringify({fid:e,reason:JSON.stringify(i)});fetch(l,{credentials:"same-origin"}).then(p.parse_online_json).then(function(t){var r=N.default.filter(n.feeds,function(t){return t.fid!=e});a.select("feeds","feeds").set(r)}).catch(alert)}catch(e){alert(e)}},r.scrollToTop=function(e){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?(window.scrollBy(0,-50),r.scrollTimer=setTimeout(r.scrollToTop,10)):clearTimeout(r.scrollTimer)},r.goTopAndRefresh=function(e){r.scrollToTop(),r.loadNew()},r.loadNew=function(){var e=r.props,t=e.cursor,n=e.feeds,a=N.default.filter(n.feeds,function(e){return 115!=e.fid});t.select("feeds","feeds").set(a),t.select("loading").set("loading");var o=r.context.req,i=o.pathname+"?"+v.default.stringify(c({},N.default.omit(o.query,"unread"),{skip:0,jsononly:1}));return fetch(i,{credentials:"same-origin"}).then(p.parse_online_json).then(function(e){t.select("refreshed").set(!0),t.select("feeds","feeds").set(e.data.feeds.feeds),t.select("feeds","new_feeds_cnt").set(e.data.feeds.new_feeds_cnt),t.select("feeds","banner").set(e.data.feeds.banner),t.select("feeds","remain").set(e.data.feeds.remain),setTimeout(function(){return t.select("loading").set(null)},1800)}).catch(function(e){t.select("loading").set(null),(0,p.toast_error_handler)(e)})},i=n,o(r,i)}return i(t,e),f(t,[{key:"componentDidMount",value:function(){(0,g.bindBroadcast)("HLBannerUpdated",this.updateBanner),T.default.init({mainElement:"#great-article-card-ul",onRefresh:this.loadNew}),window.scroll_to_top=this.scrollToTop}},{key:"componentWillUnmount",value:function(){this.scrollTimer&&clearTimeout(this.scrollTimer),window.scroll_to_top=null,(0,g.unbindBroadcast)("HLBannerUpdated")}},{key:"getBadgeText",value:function(){var e=this.props.mycard,t=this.props.feeds.new_feeds_cnt,n="";if(-1==t)n="刷的太频繁了，看一会儿再刷吧";else{var r=N.default.find(j.cst.pfmj,function(t){return t.id==e.profession}),a=r.name;if(0==r.id)a="互联网";else if(7==r.id)a="政府/法律";else if(4==r.id){var o=N.default.find(r.majors,function(t){return t.id==e.major});a=1==e.major?o.name.substring(4):o.name.substring(2)}n=t>0?"更新了"+(t>20?"20+":t)+"篇"+a+"头条":"暂时没有"+a+"头条更新"}return n}},{key:"render",value:function(){var e=this,t=this.props.feeds,n=t.feeds,r=t.new_feeds_cnt,a=t.remain,o=this.context.req;return u.default.createElement("div",null,u.default.createElement(h.default,{title:"行业头条"}),!this.props.loading&&(this.props.refreshed||"feed_feed2"==o.query.from&&r>0)&&u.default.createElement("span",{className:"article-badge"},this.getBadgeText()),u.default.createElement(O,{hasMore:!0,loadMore:this.loadMore,loader:u.default.createElement(w.default,{ref:"loader",reload:this.loadMore,hidden:!a,cursor:this.props.cursor.select("loading_status")})},u.default.createElement("ul",{key:"content-2",id:"great-article-card-ul",className:"list-group",style:{marginBottom:"0px"}},u.default.createElement(k,{banner:this.props.feeds.banner}),n.map(function(t,r){if(115!=t.fid)return u.default.createElement(b.default,{key:t.fid,feed:t,hlfid:o.query.fid,cursor:e.props.cursor.select("feeds","feeds",r),onPopupDismiss:e.onFeedback});if(0!=r&&r!=n.length-1){var a="上次看到这里";if(t.feed.last_time>0){var i=Math.floor((Date.now()/1e3-t.feed.last_time)/3600);i<=0?a="刚刚看到这里":i>=1&&i<=15&&(a=i+"小时前看到这里")}return u.default.createElement("div",{className:"font-13 text-center p-y-10 text-gray-7d gray-bg-f2",style:{marginTop:"-1px"},key:115,onClick:e.goTopAndRefresh},u.default.createElement("span",{style:{letterSpacing:"2px",marginRight:"3px"}},a),u.default.createElement("span",{className:"refresh_icon_right d-i-b p-relative",style:{top:"2px"}}))}}))))}}]),t}(u.default.Component),l.contextTypes={req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,auth_info:u.default.PropTypes.object},s)}});