webpackJsonp([3,127],{1075:function(e,t,n){"use strict";e.exports=function(e,t){return 0==e.indexOf("2")?t&&1==e.indexOf(t)?"+"+t+"-"+e.slice(t.length+1):e.slice(1):0==e.indexOf("3")?"+86-"+e.slice(1):e}},1078:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(75),i=r(a),s=n(114),c=r(s),l=n(15),p=r(l),d=n(76),u=r(d);e.exports.collect=function(e,t,n,r){var a="/sdk/collection/add?"+p.default.stringify(o({target:t,type:n},e)),s=fetch(a,{credentials:"same-origin"}).then(i.default.parse_online_json).then(function(e){(0,u.default)("收藏成功"),r&&r(e)}).catch(i.default.toast_error_handler);(0,c.default)("收藏中...",s)},e.exports.uncollect=function(e,t,n,r){var a="/sdk/collection/remove?"+p.default.stringify(o({target:t,type:n},e)),s=fetch(a,{credentials:"same-origin"}).then(i.default.parse_online_json).then(function(e){(0,u.default)("移出成功"),r&&r(e)}).catch(i.default.toast_error_handler);(0,c.default)("移出收藏中...",s)}},1079:function(e,t,n){"use strict";var r=n(46),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(164);e.exports={openJoblist:function(e){MaiMai_Native.native_open_joblist&&MaiMai_Native.native_open_joblist(e.name+"的职位","job/v3/submitted?u2="+e.id,e.dist)},openArticlelist:function(e){(0,o.default)("/article/list?uid="+e.id,e.name+"的专栏","fetch")},openRealNameFeedlist:function(e,t){var n="feed/v3/user?only_realname_status=1&u2="+t.id;(0,a.openFeedList)(e.online_url,t.name+"的原创动态",n)},openInteractFeedList:function(e,t){var n="feed/v3/gets?fids=1000000002,"+t.id;(0,a.openFeedList)(e.online_url,t.name+"的互动",n)},openTopicFeedList:function(e,t){var n="feed/v3/user?only_topic=1&only_realname_status=1&u2="+t.id;(0,a.openFeedList)(e.online_url,t.name+"的观点",n)},openSendedComments:function(e){var t=0==e.dist?"我":e.name;(0,o.default)("/contact/sended_comment?u2="+e.id,t+"发布的点评","fetch")}}},1081:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),u=r(d),f=n(989),h=r(f),m=n(981),_=(r(m),n(50)),g=r(_),v=n(113),y=n(46),b=r(y),k=n(271),x=r(k),w=n(278),E=r(w),C=(n(164),n(281));r(C);t.default=e.exports=(l=c=function(e){function t(){var e,n,r,s;a(this,t);for(var c=arguments.length,l=Array(c),p=0;p<c;p++)l[p]=arguments[p];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.zhimaBinding=function(){1==r.props.uinfo.status?(0,g.default)("/zhima_bind","芝麻信用授权"):alert("绑定芝麻信用前，需要先完善个人资料。")},r.zhimaDetail=function(){var e=r.props.open_data?r.props.open_data[25200151]:{status:0,score:0};(0,g.default)("/zhima_score?u2="+e.ouid2,r.props.card.name+"的芝麻信用")},r.zhimaScoreUpdate=function(e){var t=r.props.cursor;e[25200151]&&t.select("open_data","25200151").set(e[25200151])},r.tianchengBinding=function(){1==r.props.uinfo.status?(0,g.default)("/tiancheng_auth","甜橙信用授权"):alert("绑定甜橙信用前，需要先完善个人资料。")},r.tianchengDetail=function(){var e=r.props.open_data?r.props.open_data[25200927]:{status:0,score:0};(0,g.default)("/tiancheng_score?u2="+e.ouid2,r.props.card.name+"的甜橙信用")},r.tianchengScoreUpdate=function(e){var t=r.props.cursor;e[25200927]&&t.select("open_data","25200927").set(e[25200927])},r.editOtherInfo=function(){var e=r.props,t=(e.cursor,o(e,["cursor"]));(0,b.default)("/contact/edit_all?otherInfo=true","编辑其他信息",t)},s=n,i(r,s)}return s(t,e),p(t,[{key:"componentDidMount",value:function(){0==this.props.card.dist&&((0,v.bindBroadcast)("zhima_score_update",this.zhimaScoreUpdate),(0,v.bindBroadcast)("tiancheng_score_update",this.tianchengScoreUpdate))}},{key:"componentWillUnmount",value:function(){0==this.props.card.dist&&((0,v.unbindBroadcast)("zhima_score_update",this.zhimaScoreUpdate),(0,v.unbindBroadcast)("tiancheng_score_update",this.tianchengScoreUpdate))}},{key:"renderForms",value:function(){var e=[];this.props.open_data&&this.props.open_data[25200151],this.props.open_data&&this.props.open_data[25200927];if(0==this.props.card.dist||this.props.canViewAllInfo){if(this.props.uinfo.ht_city||this.props.uinfo.ht_province){var t=(this.props.uinfo.ht_province||"")+(this.props.uinfo.ht_city||"");e.push(u.default.createElement(h.default,{key:"home",noArrow:!0,title:"家乡",content:t}))}else 0==this.props.card.dist&&e.push(u.default.createElement(h.default,{key:"home",noArrow:!0,title:"家乡",content:"待完善"}));if(this.props.uinfo.birthday&&this.props.card.dist<2)if(0==this.props.card.dist){var n=(0,E.default)(this.props.uinfo.birthday),r=n.format("MM-DD");e.push(u.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:r}))}else e.push(u.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:this.props.uinfo.birthday}));this.props.uinfo.birthday||0!=this.props.card.dist||e.push(u.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:"待完善"})),this.props.uinfo.xingzuo&&this.props.card.dist>1&&e.push(u.default.createElement(h.default,{key:"xingzuo",noArrow:!0,title:"星座",content:this.props.uinfo.xingzuo}))}return e}},{key:"editMode",value:function(){return 0==this.props.card.dist&&!this.props.readonly}},{key:"render",value:function(){var e=this.renderForms();return 0==e.length?u.default.createElement("div",null):u.default.createElement(x.default,{title:"更多资料",onClick:this.editMode()?this.editOtherInfo:null,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info",btn:this.editMode()?"编辑":null},e)}}],[{key:"hasSameOtherInfo",value:function(e,t){var t=t?t[25200151]:{status:0,score:0};return 1==t.status||e.ht_city||e.ht_province||e.birthday||e.xingzuo}}]),t}(u.default.Component),c.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object},l)},1082:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(47),f=(r(u),n(115),n(15)),h=r(f),m=n(47),_=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.gotoRegister=function(){var e;e=r.props.cshow_url?r.props.cshow_url+"&":"http://maimai.cn/show2?";var t=e+h.default.stringify({regfr:"fcard",abtag:"b"});r.props.reg_url&&(t=r.props.reg_url),window.location=t},i=n,a(r,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.reportItemHeight()}},{key:"reportItemHeight",value:function(){if(this.props.updateItemHeight){var e=m.findDOMNode(this.refs.personInfoBottom);this.props.updateItemHeight(e.clientHeight)}}},{key:"render",value:function(){return"didi_client"==this.context.req.query.regfr?d.default.createElement("div",{ref:"personInfoBottom"}):d.default.createElement("div",{ref:"personInfoBottom",className:"livevideoBottomWrap",onClick:this.gotoRegister},d.default.createElement("div",{className:"p-relative articleBottomBox"},d.default.createElement("div",{className:"articleBottomBg"}),d.default.createElement("div",{className:"articleBottom p-absolute text-white"},d.default.createElement("div",{className:"media-left p-r-10"},d.default.createElement("div",{className:"articleBottomAvatar"},d.default.createElement("img",{className:"w-100 radius-45",src:this.props.avatar}))),d.default.createElement("div",{className:"media-body media-middle font-14"},"我还有遍布12750公司",d.default.createElement("br",null),"的人脉想跟你共享"),d.default.createElement("div",{className:"media-right media-middle p-r"},d.default.createElement("div",{className:"download_btn_white small"},"立即下载")))),d.default.createElement("div",{className:"text-center small clearfix"},d.default.createElement("img",{className:"w-100",src:"../../static/images/detail_bottom.png"})))}}]),t}(d.default.Component),s.contextTypes={req:d.default.PropTypes.object},c);t.default=e.exports=_},1113:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(166),f=(r(u),n(1001)),h=(r(f),n(117)),m=(r(h),n(171)),_=r(m),g=n(279),v=r(g),y=n(46),b=r(y),k=n(164),x=(n(113),n(116)),w=r(x),E=n(15),C=r(E),P=n(50),N=(r(P),n(1075)),M=r(N),O=n(274),j=r(O),T=n(41),S={cardInfor:{padding:"13px 0 0",position:"relative"},head:{background:"#fff",margin:"0 11px 15px",border:"1px solid #e2e2e2",WebkitBoxShadow:"2px 2px 0px #eeeeee",position:"relative",overflow:"auto"},headPC:{background:"#fff",margin:"0 11px 15px",overflow:"auto"},headinfor:{margin:"0 12px",padding:"10px 0 5px 0",color:"#333",position:"relative"},headinfor_connectWay:{margin:"0 12px",color:"#333",position:"relative",padding:"0 0 15px"},dt:{width:"50px",height:"50px",float:"left",marginTop:"2px",marginBottom:"2px"},dd:{lineHeight:"14px",fontSize:"12px",margin:"3px 0 4px 63px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},tit:{fontSize:"16px",color:"#333",margin:"4px 0 8px 0px"},authWarning:{background:"url(/static/images/auth/authWarning.png) no-repeat left center",color:"#fa5218",textDecoration:"underline",WebkitBackgroundSize:"14px 14px",paddingLeft:"20px"},identify:{background:"url(/static/images/auth/identifyImg.png) no-repeat left center",WebkitBackgroundSize:"22px 15px",paddingLeft:"22px",height:"15px",marginLeft:"5px"},notIdentify:{background:"url(/static/images/auth/notIdentifyImg.png) no-repeat left center",WebkitBackgroundSize:"22px 15px",paddingLeft:"22px",height:"15px",marginLeft:"5px"},memberIcon:{background:"url(https://maimai.cn/images/icon_member_normal.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon1:{background:"url(/static/images/icon_member_normal1.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon2:{background:"url(/static/images/icon_member_normal2.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon3:{background:"url(/static/images/icon_member_normal3.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},connectWay:{padding:"0 0 15px",overflow:"auto"},connectWay_dt:{float:"none",marginTop:"0px"},connectWay_dd:{overflow:"auto",margin:"4px 0 0 0",color:"#808080",lineHeight:"16px",wordWrap:"break-word",wordBreak:"break-all",fontSize:"12px"},connectWay_label:{display:"block",float:"left",marginRight:"6px"},connectWay_em:{marginRight:"13px"},connectWay_dd_span:{maxWidth:"59%",display:"block",float:"left",wordBreak:"break-all"},companyLogo:{position:"absolute",right:"0",bottom:"12px"},rightTopEditIcon:{height:"25px",position:"absolute",paddingLeft:"20px",top:"10px",right:"20px",zIndex:10}};t.default=e.exports=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.openRankDetail=function(){if(!r.props.edit_mode&&!r.props.outApp){var e=r.props.card.encode_mmid?r.props.card.encode_mmid:r.props.card.mmid;(0,b.default)("/contact/rank_detail?u2="+e,r.props.card.name+"的行业影响力","fetch")}},r.openRankOrder=function(){if(!r.props.edit_mode&&!r.props.outApp&&r.props.uinfo.rank_order){var e,t=r.props.uinfo.rank_order,n=t.profession,o=t.major,a="/contact/rank_top_list?"+C.default.stringify({profession:n,major:o});e=o>=0?(0,v.default)(n,o,"|"):(0,v.default)(n,0).profession,(0,b.default)(a,"排行榜-"+e,"fetch")}},r.goCompanyDetail=function(e){e.stopPropagation(),window.location.href.indexOf("regfr=didi_client")>-1||(0,b.default)(r.props.company.company_url,r.props.company.stdname?r.props.company.stdname:"","fetch")},r.goAvatarImage=function(e){if(0==r.props.card.dist)try{window.MaiMai_Native.native_edit_avatar(r.props.card.avatar_large)}catch(e){window.MaiMai_Native.native_edit_avatar()}else window.MaiMai_Native.native_show_avatar(r.props.card.avatar_large);e.stopPropagation()},r.showAddress=function(e){(0,k.showAddress)(r.props.uinfo.companycity,r.props.uinfo.companyaddress),e.stopPropagation()},r.editContactCard=function(e){!r.props.outApp&&r.props.edit_mode&&(e.stopPropagation(),(0,k.editContactCard)())},i=n,a(r,i)}return i(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return T.shouldComponentUpdate.apply(this,[e,t])}},{key:"renderProfessionLine",value:function(){var e=w.default.getLine4(this.props.card,this.props.uinfo);if(1==this.props.card.in_app&&1!=this.props.card.pub){var t;this.props.uinfo.rank_order&&this.props.uinfo.rank_order.order>0&&(t="（排名"+this.props.uinfo.rank_order.order+"）");var n=255!=this.props.uinfo.profession&&255!=this.props.uinfo.major?(0,v.default)(this.props.uinfo.profession,this.props.uinfo.major,"｜"):"";return 0==this.props.card.dist?d.default.createElement("dd",{className:"font-12 o-hidden m-t-2 text-muted"},n,n&&d.default.createElement("span",null," "),d.default.createElement("span",{onClick:this.openRankDetail},"影响力 ",d.default.createElement("span",{className:"text-blue-5175a2 cursor-pointer"},this.props.card.rank)),t&&d.default.createElement("span",{className:"text-orange-hl cursor",onClick:this.openRankOrder},t)):d.default.createElement("dd",{className:"font-12 o-hidden m-t-2 text-muted"},(0,v.default)(this.props.uinfo.profession,this.props.uinfo.major,"｜")," 影响力 ",d.default.createElement("span",{className:"text-blue-5175a2"},this.props.card.rank),t&&d.default.createElement("span",{className:"text-orange-hl cursor",onClick:this.openRankOrder},t))}return d.default.createElement("dd",{className:"font-12 o-hidden m-t-2 text-muted"},e)}},{key:"renderCareerLine",value:function(){var e=this.props.memlist,t="";e&&e.mem_info.mem_st&&1==e.mem_info.mem_st&&(t=!e.my_card||1!=e.my_card.mem_id&&2!=e.my_card.mem_id?!e.my_card||3!=e.my_card.mem_id&&5!=e.my_card.mem_id&&6!=e.my_card.mem_id?e.my_card&&4==e.my_card.mem_id?d.default.createElement("span",{className:"cursor-pointer",style:S.memberIcon3,onClick:this.props.openMyMember}):d.default.createElement("span",{className:"cursor-pointer",style:S.memberIcon,onClick:this.props.openMyMember}):d.default.createElement("span",{className:"cursor-pointer",style:S.memberIcon2,onClick:this.props.openMyMember}):d.default.createElement("span",{className:"cursor-pointer",style:S.memberIcon1,onClick:this.props.openMyMember}));var n;this.props.outApp||(1==this.props.card.judge?n=this.props.judge_info&&3==this.props.judge_info.judge?d.default.createElement("span",{className:"cursor-pointer detail_auth_warning m-l-5",onClick:this.props.goJudge},"新材料审核中"):d.default.createElement("span",{className:"cursor-pointer",style:S.identify,onClick:this.props.authDescription}):0==this.props.card.dist?this.props.edit_mode||1!=this.props.uinfo.status||(n=this.props.judge_info&&2==this.props.judge_info.judge?d.default.createElement("span",{className:"cursor-pointer detail_auth_warning m-l-5",onClick:this.props.goJudge},"认证中"):d.default.createElement("span",{className:"cursor-pointer detail_auth_warning m-l-5",onClick:this.props.goJudge},"未认证")):this.props.mystatus.bg&&(n=d.default.createElement("span",{className:"cursor-pointer",style:S.notIdentify,onClick:this.props.showProfileHistory})));var r=w.default.getCareerOrSchoolInfo(this.props.card,this.props.uinfo),o=this.props.edit_mode&&(!this.props.card.company||!this.props.card.position);return o&&(r=4==this.props.uinfo.profession?"添加学校信息":"添加职位信息"),0==this.props.uinfo.contact_ok&&(r="尚未加入脉脉"),d.default.createElement("dd",{className:"font-12 o-hidden text-muted"},d.default.createElement("span",{key:1,className:o&&"warning-color cursor-pointer"||null},r),1==this.props.card.judge&&d.default.createElement("span",{className:"add_v_img"}),t,n)}},{key:"renderNameLine",value:function(){return d.default.createElement("dd",{key:"name-line",className:"contact_detail_name text-black-3",onClick:this.props.addMark},d.default.createElement("span",{key:"name"},this.props.card.name,this.props.card.edit_mark_icon&&!this.props.outApp&&d.default.createElement("span",{key:"mark",className:"font-12"},d.default.createElement("span",{className:"glyphicon glyphicon-pencil"}))))}},{key:"renderOtherInfo",value:function(){var e=this,t=[];if(this.props.uinfo.account&&t.push(d.default.createElement("dd",{key:"account"},d.default.createElement("span",{className:"icon_mai_number_gray"},this.props.uinfo.account))),this.props.uinfo.mobile){var n=(0,M.default)(this.props.uinfo.mobile,this.props.uinfo.ccode);t.push(d.default.createElement("dd",{key:"phone",onClick:function(e){(0,k.callPhone)(n),e.stopPropagation()}},d.default.createElement("span",{className:"icon_phone_gray text-blue-5175a2"},n)))}else this.props.uinfo.inc_lv_to_see_mobile&&!this.props.outApp?this.props.recievedExchangePhone?t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{onClick:this.props.confirmExchangePhone,className:"cursor-pointer icon_phone_gray text-blue-5175a2"},"同意交换手机号"))):this.props.requestedExchangePhone?t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{className:"icon_phone_gray"},"已申请交换手机号"))):t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{onClick:this.props.exchangePhone,className:"cursor-pointer icon_phone_gray text-blue-5175a2"},"申请交换手机号"))):t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{className:"icon_phone_gray"},this.props.uinfo.nomobile)));if(this.props.uinfo.email&&t.push(d.default.createElement("dd",{key:"email",onClick:function(t){(0,k.saveEmail)(e.props.uinfo.email),t.stopPropagation()}},d.default.createElement("span",{className:"icon_email_gray"},this.props.uinfo.email))),this.props.uinfo.companyaddress&&4!=this.props.uinfo.profession)t.push(d.default.createElement("dd",{key:"addr"},d.default.createElement("span",{onClick:this.showAddress,className:"icon_address_gray"},this.props.uinfo.companyaddress&&this.props.uinfo.companyaddress.length>0?this.props.uinfo.companyaddress:"")));else{var r=(this.props.uinfo.province||"")+(this.props.uinfo.city||""),o=!1;0==r.length&&(r="未填写",o=this.props.edit_mode),t.push(d.default.createElement("dd",{key:"addr2"},d.default.createElement("span",{className:"icon_address_gray "+(o?"warning-color":"")},r)))}return t}},{key:"renderAvatar",value:function(){var e=this.props.card.avatar;return 0==this.props.card.dist&&this.props.edit_mode&&!this.props.uinfo.figure&&(e="/static/images/icon_default_avatar.png"),d.default.createElement("img",{id:"contact_avatar",className:"avatar-70 radius-50",onClick:this.goAvatarImage,src:e})}},{key:"componentDidMount",value:function(){j.default.isSupportTansShowTitleMenuBar(this.context)&&j.default.setMenuBarStyle({banner_trans:!0})}},{key:"render",value:function(){var e=this.props.card,t=j.default.isSupportTansShowTitleMenuBar(this.context)?"iphoneX"==this.context.env.device?"p-t-95":"p-t-79":"p-t";return d.default.createElement("div",null,d.default.createElement("div",{className:"p-relative p-x "+t},d.default.createElement("div",{className:"contact_detail_normal_bg",style:{backgroundImage:this.props.headerBg?"url("+this.props.headerBg+")":"",backgroundSize:this.props.headerBg?"cover":""}}),d.default.createElement("div",{className:"contact_detail_normal_card"},d.default.createElement("div",{onClick:this.editContactCard},!this.props.outApp&&0==!this.props.card.dist&&d.default.createElement(_.default,{classname:"dist_radius bg_color_f",dist:e.dist}),0==this.props.card.dist&&!this.props.outApp&&this.props.edit_mode&&d.default.createElement("div",{onClick:function(e){(0,k.editContactCard)(),e.stopPropagation()},style:S.rightTopEditIcon,className:"text-primary"}," 编辑"),d.default.createElement("dl",{key:"dl1",className:"contact_detail_info clearfix text-muted"},d.default.createElement("dt",{className:"radius-50 fl m-t-2 p-relative"},this.renderAvatar()),this.renderNameLine(),this.renderCareerLine(),this.renderProfessionLine()),d.default.createElement("dl",{key:"dl2",className:"contact_detail_connect_info text-muted"},this.props.card.company&&this.props.company&&d.default.createElement("dt",{className:"contact_detail_company_logo"},d.default.createElement("img",{onClick:this.goCompanyDetail,className:"avatar-52 border-radius-8",src:this.props.company.clogo})),this.renderOtherInfo())))))}}]),t}(d.default.Component),s.contextTypes={auth_info:d.default.PropTypes.object,env:d.default.PropTypes.object,req:d.default.PropTypes.object},c)},1115:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(17),f=(r(u),n(46)),h=r(f),m=n(50),_=r(m),g=n(169),v=r(g),y=n(1079);t.default=e.exports=(c=s=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openFeedDetail=function(){n.setState({left:!n.state.left})},n.zhimaDetail=function(){var e=n.props.open_data?n.props.open_data[25200151]:{status:0,score:0};(0,_.default)("/zhima_score?u2="+e.ouid2,n.props.card.name+"的芝麻信用")},n.tianchengDetail=function(){var e=n.props.open_data?n.props.open_data[25200927]:{status:0,score:0};(0,_.default)("/tiancheng_score?u2="+e.ouid2,n.props.card.name+"的甜橙信用")},n.opendataDetail=function(){n.props.fromeDetail2||(0,h.default)("/contact/opendata_detail?u2="+n.props.card.id,"个人信用","fetch")},n.state={},n}return i(t,e),l(t,[{key:"formatCount",value:function(e){if(e)var t=""+e;return t}},{key:"renderItem",value:function(e,t,n,r,o,a,i){return d.default.createElement("div",{className:"item l-h-1",key:e,onClick:n>0||i?r:null},d.default.createElement("span",{className:o||"",style:{backgroundImage:a?"url("+a+")":""}}),d.default.createElement("div",{className:"small text-black-6 m-t"},t,n>99?"99+":n))}},{key:"renderItems",value:function(){var e=[],t=[],n=this.props.feed_infos,r=this.context.fconf,o=this.props.card,a=this.renderItem("my-feed","动态",n.realname_status,function(){return(0,y.openRealNameFeedlist)(r,o)},"dongtai_normal_icon",this.props.skin_info&&this.props.skin_info.dynamic_state_icon);n.realname_status>0?e.push(a):t.push(a);var i=this.renderItem("my-opinion","观点",n.topic,function(){return(0,y.openTopicFeedList)(r,o)},"guandian_normal_icon",this.props.skin_info&&this.props.skin_info.viewpoint_icon);n.topic>0?e.push(i):t.push(i);var s=this.renderItem("my-article","专栏",n.article,function(){return(0,y.openArticlelist)(o)},"zhuanlan_normal_icon",this.props.skin_info&&this.props.skin_info.special_column_icon);n.article>0?e.push(s):t.push(s);var c=this.renderItem("my-job","职位",n.job,function(){return(0,y.openJoblist)(o)},"zhiwei_normal_icon",this.props.skin_info&&this.props.skin_info.position_icon);n.job?e.push(c):t.push(c);var l=this.renderItem("my-comment","点评",n.evaluation,function(){return(0,y.openSendedComments)(o)},"dianping_normal_icon",this.props.skin_info&&this.props.skin_info.remark_icon);n.evaluation>0?e.push(l):t.push(l);var p=this.renderItem("my-interact","互动",n.interactive,function(){return(0,y.openInteractFeedList)(r,o)},"hudong_normal_icon",this.props.skin_info&&this.props.skin_info.interaction_icon);n.interactive>0?e.push(p):t.push(p),e=e.concat(t),e.splice(3,0,this.renderItem("my-open-data-lst","信用","",this.opendataDetail,"xinyong_normal_icon",this.props.skin_info?this.props.skin_info.credit_icon:"",!0));var u=0;return this.state.left&&(u=this.context.env.from_pc?726*-.6:-.6*(0,v.default)().width),d.default.createElement("div",{className:"p-y-20 p-relative"},d.default.createElement("div",{className:"item-container",style:{left:u+"px"}},e),!this.state.left&&d.default.createElement("div",{className:"p-t-20 l-h-1 dot font-12"},d.default.createElement("span",{key:"dot1",className:"more_normal_icon",onClick:this.openFeedDetail,style:{backgroundImage:this.props.skin_info&&this.props.skin_info.more_icon?"url("+this.props.skin_info.more_icon+")":""}}),d.default.createElement("div",{className:"m-t"},"更多")),this.state.left&&d.default.createElement("div",{className:"p-t-20 l-h-1 dot font-12"},d.default.createElement("span",{key:"dot2",className:"circle_normal_icon",onClick:this.openFeedDetail,style:{backgroundImage:this.props.skin_info&&this.props.skin_info.circle_arrow_icon?"url("+this.props.skin_info.circle_arrow_icon+")":""}}),d.default.createElement("div",{className:"m-t"},"更多")))}},{key:"render",value:function(){return d.default.createElement("div",{className:"feed_detail_panel"},this.renderItems())}}]),t}(d.default.Component),s.contextTypes={fconf:d.default.PropTypes.object,env:d.default.PropTypes.object},c)},1117:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=e.exports=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),p=0;p<s;p++)l[p]=arguments[p];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.renderTagLike=function(){var e=a.props,t=e.tag,n=e.canLike,r=e.onLikeClicked,o=t.contacts.slice(0,n?1:3),i=1==t.my_cmt?"tag_go_more_icon":1==t.my_like?"tag_go_comment_icon":"like_tag_icon",s=function(e){e.stopPropagation(),r()};return c.default.createElement("div",{className:"media-right p-l-0 media-middle"},c.default.createElement("div",{className:"domain_skill_tag_like_wrap"},c.default.createElement("div",{className:"d-i-b text-info font-12 media-middle m-r-10"},t.like_cnt?t.like_cnt+"人认可":""),c.default.createElement("div",{className:"domain_skill_tag_like_avatar_wrap"},c.default.createElement("div",{className:"d-i-b media-middle p-r-5"},o.map(function(e){return c.default.createElement("div",{className:"domain_skill_tag_avatar"},c.default.createElement("img",{className:"avatar-25 radius-50",key:e.avatar,src:e.avatar}))})),n&&c.default.createElement("div",{className:"m-l "+i,onClick:s}))))},a.renderBestCmt=function(){var e=a.props.tag;if(e.best_cmt)return c.default.createElement("div",{className:"text-info m-t-5"},c.default.createElement("span",{className:a.props.inDetail?"lineClamp2":""},"“"+e.best_cmt.text+"”"))},i=n,o(a,i)}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.tag,n=e.onDetailClicked,r=e.title,o=e.hideCmt;return c.default.createElement("div",{className:this.props.tag_wrap_class?this.props.tag_wrap_class:"p-x p-y-20 border-bottom-e0",onClick:n},r&&c.default.createElement("div",{className:"font-13 text-info m-b-5"},r),c.default.createElement("div",null,c.default.createElement("div",{className:"media-body media-middle font-15"},t.tag),this.renderTagLike()),!o&&this.renderBestCmt())}}]),t}(c.default.Component)},1228:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),p=n(166),d=r(p),u=n(117),f=(r(u),n(17)),h=r(f),m=n(15),_=r(m),g=n(76),v=r(g),y=n(75),b=r(y),k=n(164),x=n(281),w=r(x),E=n(114),C=r(E),P=n(271),N=r(P),M=n(986),O=r(M),j=n(47),T=n(115).launch_webview,S={container:{position:"relative",padding:"5px 12px 0 12px",marginBottom:"10px"},styleInDetail:{maxHeight:"125px",overflow:"hidden"},tagItem:{fontSize:"14px",margin:"6px 3px 0 3px",background:"#008be6",float:"left",color:"white"},tagItemOrange:{background:"#ffa200"},tagItemOrangeNum:{background:"#ffbe4d"},tagItemGray:{background:"#7e8da2"},tagItemGrayNum:{background:"#a6afbe"},tagTxt:{float:"left",height:32,lineHeight:"20px",padding:"6px 8px",fontWeight:"normal",color:"#ffffff"},tagNum:{float:"right",height:32,lineHeight:"20px",padding:"6px 8px",color:"white",fontStyle:"normal",background:"#4daeee"},tagMore:{display:"inline-block",position:"absolute",right:"9px",bottom:"0",width:30,fontSize:"14px",color:"#4395ba",textAlign:"center"},tagMoreImg:{width:20,height:5},tagMoreTxt:{display:"none"},grayBtn:{height:32,lineHeight:"20px",padding:"6px 14px",fontWeight:"normal",background:"#ececec",color:"#555555"}},A=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.toggleTagWithoutRequest=function(e){var t,n=h.default.contains(r.props.uinfo.praised,e);if(n){var o=h.default.indexOf(r.props.uinfo.praised,e);r.props.cursor.select("uinfo","praised").splice([o,1]),t=parseInt(r.props.uinfo.tag_weights[e].weight)-1}else r.props.cursor.select("uinfo","praised").concat([e]),t=r.props.uinfo.tag_weights[e]?parseInt(r.props.uinfo.tag_weights[e].weight)+1:1;r.props.cursor.select("uinfo","tag_weights",e).set({tag:e,weight:t})},r.toggleTag=function(e){if(!(r.context.auth_info.u>0))return void T();r.toggleTagWithoutRequest(e);var t=h.default.contains(r.props.uinfo.praised,e),n=h.default.extend({u2:r.props.card.id,tag:e,cancel:t},r.context.auth_info),o=r.context.fconf,a=o.online_url+"feed/v3/praise_tag?"+_.default.stringify(n);fetch(a).then(b.default.parse_online_json).catch(function(t){(0,v.default)(t.error_msg?t.error_msg:"请求失败"),r.toggleTagWithoutRequest(e)})},r.addTagForFriend=function(){var e=(0,w.default)(r.props.card,r.context.auth_info.u);(0,k.showTagInputDialog)("给"+e+"贴标签","匿名给"+e+"贴标签",!0,function(e,t){if(e=e.trim(),h.default.filter(r.props.uinfo.weibo_tags,function(t){return e.toLocaleUpperCase()==t.toLocaleUpperCase()}).length>0)return void(0,v.default)("不能添加重复标签");if(1==t&&(1!=r.props.card.dist||3!=r.props.card.lv))return void(0,v.default)("不能给非LV3好友添加匿名标签");var n=h.default.extend({u2:r.props.card.id,tag:e,anon:t},r.context.auth_info),o=r.context.fconf,a=o.online_url+"user/v3/tag_user?"+_.default.stringify(n),i=fetch(a).then(b.default.parse_online_json).then(function(t){r.props.uinfo.weibo_tags?r.props.cursor.select("uinfo","weibo_tags").concat([e]):r.props.cursor.select("uinfo","weibo_tags").set([e])}).catch(b.default.toast_error_handler);(0,C.default)("请求中...",i)})},r.editMyTag=function(){window.MaiMai_Native.native_edit_myself_tag&&MaiMai_Native.native_edit_myself_tag(null)},r.updateFooterVisible=function(){if(r.props.inDetail){var e=r.props.uinfo.showTagFooter||!1;j.findDOMNode(r.refs.tagsContent).offsetHeight<125?e&&r.props.cursor.select("uinfo","showTagFooter").set(!1):e||r.props.cursor.select("uinfo","showTagFooter").set(!0)}},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.uinfo.weibo_tags||[],n=this.props.uinfo.tag_weights||{},r=this.props.uinfo.praised||[],o=0==this.props.card.dist,a=(0,w.default)(this.props.card,this.context.auth_info.u),i=o&&!this.props.outApp&&this.props.editMode&&this.editMyTag,s=o&&!this.props.outApp&&this.props.editMode&&"编辑",c=1==this.props.card.dist&&!o&&!this.props.outApp,p=!o&&this.props.card.dist<3,d=h.default.filter(t,function(e){return e&&e.length>0}),u=this.props.inDetail&&(this.props.uinfo.showTagFooter||!1);return l.default.createElement(N.default,{title:"好友印象",btn:s,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info",onClick:i},l.default.createElement("div",{ref:"container",style:[S.container,this.props.inDetail&&S.styleInDetail]},l.default.createElement("div",{ref:"tagsContent",className:"clearfix"},c&&l.default.createElement("span",{onClick:this.addTagForFriend,style:[S.tagItem,S.grayBtn]},"+ 给"+a+"贴标签"),d.map(function(t){var o,a,i=parseInt(n[t]&&n[t].weight),s=h.default.contains(r,t);return s?(a=S.tagItemGray,o=S.tagItemGrayNum):i>9&&(a=S.tagItemOrange,o=S.tagItemOrangeNum),l.default.createElement("span",{style:[S.tagItem,a],key:t,onClick:function(){p&&e.toggleTag(t)}},l.default.createElement("b",{style:S.tagTxt},t),i>0&&l.default.createElement("em",{style:[S.tagNum,o]},i))}))),!this.props.outApp&&u&&l.default.createElement(O.default,{ref:"sectionFooter",defined_children:!0},l.default.createElement("div",{className:"detail_more_btn m-y-20",onClick:this.props.onClick},"全部",this.props.uinfo.weibo_tags.length,"个标签")))}},{key:"componentDidMount",value:function(){this.updateFooterVisible()}},{key:"componentDidUpdate",value:function(){this.updateFooterVisible()}}]),t}(l.default.Component);A.contextTypes={auth_info:l.default.PropTypes.object,fconf:l.default.PropTypes.object},e.exports=(0,d.default)(A)},1229:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=n(17),u=n(15),f=(n(985)("app"),n(273),n(991)),h=n(46),m=n(75),_=n(114),g=(n(1001),n(41));t.default=e.exports=(s=i=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,l=Array(s),p=0;p<s;p++)l[p]=arguments[p];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.openDetail=function(e){if(e.stopPropagation(),!(window.location.href.indexOf("regfr=didi_client")>-1||a.props.disabled)){var t={};t.evaluation=a.props.comment_data,h("/contact/comment_detail/"+a.props.comment_data.id,"点评详情",t)}},a.like=d.debounce(function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var t=a.context,n=t.auth_info,r=t.fconf,o=r.online_url+"evaluation/like?"+u.stringify(c({id:a.props.comment_data.id,like:a.props.comment_data.mylike?"0":"1"},n)),i=fetch(o).then(m.parse_online_json).then(function(e){var t=a.props.comment_data.mylike?0:1,n=a.props.comment_data.likes+(t?1:-1);a.props.cursor.select("mylike").set(t),a.props.cursor.select("likes").set(n)}).catch(m.toast_error_handler);_("请求中",i)},1e3,!0),i=n,o(a,i)}return a(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return g.shouldComponentUpdate.apply(this,[e,t])}},{key:"render",value:function(){var e=this.props.comment_data,t=this.context,n=(t.auth_info,t.req),r="didi_client"==n.query.regfr,o=e.likes||"";return p.createElement("li",{className:"list-group-item p-x",onClick:this.openDetail},p.createElement("div",{className:"media-body"},!this.props.hide_card&&p.createElement(f,{user:e.src_user,article_line:e.re}),p.createElement("div",{style:v.short_text,className:"media-heading m-l-lg text-content"},e.text)),p.createElement("div",{className:"media-right media-middle text-center"},!r&&p.createElement("div",{style:{width:"34px"},onClick:this.like},this.props.cursor&&p.createElement("img",{src:e.mylike?"/static/images/ding2.png":"/static/images/ding1.png",style:v.img}),p.createElement("p",{className:"text-light small"},o))))}}]),t}(p.Component),i.contextTypes={auth_info:p.PropTypes.object,fconf:p.PropTypes.object,req:p.PropTypes.object},s);var v={heading:{marginTop:-10,marginLeft:-20,marginRight:-20},body:{marginTop:5},short_text:{marginTop:5,WebkitLineClamp:"2",height:40,fontSize:14,lineHeight:"20px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical"},img:{width:"14px",height:"14px",marginBottom:"4px"}}},1230:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(117),a=n(1),i=n(46),s=(n(50),n(90)),c=n(41),l=n(1006).tab_manager,p=n(17);e.exports=a.createClass({displayName:"exports",mixins:[c],gotoDetail:p.debounce(function(){var e=this.props;e.cursor;r(e,["cursor"]).tab_manager=l(),i("/article/detail?fid="+this.props.feed.id,"查看全文","fetch")},1e3,!0),render:function(){var e=this.props.feed,t=e.main.rtext||e.main.text,n=e.main.pics,r=e.crtime,i=n&&n.length>0&&n[0],c=i&&i.turl,l="";e.likes.n>0&&e.comments.n>0?l=e.likes.n+" 赞 "+e.comments.n+" 评论":e.likes.n>0?l=e.likes.n+" 赞":e.comments.n>0&&(l=e.comments.n+" 评论");var c=i&&i.turl;return a.createElement("li",{className:"list-group-item",onClick:this.gotoDetail},a.createElement("p",{className:"media list-group-item-heading"},a.createElement("div",{className:"media-body"},a.createElement("div",{style:d.heading,className:"media-heading text-content"},a.createElement(s,{text:t,support_dref:!0}))),c&&a.createElement("div",{className:"media-right"},a.createElement("img",{className:"media-object",style:(0,o.square)(60),src:c}))),a.createElement("p",{className:"list-group-item-text"},a.createElement("span",null," "),a.createElement("span",{className:"pull-left text-light small"},r),a.createElement("span",{className:"pull-right text-light small"},l)))}});var d={heading:{WebkitLineClamp:"3",height:60,fontSize:14,lineHeight:"20px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",wordBreak:"break-word"}}},1231:function(e,t,n){"use strict";var r=n(1),o=n(46),a=n(15),i=n(1002).types,s=r.createClass({displayName:"ContactServiceCard",contextTypes:{auth_info:r.PropTypes.object,req:r.PropTypes.object},toList:function(){var e=this.props;e.card,e.services},toDetail:function(e){var t=this.props,n=(t.card,t.services),r=this.context.req;try{o("/service/detail?"+a.stringify({id:n[e]._id,from:"contact_detail@"+r.query.from}),"服务详情","fetch")}catch(e){alert(e)}},render:function(){for(var e=this.props,t=(e.card,e.services),n=[],o=this,a="",s=0;s<3&&s<t.length;s++)!function(e){a=" 元/";var s=t[e];s.time?a+=""+s.time+i[s.type]:a+=""+i[s.type];var l=s.title;n.push(r.createElement("div",{className:"ascContactBox borderBottom",key:e,onClick:function(){o.toDetail(e)}},r.createElement("div",{className:"ascInfo"},s.paynum>0&&r.createElement("div",{style:{marginTop:"7px",linHeight:"34px"},className:"pull-right text-muted small"},"共",s.paynum,"人购买"),0==s.paynum&&r.createElement("div",{style:{marginTop:"7px",linHeight:"34px"},className:"pull-right text-muted small"},"限时优惠"),s.call>0&&r.createElement("img",{src:"/static/images/icon_newdianhua.png",style:c.dianhua}),r.createElement("div",{className:"line1",style:{marginTop:"4px"}},l))))}(s);return r.createElement("div",null,n)}}),c={dianhua:{padding:"6px",float:"left",width:"34px",height:"34px",marginTop:"-2px",marginLeft:"-5px"}};e.exports=s},1232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(17),f=(r(u),n(46)),h=r(f),m=n(50),_=(r(m),n(169)),g=r(_);t.default=e.exports=(c=s=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),l(t,[{key:"formatCount",value:function(e){if(e)var t=""+e;return t}},{key:"renderItem",value:function(e,t,n,r){return d.default.createElement("div",{className:"fl w-33 p-y-10",key:e,onClick:n>0?r:null},d.default.createElement("div",{className:"text-black-3 font-18"},n),t)}},{key:"renderFollowItems",value:function(){var e=this,t=[],n=this.renderItem("my-feed","好友",this.props.inapp_d1cnt,function(){0==e.props.card.dist&&e.props.inapp_d1cnt>0&&(0,h.default)("/contact/inapp_dist1_list","我的好友","fetch")});t.push(n);var n=this.renderItem("my-article","关注",this.props.follow_cnt,function(){0==e.props.card.dist&&e.props.follow_cnt>0&&(0,h.default)("/contact/my_follows","我的关注","fetch")});t.push(n);var n=this.renderItem("my-job","粉丝",this.props.followed_cnt,function(){0==e.props.card.dist&&e.props.followed_cnt>0&&(0,h.default)("/contact/my_followed","我的粉丝","fetch")});t.push(n);return this.state.left&&-.66*(0,g.default)().width,d.default.createElement("div",{className:"clearfix borderBottom text-gray-bc font-13 text-center l-h-1"},t)}},{key:"render",value:function(){return d.default.createElement("div",{className:0==this.props.card.dist?"borderTop":""},this.renderFollowItems())}}]),t}(d.default.Component),s.contextTypes={fconf:d.default.PropTypes.object},c)},1324:function(t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=r(1),u=o(d),f=r(988),h=o(f),m=r(1228),_=o(m),g=r(1076),v=o(g),y=r(1077),b=o(y),k=r(271),x=o(k),w=r(1055),E=(o(w),r(1229)),C=o(E),P=r(981),N=o(P),M=r(986),O=o(M),j=r(113),T=r(989),S=o(T),A=r(1113),F=o(A),I=r(1230),q=(o(I),r(46)),B=o(q),D=r(50),L=o(D),W=r(164),H=r(75),R=o(H),U=r(17),z=o(U),V=r(15),J=o(V),Z=r(167),Q=r(1025),G=o(Q),X=r(76),K=o(X),Y=r(983),$=o(Y),ee=r(114),te=o(ee),ne=r(276),re=o(ne),oe=r(278),ae=(o(oe),r(272)),ie=o(ae),se=r(77),ce=(o(se),r(995)),le=(o(ce),r(1003)),pe=(o(le),r(1231)),de=o(pe),ue=r(1078),fe=r(1026),he=r(115),me=r(116),_e=o(me),ge=r(1115),ve=o(ge),ye=r(1232),be=o(ye),ke=r(1080),xe=(o(ke),r(286)),we=(o(xe),r(1081)),Ee=o(we),Ce=r(1032),Pe=o(Ce),Ne=r(1027),Me=(o(Ne),r(998)),Oe=r(1082),je=o(Oe),Te=r(686),Se=o(Te),Ae=(r(277),r(78),r(47),r(1019),r(985)("app"),function(t){function n(){var e,t,r,o;i(this,n);for(var c=arguments.length,p=Array(c),d=0;d<c;d++)p[d]=arguments[d];return t=r=s(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(p))),r.reloadData=function(e){if(0==r.props.card.dist){var t=(0,W.formatUserV3ToUInfo)(e);r.props.cursor.select("uinfo").merge(t),r.props.cursor.select("card").merge((0,W.formatUserV3ToCard)(e)),r.props.cursor.select("company").set((0,W.formatUserV3ToCompany)(e)),r.fetchUserTags()}else(0,fe.inAddFriendWorkflow)()||(0,W.refreshPageSilent)()},r.reload_user_info=function(e){r.props.cursor.select("uinfo").merge(e)},r.storeCard=function(){r.context.fconf.using_server_data&&!r.storedCard&&(r.storedCard=!0,r.props.card.line1=_e.default.getCareer(r.props.card),r.props.card.career=r.props.card.line1,(0,W.storeContactCard)(JSON.stringify(r.props.card)))},r.onFriendRequestSent=function(e){e==r.props.card.mmid&&((0,K.default)("加好友申请已发出"),r.props.cursor.select("extro_info").set({frMeWantHe:!0}))},r.edit_contact=function(){if(r.props.srcu_blocked)return void(0,Z.showModalForConfirm)({title:"您的账号已被封禁，请与脉脉小助手联系",ok_text:"确定"});r.props.cursor.select("edit_mode").set(!r.props.edit_mode)},r.fetchUserLabels=function(){var e=r.context,t=(e.fconf,e.auth_info),n="/sdk/contact/label_info?"+J.default.stringify(l({u2:r.props.card.id},t));fetch(n,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){r.props.cursor.select("label_info").set(e.label_info)}).catch(function(e){})},r.fetchUserTags=function(){var e=r.props.card,t=r.context.auth_info,n="/tag/user_tag?"+J.default.stringify({tagu:e.encode_mmid,limit:4,jsononly:1,u:t.u});fetch(n,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){r.props.cursor.select("user_tags").set(e.data)})},r.onPubComment=function(e){var t=r.props.cursor,n=r.props.re;if(r.props.card.id==e.user.id){var o=(n&&n.evaluations&&n.evaluations.n||0)+1;t.select("re").set({evaluations:{r:[e],n:o}})}},r.bc_show_edit_mark_icon=function(e){r.props.cursor.select("card","edit_mark_icon").set(e)},r.viewOtherInfos=function(){var e=r.props,t=(e.cursor,a(e,["cursor"]));(0,B.default)("/contact/other_infos/"+r.props.card.mmid,"更多资料",t)},r.openMyMember=function(e){e&&e.stopPropagation();var t=r.props;t.cursor,a(t,["cursor"]);(0,B.default)("/uh_memlist?tpl=show&fr=contact_detail","会员权益","fetch")},r.openChat=function(){var e=null,t=!1;r.context.req.query.mid&&(e=r.context.req.query.mid),1==r.context.req.query.anonymousTalk&&(t=!0),1==r.context.req.query.fromPhonebook&&(fromPhoneBook=!0),(0,W.startChatView)(e,r.props.card.id,t,null,!1)},r.ignoreFrRequest=function(){var e=r.props.extro_info.frHeWantMe,t=r.context,n=t.fconf,o=t.auth_info,a=n.online_url+"user/v3/ignore_task?"+J.default.stringify(l({id:e.id,type:1},o)),i=fetch(a).then(R.default.parse_online_json).then(function(){(0,K.default)("已忽略"),(0,j.sendWebViewBroadcast)("task_mid_is_done",{id:e.id,done:2}),r.props.cursor.select("extro_info").set(null)}).catch(R.default.toast_error_handler);(0,te.default)("忽略中",i)},r.show_auth_info=function(){(0,L.default)("../auth_info/"+r.props.card.id,"登录信息(运营专用)")},r.save_address=function(){if(!r.props.uinfo.mobile)return void(0,Z.showModalForConfirm)({title:"需提升好友级别，才能将其存入本地通讯录",ok_text:"确定"});if(window.MaiMai_Native.native_contact_add_address){var e=_e.default.getAddressInfo(r.props.card,r.props.uinfo),t=_e.default.getCareer(r.props.card,""),n={name:r.props.card.name,title:e,company:r.props.card.company,career:t,avartar:r.props.card.avatar,phone:r.props.uinfo.mobile,email:r.props.uinfo.email};(0,Me.load_image_withcallback)("contact_avatar",null,function(e){e&&(n.avatar_data=e),window.MaiMai_Native.native_contact_add_address(JSON.stringify(n))})}},r.block_action=function(){var e={uid:r.props.card.id,_csrf:r.context.auth_info._csrf};fetch("/contact/block_info?"+J.default.stringify(e),{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){var t=e.black?1:0,n=e.hide_my_feed?1:0,o=e.hide_its_feed?1:0;if(r.props.cursor.select("black").set(t),window.MaiMai_Native.native_contact_block_setting){var a='{"black":'+t+',"hide_its_feed":'+o+',"hide_my_feed":'+n+"}";window.MaiMai_Native.native_contact_block_setting(JSON.stringify(r.props.card),a,"block_contact_callback")}}).catch(R.default.toast_error_handler)},r.block_contact_callback=function(e){JSON.parse(e).conf.black!=r.props.black&&(0,W.refreshPageSilent)()},r.collect=function(){(0,ue.collect)(r.context.auth_info,r.props.card.id,"contact",function(){r.props.cursor.select("collected").set(!0)})},r.uncollect=function(){(0,ue.uncollect)(r.context.auth_info,r.props.card.id,"contact",function(){r.props.cursor.select("collected").set(!1)})},r.changeFriendLv=function(e){e&&e.stopPropagation();var t={0:{},1:{},2:{},3:{}},n=r.props.extro_info||{},o=r.props.card.lv;t[0].type=200004,t[0].t="解除";var a=-1;n.frMeChgHe&&(a=n.frMeChgHe.extra.lv);var i=-1;n.frHeChgMe&&(i=n.frHeChgMe.extra.lv),t[1].lv=1,1==o?(t[1].type=-1,t[1].t="当前级别"):(t[1].type=200023,t[1].t="降级"),t[2].lv=2,o<2?2==i?(t[2].t="通过申请",t[2].type=8,t[2].id=n.frHeChgMe.id):2==a?(t[2].t="已申请",t[2].type=-1):a>0?(t[2].t="申请",t[2].type=-1):(t[2].type=200022,t[2].t="申请"):2==o?(t[2].type=-1,t[2].t="当前级别"):o>2&&(t[2].type=200023,t[2].t="降级"),t[3].lv=3,o<3?3==i?(t[3].t="通过申请",t[3].type=8,t[3].id=n.frHeChgMe.id):3==a?(t[3].t="已申请",t[3].type=-1):a>0?(t[3].t="申请",t[3].type=-1):(t[3].t="申请",t[3].type=200022):3==o&&(t[3].type=-1,t[3].t="当前级别"),(0,W.changeFriendLevel)(JSON.stringify(r.props.card),o,JSON.stringify(t),function(){(0,W.refreshPageSilent)()})},r.addFriend=function(){var e=r.props.query.accountFromSearch?r.props.query.accountFromSearch:"",t=r.context,n=t.auth_info,o=t.fconf,a=t.req,i=r.context.auth_info.u,s={};s.mycard=r.props.mycard,s.jump_to_add_fr_requested=!0,(0,fe.tryAddFriend)(e,n,o,i,r.props.card.mmid,a.query.from,s)},r.remove_contact=function(){var e=r;(0,Z.showModalForConfirm)({title:"确定要解除好友关系吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v3/break?"+J.default.stringify(l({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){(0,W.refreshPageSilent)(),(0,K.default)("已解除好友关系")}).catch(R.default.toast_error_handler)},cancel_text:"取消"})},r.close_mid=function(){var e=r;(0,Z.showModalForConfirm)({title:"确定要关闭聊天权限吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"msg/v3/pause_msg?"+J.default.stringify(l({mid:e.props.mid_info.mid},n));fetch(o,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){(0,W.refreshPageSilent)(),(0,K.default)("已关闭聊天权限")}).catch(R.default.toast_error_handler)},cancel_text:"取消"})},r.follow_uid=function(){var e=r;(0,Z.showModalForConfirm)({title:"确定要加入关注列表吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v4/follow?"+J.default.stringify(l({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){e.suc?((0,W.refreshPageSilent)(),(0,K.default)("已加入关注")):((0,W.refreshPageSilent)(),(0,K.default)("关注不成功或者已超过上限"))}).catch(R.default.toast_error_handler)},cancel_text:"取消"})},r.unfollow_uid=function(){var e=r;(0,Z.showModalForConfirm)({title:"确定要从关注列表移除吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v4/unfollow?"+J.default.stringify(l({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){1==e.suc?((0,W.refreshPageSilent)(),(0,K.default)("已从关注移除")):((0,W.refreshPageSilent)(),(0,K.default)("关注不存在"))}).catch(R.default.toast_error_handler)},cancel_text:"取消"})},r.navToMMFromOutApp=function(){var e="uidtype="+(r.props.share_u_type?r.props.share_u_type:"0")+"&fcard";(0,he.launch)("openwebview","https://maimai.cn/contact/detail/"+r.props.card.id,e)},r.exchangePhone=function(){var e=r.context,t=e.auth_info,n=e.fconf;r.props.cursor.select("extro_info","frMeChgHe","extra","lv").set(2),(0,K.default)("已申请"),fetch(n.online_url+"contact/v3/init_inclv?"+J.default.stringify(l({u2:r.props.card.mmid,lv:2},t))).then(R.default.parse_online_json).catch(R.default.toast_error_handler).catch(function(e){r.props.cursor.select("extro_info","frMeChgHe").set(null)})},r.confirmExchangePhone=function(){var e=r.context,t=e.auth_info,n=e.fconf,o=r.props.extro_info.frHeChgMe.id,a=fetch(n.online_url+"user/v3/complete_task?"+J.default.stringify(l({type:8,id:o},t))).then(R.default.parse_online_json).then(function(e){(0,K.default)("已通过"),(0,j.sendWebViewBroadcast)("task_mid_is_done",{id:o,done:1}),(0,W.refreshPageSilent)()}).catch(R.default.toast_error_handler);(0,te.default)("通过中...",a)},r.requestedExchangePhone=function(){return r.props.extro_info&&r.props.extro_info.frMeChgHe&&2==r.props.extro_info.frMeChgHe.extra.lv},r.recievedExchangePhone=function(){return r.props.extro_info&&r.props.extro_info.frHeChgMe&&2==r.props.extro_info.frHeChgMe.extra.lv},r.inviteComment=function(){if(0==r.props.card.dist)return void(0,B.default)("/contact/invite_comment_list","邀请好友点评","fetch");try{if(confirm("系统会向TA的同事们发送点评邀请，不会泄露您的身份")){var e=r.context.auth_info,t="/sdk/contact/invite_comment?"+J.default.stringify(l({u2:r.props.card.id},e)),n=fetch(t).then(R.default.parse_online_json).then(function(e){(0,K.default)("已邀请成功！")}).catch(alert);(0,te.default)("请求中",n)}}catch(e){alert(e)}},r.moreComments=function(){var e=0==r.props.card.dist?"我":r.props.card.name,t=r.props.card.encode_mmid?r.props.card.encode_mmid:r.props.card.mmid;(0,B.default)("/contact/comment_list/"+t,e+"收到的点评","fetch")},r.pubService=function(){if(r.props.outApp)return void(0,he.launch_webview)();(0,B.default)("/service/pub","发布服务",{})},r.moreServices=function(){if(r.props.outApp)return void(0,he.launch_webview)();var e=r.props,t=e.services,n=e.card;(0,B.default)("/service/list?uid="+n.id,"全部服务",{services:t,card:n})},r.onPubService=function(e){for(var t=r.props,n=t.services,o=t.cursor,a=0;a<n.length;a++)if(n[a]._id==e._id)return void o.select("services",a).set(e);e.uid==r.props.card.id&&r.props.cursor.select("services").unshift(e)},r.onDeleteService=function(e){for(var t=r.props,n=t.services,o=t.cursor,a=0;a<n.length;a++)if(n[a]._id==e._id){o.select("services").splice([a,1]);break}},r.openEditSelfIntroduce=function(){if(r.props.outApp)return void(0,he.launch_webview)();(0,B.default)("/contact/edit_self_introduce","编辑自我介绍",{uinfo:r.props.uinfo})},r.open_self_intro_detail=function(){if(r.props.outApp)return void(0,he.launch_webview)();(0,B.default)("/contact/self_introduce_detail","自我介绍",{uinfo:r.props.uinfo})},r.commentFriend=function(){r.props.mystatus.status?(0,L.default)("/contact/add_comment/"+r.props.card.id,"给"+r.props.card.name+"点评"):(0,Z.showModalForConfirm)({title:"给"+r.props.ta+"点评需要完善您的实名资料，是否现在完善?",ok:function(){(0,W.completeRealProfile)(W.refreshPageSilent)},ok_text:"去完善",cancel_text:"取消"})},r.openDist3Page=function(){(0,L.default)(r.props.my_show_more_url,"邀请好友")},r.openRelationPath=function(){(0,B.default)("/contact/relation_path/"+r.props.card.mmid,"关系链","fetch")},r.skipIdentify=function(e){var t=r.context,n=t.auth_info,o=t.fconf,a="work"==e.target.getAttribute("type")?"user/v5/lbbg/skip_wkp?":"user/v5/lbbg/skip_edu?",i=o.online_url+a+J.default.stringify(l({u2:r.props.card.id},n,{lbid:e.target.getAttribute("id")}));fetch(i,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(e){"ok"==e.result&&r.setState({showIdenfityCard:!1})}).catch(R.default.toast_error_handler)},r.isEnpty=function(e){for(var t in e)return!1;return!0},r.renderIdentifyFirend=function(){var e=r.props.card,t="work",n="",o="";if(r.isEnpty(r.props.label_info.work)?r.isEnpty(r.props.label_info.education)?t="dontshow":(t="education",n=r.props.label_info.education,o="/static/images/qita.png"):(t="work",n=r.props.label_info.work,o="http://i9.taou.com/maimai/c/interlogo/default.png"),"dontshow"!=t&&r.state.showIdenfityCard)return u.default.createElement("div",{className:"identify_friends_box border-radius-8 m-x m-t m-b-10"},u.default.createElement("div",{className:"w-100 blue-bg-009EFF h-3"}),u.default.createElement("div",{className:"m-l-20 m-b-15"},u.default.createElement("div",{className:"font-13 text-black-3 p-y-10"},r.props.card.name,"是你","work"==t?n.company:n.school,"的","work"==t?"同事":"同学","么？"),u.default.createElement("div",{className:"font-0 media-left"},u.default.createElement("img",{src:n.icon||o,className:"avatar-42"})),u.default.createElement("div",{className:"media-body text-black-6 p-r-35 m-l-10"},"帮TA认证","work"==t?n.company:n.school,"的","work"==t?"工作":"教育","经历，获得更精准推荐。")),u.default.createElement("div",{className:"logo_dialog_btns clearfix m-x-5 border-top-e p-y-5"},u.default.createElement("div",{className:"left_btn text-blue-009eff p-y-10",type:t,id:n.id,onClick:r.skipIdentify},"跳过"),"work"==t?u.default.createElement("div",{className:"right_btn text-blue-009eff p-y-10",onClick:function(){(0,B.default)("/contact/identify_friends_company?id="+n.id+"&company="+n.company+"&u2="+e.id+"&reason="+n.reason,"认证工作经历","fetch")}},"确认"):u.default.createElement("div",{className:"right_btn text-blue-009eff p-y-10",onClick:function(){(0,B.default)("/contact/identify_friends_school?id="+n.id+"&school="+n.school+"&u2="+e.id+"&reason="+n.reason,"认证教育经历","fetch")}},"确认")))},r.renderMyFriendForm=function(e){if(!r.props.outApp&&0==r.props.card.dist){var t=[],n=function(){(0,B.default)("/contact/add_friend_list","添加好友","fetch")};return e&&t.push(u.default.createElement(S.default,{key:"inapp_contact",title:"我的好友",content:"去加好友",onClick:n,classname:"list-group-item p-x form-cell border-top-0 p-x"})),u.default.createElement("ul",{className:"list-group m-b-0"},t)}},r.renderFormCell=function(){if(!r.props.outApp){var e=[];if(0!=r.props.card.dist&&1==r.props.card.in_app){if(r.props.common_fr_info&&r.props.common_fr_info.total>0){return r.props.common_fr_info.cards.slice(0,4).map(function(t,n){e.push(u.default.createElement("div",{className:"d-i-b font-0 m-r-5 media-middle",key:"cmf"+n,onClick:r.openCommonContactlist},u.default.createElement("img",{className:"radius-50 avatar-25",src:t.avatar})))}),e.push(u.default.createElement("div",{key:"cmf",className:"d-i-b font-12 m-x-5",onClick:r.openCommonContactlist},u.default.createElement("span",{className:"text-blue-009eff"},r.props.common_fr_info.total),u.default.createElement("span",{className:"text-black-6"},"个共同好友>"))),u.default.createElement("div",{className:"text-center p-y-5 m-t"},e)}if(3==r.props.card.dist){var t="通过好友认识"+r.props.ta;return e.push(u.default.createElement(S.default,{key:"rel_path",title:t,content:"",onClick:r.openRelationPath,classname:"list-group-item p-x form-cell border-top-0"})),u.default.createElement("div",null,e)}}}},r.renderZd=function(){r.context.auth_info;r.props.outApp},r.goZd=function(){var e=r.props.card;(0,B.default)("/zd/ask?"+J.default.stringify({auid:e.id}),e.name+"的职答","fetch")},r.goZdInfo=function(){r.props.card;(0,B.default)("/zd/my_info","我的职答","fetch")},r.openCard=function(){(0,B.default)("/contact/card/"+r.props.card.id,"二维码名片","fetch")},r.openExperience=function(e){r.props.outApp?r.navToMMFromOutApp():(0,B.default)("/contact/experience/"+r.props.card.id+(r.context.req.query.u?"?share_u="+r.context.req.query.u:"")+(e&&"#"+e),"背景经历",{uinfo:r.props.uinfo,card:r.props.card,ta:r.props.ta})},r.completeMyExperience=function(){(0,B.default)("/contact/experience/"+r.context.auth_info.u,"背景经历","fetch")},r.openTagDetail=function(){r.props.outApp?r.navToMMFromOutApp():(0,B.default)("/contact/tags_list/"+r.props.card.id,r.props.card.name+"的标签","fetch")},r.completeMyTagDetail=function(){window.MaiMai_Native.native_edit_myself_tag&&window.MaiMai_Native.native_edit_myself_tag(null)},r.menuAddMark=function(e){0!=r.props.card.dist&&((0,L.default)("/contact/mark/show?u2="+r.props.card.id,"备注信息"),e.stopPropagation())},r.addMark=function(e){0!=r.props.card.dist&&r.props.card.edit_mark_icon&&((0,L.default)("/contact/mark/show?u2="+r.props.card.id,"备注信息"),e.stopPropagation())},r.gotoEditMyProfile=function(e){(0,B.default)("/contact/detail/"+r.context.auth_info.u+"?edit_mode=1&from=contact_detail","编辑资料","fetch"),e.stopPropagation()},r.goJudge=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();var t=r.context.auth_info.u;if(r.props.srcu_blocked)return void(0,Z.showModalForConfirm)({title:"您的账号已被封禁，请与脉脉小助手联系",ok_text:"确定"});(0,W.openJudgePage)(t,r.props.card.judge,r.props.uinfo,r.props.uinfo.figure,"",r.context.auth_info),e.stopPropagation()},r.authDescription=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();r.props.srcu_blocked?(0,Z.showModalForConfirm)({title:"您已被封禁, 不能查看TA的资料",ok_text:"确定"}):(0,L.default)("/contact/auth_together/"+r.props.card.id,"认证"),e.stopPropagation()},r.showProfileHistory=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();(0,B.default)("/contact/profile_history/"+r.props.card.id,"职业变更记录","fetch"),e.stopPropagation()},r.moreComment=function(){if(r.props.outApp)r.navToMMFromOutApp();else{var e=0==r.props.card.dist?"我":r.props.card.name,t=r.props.card.encode_mmid?r.props.card.encode_mmid:r.props.card.mmid;(0,B.default)("/contact/comment_list/"+t,e+"收到的点评","fetch")}},r.renderForbiddenView=function(){if(!r.props.canViewAllInfo)return r.props.needUpdateMyInfo?r.props.outApp?u.default.createElement(G.default,{tips:"由于对方隐私设置，TA的资料不可见"}):u.default.createElement(G.default,{tips:"您的基本信息尚未完善，不能查看TA的个人资料",buttonTitle:"完善基本信息",onClick:function(){(0,W.completeRealProfile)(W.refreshPageSilent)}}):r.props.blocked?u.default.createElement(G.default,{tips:"该用户已被封禁"}):r.props.srcu_blocked?0==r.props.card.dist?u.default.createElement(G.default,{tips:"您的账号已被封禁，请与脉脉小助手联系"}):u.default.createElement(G.default,{tips:"您已被封禁, 不能查看TA的资料"}):void 0},r.openCommonContactlist=function(){var e="/contact/relation/"+r.props.card.id;(0,B.default)(e,"我和"+r.props.card.name,"fetch")},r.isShowTag=function(){var e=r.context.auth_info,t=r.props,n=t.card,o=t.tag_conf,a=!0;return 0==n.dist&&(a=re.default.gte(e.version,"4.16.0")&&o&&o.switch&&1==o.switch.my_page),a},r.state={detailBottomHeight:140,showIdenfityCard:!0},o=t,s(r,o)}return c(n,t),p(n,[{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var n={title:this.props.card.name+"的脉脉名片",link:window.location.href,imgUrl:this.props.card.avatar,success:function(){},cancel:function(){}},r="";this.props.card.company&&(r+="公司:"+this.props.card.company+"\n",this.props.card.position&&(r+="职位:"+this.props.card.position+"\n")),r+="点击查看更多信息",n.desc=r,t.wx_sdk.onMenuShareAppMessage(n),t.wx_sdk.onMenuShareTimeline(n),t.wx_sdk.onMenuShareQQ(n),t.wx_sdk.onMenuShareQZone(n)}}},{key:"isNewVersion",value:function(){return re.default.gt(this.context.auth_info.version,"3.33.0")}},{key:"isEditMode",value:function(){return 0==this.props.card.dist&&!!this.props.edit_mode}},{key:"componentDidUpdate",value:function(){this.storeCard()}},{key:"componentDidMount",value:function(){var e=this;(0,j.bindBroadcast)("User_Info_Changed",this.reloadData),(0,j.bindBroadcast)("merge_user_info",this.reload_user_info),window.edit_contact=this.edit_contact,(0,j.bindBroadcast)("show_edit_mark_icon",this.bc_show_edit_mark_icon),(0,j.bindBroadcast)("pub_comment",this.onPubComment),(0,j.bindBroadcast)("pub_service",this.onPubService),(0,j.bindBroadcast)("delete_service",this.onDeleteService),(0,j.bindBroadcast)("addFriendRequestSent",this.onFriendRequestSent);var t=this.props;window.show_auth_info=this.show_auth_info,window.add_mark=this.menuAddMark,window.share_contact=function(){(0,W.shareContactCard)(JSON.stringify(t.card))},window.save_address=this.save_address,window.changeFriendLv=this.changeFriendLv,window.block_action=this.block_action,window.close_mid=this.close_mid,window.uncollect=this.uncollect,window.collect=this.collect,window.remove_contact=this.remove_contact,window.follow_uid=this.follow_uid,window.unfollow_uid=this.unfollow_uid,window.block_contact_callback=this.block_contact_callback,1==this.context.req.query.autoaddfr&&1!=this.context.req.query.silent&&this.props.card.dist>1&&this.addFriend(),1==this.context.req.query.goblock&&this.block_action(),this.fetchCommentList(),this.fetchInterestContacts(),this.fetchUserTags(),this.fetchUserLabels(),sessionStorage.regfr&&this.props.cursor.select("regfr").set(sessionStorage.regfr),(0,j.bindBroadcast)("showIdenfityCard",function(t){e.setState({showIdenfityCard:!1})})}},{key:"fetchCommentList",value:function(){var e=this;try{var t=this.props.card.encode_mmid?this.props.card.encode_mmid:this.props.card.mmid,n="/contact/comment_list/"+t+"?jsononly=1";fetch(n,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(n){n.data.batch_add&&(parseInt(t)%1009<100||parseInt(t)%1009>199)&&(0,B.default)("/contact/batch_add_friend_list?from=status_changed","添加好友","fetch"),e.props.cursor.select("evaluation_list").set(n.data.evaluation_list)})}catch(e){}}},{key:"fetchInterestContacts",value:function(){var e=this;try{var t=this.props.card.encode_mmid?this.props.card.encode_mmid:this.props.card.mmid,n="/contact/interest_contact/"+t+"?jsononly=1";fetch(n,{credentials:"same-origin"}).then(R.default.parse_online_json).then(function(t){e.props.cursor.select("interestCards").set(t.data)})}catch(e){}}},{key:"componentWillUnmount",value:function(){(0,j.unbindBroadcast)("User_Info_Changed",this.reloadData),(0,j.unbindBroadcast)("merge_user_info",this.reload_user_info),(0,j.unbindBroadcast)("show_edit_mark_icon",this.bc_show_edit_mark_icon),(0,j.unbindBroadcast)("pub_comment",this.onPubComment),(0,j.unbindBroadcast)("pub_service",this.onPubService),(0,j.unbindBroadcast)("delete_service",this.onDeleteService),(0,j.unbindBroadcast)("addFriendRequestSent",this.onFriendRequestSent),(0,fe.clearState)(),window.show_auth_info=null,window.add_mark=this.null,window.share_contact=null,window.changeFriendLv=null,window.save_address=null,window.block_action=null,window.close_mid=null,window.uncollect=null,window.collect=null,window.remove_contact=null,window.follow_uid=null,window.unfollow_uid=null,window.block_contact_callback=null}},{key:"renderContactHeader",value:function(){var e=this.props.memlist.mem_info.member.home_style_name;return u.default.createElement(F.default,l({},this.props,{edit_mode:this.isEditMode(),addMark:this.addMark,goJudge:this.goJudge,changeFriendLv:this.changeFriendLv,requestedExchangePhone:this.requestedExchangePhone(),recievedExchangePhone:this.recievedExchangePhone(),exchangePhone:this.exchangePhone,confirmExchangePhone:this.confirmExchangePhone,authDescription:this.authDescription,showProfileHistory:this.showProfileHistory,openMyMember:this.openMyMember,headerBg:this.props.skin[e]&&this.props.skin[e].bg||"",viewOtherInfos:this.viewOtherInfos}))}},{key:"renderExp",value:function(){var e=[];return 4==this.props.uinfo.profession?(e.push(this.renderEduExp()),e.push(this.renderWorkExp())):(e.push(this.renderWorkExp()),e.push(this.renderEduExp())),e}},{key:"renderWorkExp",value:function(){var e=this,t=this.props.uinfo.work_exp||[];if(0!=t.length){var n=this.props;n.cursor,a(n,["cursor"]);return u.default.createElement(x.default,{key:"work",title:"工作经历",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&t.map(function(t){return u.default.createElement(v.default,l({me:0==e.props.card.dist,ta:e.props.ta,outApp:e.props.outApp,onClick:e.openExperience,inDetail:!0,key:t.id},t,{uid:e.props.card.id,userName:e.props.card.name}))}))}}},{key:"renderEduExp",value:function(){var e=this,t=this.props.uinfo.education||[];if(0!=t.length){var n=this.props;n.cursor,a(n,["cursor"]);return u.default.createElement(x.default,{key:"edu",title:"教育经历",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&t.map(function(t){return u.default.createElement(b.default,l({me:0==e.props.card.dist,ta:e.props.ta,outApp:e.props.outApp,onClick:e.openExperience,inDetail:!0,userName:e.props.card.name,key:t.id},t,{uid:e.props.card.id}))}))}}},{key:"renderTags",value:function(){if(0!=this.props.card.dist&&!this.props.mystatus.tags)return this.props.outApp?void 0:u.default.createElement(x.default,{title:"好友印象",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},u.default.createElement(G.default,{tips:"您的标签尚未完善，不能查看TA的标签",buttonTitle:"完善标签",onClick:this.completeMyTagDetail}));var e=1==this.props.card.dist&&!this.props.outApp;return 0==this.props.card.dist||this.props.uinfo.weibo_tags&&this.props.uinfo.weibo_tags.length>0||e?u.default.createElement(_.default,l({editMode:this.isEditMode(),onClick:this.openTagDetail,inDetail:!0},this.props)):void 0}},{key:"needShowResumeInvite",value:function(){var e=this.props.card,t=this.context.req,n={job_helper:!0,search_talent:!0,talent_pool:!0,search_talent1:!0,search_talent2:!0,zhaopin_index:!0};return 0!=e.dist&&n[t.query.from]}},{key:"renderBottomButtons",value:function(){var e=this,t=this.props.memlist.mem_info.member.home_style_name;if(this.props.outApp){if(this.props.cursor.select("regfr").get()){var n=this.context.env.from_pc?"立即联系":"联系他";return u.default.createElement(h.default,{btns:[n],actions:[this.navToMMFromOutApp],styleObj:{color:this.props.skin[t]&&this.props.skin[t].color||"#fff",backgroundColor:this.props.skin[t]&&this.props.skin[t].background_color||"#1BA0FC"}})}if(this.context.fconf.ab_conf&&this.context.fconf.ab_conf.exchange_contact_new_button)var n=this.context.fconf.ab_conf.exchange_contact_new_button;else var n="创建名片加入人脉库";var r=this.navToMMFromOutApp;return u.default.createElement(h.default,{btns:[n],actions:[r],styleObj:{color:this.props.skin[t]&&this.props.skin[t].color||"#fff",backgroundColor:this.props.skin[t]&&this.props.skin[t].background_color||"#1BA0FC"}})}if(this.props.srcu_blocked||1!=this.props.card.in_app)return null;var o=this.props.card,a=this.props.extro_info||{},i=null,s=null;0==o.dist?this.isNewVersion()?(i="分享脉脉名片",s=function(){(0,W.shareContactCard)(JSON.stringify(e.props.card))}):(i="更新个人资料",s=function(){(0,W.updateMyselfInfo)(W.refreshPageSilent)}):1!=o.dist&&1!=o.pub||1!=o.in_app?1!=o.dist&&(a.frHeWantMe?(i="忽略请求",s=this.ignoreFrRequest):this.props.hasMid?(i="发消息",s=this.openChat):(i="极速联系",s=function(){if(e.props.mystatus.status){var t={u2:e.props.card.id};e.context.req.query.from&&(t.from=e.context.req.query.from),e.context.req.query.fr&&(t.fr=e.context.req.query.fr),e.context.req.query.uh_jid&&(t.jid=e.context.req.query.uh_jid),(0,L.default)("/uh_chat?"+J.default.stringify(t))}else(0,Z.showModalForConfirm)({title:"您还未完善资料，完善资料后才能直接联系哦！",ok:function(){(0,W.completeRealProfile)(W.refreshPageSilent)},ok_text:"立即完善",cancel_text:"忍痛放弃"})})):(i="发消息",s=this.openChat);var c=null,l=null;return this.needShowResumeInvite()?(c="邀请投递简历",l=function(){(0,L.default)("/invite_resume?u2="+e.props.card.id,"职位邀请")}):0==o.dist?this.isNewVersion()?(c="隐私策略",l=function(){(0,B.default)("/user_conf/index?choose_circle=true","隐私策略","fetch")}):(c="分享脉脉名片",l=function(){(0,W.shareContactCard)(JSON.stringify(e.props.card))}):1==o.pub?c=1==o.dist?"已关注":"未关注":1==o.dist&&1==o.in_app?this.recievedExchangePhone()?(c="同意交换手机号",l=this.confirmExchangePhone):this.requestedExchangePhone()?c="已申请手机号":this.props.uinfo.mobile?(c="存入本机通讯录",l=this.save_address):(c="申请交换手机号",l=this.exchangePhone):1!=o.dist&&(a.frHeWantMe?(c="通过好友申请",l=function(){(0,W.acceptFriend)(e.props.card.mmid,1,e.context.fconf,e.context.auth_info).then(function(e){(0,W.refreshPageSilent)()})}):a.frMeWantHe?c="已申请好友":(c="＋加好友",l=this.addFriend)),u.default.createElement(h.default,{btns:[i,c],actions:[s,l],styleObj:{color:this.props.skin[t]&&this.props.skin[t].color||"#fff",backgroundColor:this.props.skin[t]&&this.props.skin[t].background_color||"#1BA0FC"}})}},{key:"renderComments",value:function(){var e=this,t=this.props,n=t.card,r=t.evaluation_list;if(1==n.in_app){var o=0==n.dist&&this.context.auth_info.u>0?"我":n.name;if(r)var a=r.length>0?"共"+r.length+"人点评过"+o:"还没有人点评过"+o;else var a="点评";var i;this.props.outApp||(i=0==this.props.card.dist&&u.default.createElement(G.default,{buttonTitle:"邀请好友点评我",onClick:this.inviteComment})||1==this.props.card.dist&&u.default.createElement(G.default,{buttonTitle:"我要点评"+this.props.card.name,onClick:this.commentFriend})||this.props.card.dist>1&&u.default.createElement(G.default,{buttonTitle:"邀请"+this.props.ta+"的同事来点评",onClick:this.inviteComment})||null);var s=r&&r.length>5&&"didi_client"!=this.context.req.query.regfr;return u.default.createElement(x.default,{title:a,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info text-info"},i&&u.default.createElement("div",null,i),r&&u.default.createElement("ul",{className:"list-group m-b-0"},r.slice(0,5).map(function(t,n){return u.default.createElement(C.default,{key:t.id,inDetail:!0,comment_data:t,cursor:e.props.cursor.select("evaluation_list",n),listCursor:e.props.cursor.select("evaluation_list"),index:n})})),s&&u.default.createElement(O.default,{defined_children:!0},u.default.createElement("div",{className:"detail_more_btn m-y-20",onClick:this.moreComments},"全部",r.length,"个点评")))}}},{key:"renderServices",value:function(){var e=this.props,t=e.services,n=e.card;e.uinfo;return t=z.default.sortBy(t,function(e){return-(e.settop*Math.pow(10,26)+e.settop_time*Math.pow(10,16)+e.paynum*Math.pow(10,10)+e._id)}),t.length>0?u.default.createElement(x.default,{title:"服务",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&u.default.createElement(de.default,{services:t,card:n}),t.length>3&&u.default.createElement(O.default,{defined_children:!0},u.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:this.moreServices},"全部",t.length,"个服务"))):null}},{key:"renderHeadline",value:function(){var e=0==this.props.card.dist&&this.isEditMode()&&!this.props.outApp;if(!(0!=this.props.card.dist||!this.isEditMode())||this.props.uinfo.headline&&this.props.uinfo.headline.length>0){var t=this.props.uinfo.headline&&this.props.uinfo.headline.length>0?this.props.uinfo.headline:" ";return u.default.createElement(x.default,{title:"自我介绍",btn:e?"编辑":null,onClick:this.openEditSelfIntroduce,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},u.default.createElement("li",{className:"list-group-item p-x",style:Fe.wrapper},this.props.uinfo.headline&&this.props.uinfo.headline.length>0&&u.default.createElement("span",{style:Fe.arrow,className:"arrow-bg"}),u.default.createElement("div",{ref:"self_intro_content",style:Fe.collapse,onClick:this.open_self_intro_detail},t)))}}},{key:"renderAppMessage",value:function(){var e=l({},ie.default);return 0==this.props.card.dist?(this.props.edit_mode?e.top_right_item={title:"完成",callback:"edit_contact()"}:e.top_right_item={title:"编辑",callback:"edit_contact()"},u.default.createElement($.default,{msg_to_app:e})):(e.more_items=[],this.props.admin&&e.more_items.push({title:"登录信息(运营专用)",callback:"show_auth_info()"}),0==this.props.card.dist||(1==this.props.card.dist?(e.more_items.push({title:"设置备注/分组",callback:"add_mark()"}),e.more_items.push({title:"分享脉脉名片",callback:"share_contact()"}),e.more_items.push({title:"存入本机通讯录",callback:"save_address()"}),e.more_items.push({title:"更改好友关系",callback:"changeFriendLv()"}),e.more_items.push({title:"屏蔽/举报/拉黑",callback:"block_action()"}),e.more_items.push({title:"解除好友关系",callback:"remove_contact()"})):(e.more_items.push({title:"设置备注/分组",callback:"add_mark()"}),3==this.props.card.dist&&!this.props.is_follow&&this.props.can_follow?e.more_items.push({title:"加入关注列表",callback:"follow_uid()"}):this.props.is_follow&&e.more_items.push({title:"取消关注",callback:"unfollow_uid()"}),e.more_items.push({title:"分享脉脉名片",callback:"share_contact()"}),e.more_items.push({title:"屏蔽/举报/拉黑",callback:"block_action()"}),this.props.hasMid&&e.more_items.push({title:"关闭聊天权限",callback:"close_mid()"}))),0!=this.props.card.dist&&this.props.shouldShowCollection&&(this.props.collected?e.more_items.push({title:"移除收藏",callback:"uncollect()"}):e.more_items.push({title:"收藏人脉卡片",callback:"collect()"})),u.default.createElement($.default,{msg_to_app:e}))}},{key:"renderFeedDetailPanel",value:function(){var e=this.props.memlist.mem_info.member.home_style_name;if(this.props.feed_infos)return u.default.createElement(ve.default,{feed_infos:l({},this.props.feed_infos,{job:this.props.uinfo.job_count}),open_data:this.props.open_data,ta:this.props.ta,skin_info:this.props.skin[e]||{},card:this.props.card})}},{key:"renderFollowPanel",value:function(){return u.default.createElement(be.default,this.props)}},{key:"renderWorkEditPanel",value:function(){var e=this;return u.default.createElement(x.default,{key:"work",onClick:W.addWorkExp,title:"工作经历",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.uinfo.work_exp.map(function(t){return u.default.createElement(v.default,l({key:t.id},t,{me:!0,noauth:!0,uid:e.props.card.id,userName:e.props.card.name}))}),4!=this.props.uinfo.profession&&0==this.props.uinfo.work_exp.length&&u.default.createElement(G.default,{onBgClick:W.addWorkExp,tips:"添加工作经历信息",subTips:"吸引更多访客，提升5倍人气",tipsClass:"warning-color"}))}},{key:"renderEduEditPanel",value:function(){var e=this;return u.default.createElement(x.default,{key:"edu",onClick:W.addEduExp,title:"教育经历",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.uinfo.education.map(function(t){return u.default.createElement(b.default,l({key:t.id},t,{me:0==e.props.card.dist,noauth:!0,uid:e.props.card.id,userName:e.props.card.name,isStudent:4==e.props.uinfo.profession}))}),0==this.props.uinfo.education.length&&u.default.createElement(G.default,{tips:"添加教育经历信息",subTips:"让同窗校友轻松找到你",onBgClick:W.addEduExp,tipsClass:"warning-color"}))}},{key:"renderDomainSkillPanel",value:function(){if(this.isShowTag()){var e=this.props,t=e.user_tags,n=e.cursor,r=e.card;if(t&&0!=t.tags.length){var o=function(){(0,B.default)("/tag/user_tag?"+J.default.stringify({tagu:r.encode_mmid}),r.name+"的职业标签","fetch")};return u.default.createElement(x.default,{key:"domain_skill",title:"职业标签",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info",btn:"仅同行能认可",icon_classname:"null",btn_class:"font-12 text-gray-bcc9d0 "},u.default.createElement("div",{className:"p-t-10"},u.default.createElement(Se.default,l({tag_wrap_class:"p-x p-y-10",fetchUserTags:this.fetchUserTags,cursor:n.select("user_tags")},t,{inDetail:!0})),t.count>4&&u.default.createElement(O.default,{defined_children:!0},u.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:o},"全部",t.count,"个职业标签"))))}}}},{key:"renderDomainSkillEditPanel",value:function(){if(this.isShowTag()){var e=this.props,t=e.user_tags,n=e.cursor,r=e.card,o=function(){(0,B.default)("/tag/user_tag?"+J.default.stringify({tagu:r.encode_mmid}),r.name+"的职业标签","fetch")},a=function(){window.MaiMai_Native.native_modify_domain_skill()&&window.MaiMai_Native.native_modify_domain_skill()};return t&&0!=t.tags.length?u.default.createElement(x.default,{key:"domain_skill",onClick:a,title:"职业标签",btn:"编辑",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},u.default.createElement("div",{className:"p-t-10"},u.default.createElement(Se.default,l({tag_wrap_class:"p-x p-y-10",fetchUserTags:this.fetchUserTags,cursor:n.select("user_tags")},t,{inDetail:!0})),t.count>4&&u.default.createElement(O.default,{defiend_children:!0},u.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:o},"全部",t.count,"个职业标签")))):u.default.createElement(x.default,{key:"domain_skill",onClick:a,title:"职业标签",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},u.default.createElement("div",{className:"p-y-25"},u.default.createElement("div",{className:"text-center font-16 m-b-10"},u.default.createElement("span",{className:"add_tag_new media-middle m-r-10"}),"补全职业标签，更多机会找到你"),u.default.createElement("div",{className:"text-center text-muted"},"你的职场影响力提高了至少",u.default.createElement("span",{className:"text-orange-f67200"},"3"),"倍！"),u.default.createElement("div",{className:"detail_more_btn m-t-20",onClick:a},"添加职业标签")))}}},{key:"renderInterestContacts",value:function(){if("didi_client"!=this.context.req.query.regfr&&this.props.interestCards&&(this.props.outApp||0!=this.props.card.dist)){var e=this.props.outApp?"你可能感兴趣":"看了"+this.props.ta+"的人还看了";return u.default.createElement(x.default,{key:"interest",title:e,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.interestCards.map(function(e){return u.default.createElement(Pe.default,{key:e.id,card:e,from:"contact_detail_interest"})}))}}},{key:"renderOtherEditPanel",value:function(e){return u.default.createElement(Ee.default,l({},this.props,{readonly:e}))}},{key:"renderDetailBottom",value:function(){return u.default.createElement("div",null,u.default.createElement("div",{style:{height:this.state.detailBottomHeight+"px"}}),u.default.createElement(je.default,{avatar:this.props.card.avatar,cshow_url:this.props.cshow_url,updateItemHeight:this.updateItemHeight.bind(this)}))}},{key:"updateItemHeight",value:function(e){this.setState({detailBottomHeight:e}),this.forceUpdate()}},{key:"renderViewLimit",value:function(){var t=function(){(0,B.default)("/uh_memlist?tpl=show&fr=commercial_views","会员中心","fetch"),e.stopPropagation()};return u.default.createElement("div",null,u.default.createElement("div",{className:"text-center font-16 m-t-lg"},"您本周非好友浏览次数已达上限"),u.default.createElement("div",{className:"text-center text-muted m-t"},"每周一可解除浏览限制"),u.default.createElement("div",{className:"contact_detail_view_limit_btn",onClick:t},u.default.createElement("span",{className:"d-i-b media-middle"},"开通会员,无限浏览")))}},{key:"render",value:function(){var e=this.context,t=e.auth_info,n=e.env,r=!this.props.outApp&&this.props.card.dist>1&&this.props.reach_commercial_view_limit&&1==this.props.reach_commercial_view_limit;if(this.isEditMode())return this.props.srcu_blocked?u.default.createElement("div",null,u.default.createElement(N.default,{title:"编辑资料"}),this.renderForbiddenView()):u.default.createElement("div",null,this.renderAppMessage(),u.default.createElement(N.default,{title:"编辑资料"}),this.renderContactHeader(),this.renderMyFriendForm(!0),this.renderZd(),4!=this.props.uinfo.profession&&[this.renderWorkEditPanel(),this.renderEduEditPanel()],4==this.props.uinfo.profession&&[this.renderEduEditPanel(),this.renderWorkEditPanel()],this.renderDomainSkillEditPanel(),this.renderHeadline(),this.renderServices(),this.renderTags(),this.renderOtherEditPanel(!1));if(r)return u.default.createElement("div",null,u.default.createElement(N.default,{title:"人脉详情"}),this.renderContactHeader(),!this.props.blocked&&this.renderViewLimit(),this.renderForbiddenView());var o=1==t.u||2==t.u||4==t.u||31==t.u||42==t.u||30180999==t.u;return u.default.createElement("div",null,this.renderAppMessage(),u.default.createElement(N.default,{title:this.props.outApp?this.props.card.name+"的脉脉名片":"人脉详情"}),this.renderContactHeader(),this.props.label_info&&this.renderIdentifyFirend(),!this.props.blocked&&this.renderMyFriendForm(),!this.props.blocked&&this.renderFormCell(),o&&!this.props.blocked&&!this.props.outApp&&this.renderFollowPanel(),!this.props.blocked&&!this.props.outApp&&this.renderFeedDetailPanel(),!this.props.blocked&&!this.props.outApp&&this.renderZd(),!this.props.blocked&&this.renderExp(),!this.props.blocked&&this.renderDomainSkillPanel(),!this.props.blocked&&this.renderHeadline(),!this.props.blocked&&!this.props.blocked&&this.renderComments(),!this.props.blocked&&!this.props.outApp&&this.renderServices(),!this.props.blocked&&this.renderTags(),!this.props.blocked&&!this.props.outApp&&this.renderOtherEditPanel(!0),this.renderForbiddenView(),!this.props.blocked&&this.renderInterestContacts(),!this.props.blocked&&this.renderBottomButtons(),-1==t.u&&n.mobile&&this.renderDetailBottom())}}]),n}(u.default.Component));Ae.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object,wx_sdk:u.default.PropTypes.object},Ae.getCacheKey=function(e){return e.req.query.edit_mode?void 0:e.req.pathname+"_key_"},t.exports=Ae;var Fe={collapse:{lineHeight:"22px",overflow:"hidden",paddingTop:"5px",marginRight:"35px",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,color:"#222",WebkitBoxOrient:"vertical"},wrapper:{position:"relative"},arrow:{position:"absolute",width:"13px",height:"16px",right:"10px",top:"50%",marginTop:"-8px"},bottomHeight:{width:"100%",height:"140px"}}},1380:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(1381),f=r(u),h=n(1228),m=r(h),_=n(1076),g=r(_),v=n(1077),y=r(v),b=n(271),k=r(b),x=n(1055),w=(r(x),n(1229)),E=r(w),C=n(981),P=r(C),N=n(986),M=r(N),O=n(113),j=n(989),T=r(j),S=n(1382),A=r(S),F=n(1230),I=(r(F),n(46)),q=r(I),B=n(50),D=r(B),L=n(164),W=n(75),H=r(W),R=n(17),U=r(R),z=n(15),V=r(z),J=n(167),Z=n(1025),Q=r(Z),G=n(76),X=r(G),K=n(983),Y=r(K),$=n(114),ee=r($),te=n(276),ne=r(te),re=n(278),oe=(r(re),n(272)),ae=r(oe),ie=n(77),se=(r(ie),n(995)),ce=(r(se),n(1003)),le=(r(ce),n(1231)),pe=r(le),de=n(1078),ue=n(1026),fe=n(115),he=n(116),me=r(he),_e=n(1383),ge=r(_e),ve=n(1232),ye=r(ve),be=n(1080),ke=(r(be),n(286)),xe=(r(ke),n(1081)),we=r(xe),Ee=n(1032),Ce=r(Ee),Pe=n(1027),Ne=(r(Pe),n(998)),Me=n(1082),Oe=r(Me),je=n(686),Te=r(je),Se=n(277),Ae=(n(78),n(47),n(1019),n(985)("app"),function(e){function t(){var e,n,r,s;a(this,t);for(var l=arguments.length,p=Array(l),u=0;u<l;u++)p[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),r.reloadData=function(e){if(0==r.props.card.dist){var t=(0,L.formatUserV3ToUInfo)(e);1!=r.props.uinfo.status&&1==t.status&&(0,J.showModalForConfirm)({title:"恭喜！资料已完善，你获得5个加好友特权，现在就去加好友提升职场信用吧",ok_text:"去加好友",ok:function(){(0,q.default)("/contact/add_friend_list?from=status_changed","添加好友","fetch")},cancel_text:"放弃特权"}),r.props.cursor.select("uinfo").merge(t),r.props.cursor.select("card").merge((0,L.formatUserV3ToCard)(e)),r.props.cursor.select("company").set((0,L.formatUserV3ToCompany)(e)),r.fetchUserTags()}else(0,ue.inAddFriendWorkflow)()||(0,L.refreshPageSilent)()},r.reload_user_info=function(e){r.props.cursor.select("uinfo").merge(e)},r.storeCard=function(){r.context.fconf.using_server_data&&!r.storedCard&&(r.storedCard=!0,r.props.card.line1=me.default.getCareer(r.props.card),r.props.card.career=r.props.card.line1,(0,L.storeContactCard)(JSON.stringify(r.props.card)))},r.onFriendRequestSent=function(e){e==r.props.card.mmid&&((0,X.default)("加好友申请已发出"),r.props.cursor.select("extro_info").set({frMeWantHe:!0}))},r.edit_contact=function(){if(r.props.edit_mode||(0,Se.pingback)("pbuser_info","self_edit","click",r.context.auth_info),r.props.srcu_blocked)return void(0,J.showModalForConfirm)({title:"您的账号已被封禁，请与脉脉小助手联系",ok_text:"确定"});r.props.cursor.select("edit_mode").set(!r.props.edit_mode)},r.fetchUserTags=function(){var e=r.props.card,t=r.context.auth_info,n="/tag/user_tag?"+V.default.stringify({tagu:e.encode_mmid,limit:4,jsononly:1,u:t.u});fetch(n,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){r.props.cursor.select("user_tags").set(e.data)})},r.onPubComment=function(e){var t=r.props.cursor,n=r.props.re;if(r.props.card.id==e.user.id){var o=(n&&n.evaluations&&n.evaluations.n||0)+1;t.select("re").set({evaluations:{r:[e],n:o}})}},r.bc_show_edit_mark_icon=function(e){r.props.cursor.select("card","edit_mark_icon").set(e)},r.viewOtherInfos=function(){var e=r.props,t=(e.cursor,o(e,["cursor"]));(0,q.default)("/contact/other_infos/"+r.props.card.mmid,"更多资料",t)},r.openMyMember=function(e){e&&e.stopPropagation();var t=r.props;t.cursor,o(t,["cursor"]);(0,q.default)("/uh_memlist?tpl=show&fr=contact_detail","会员权益","fetch")},r.openChat=function(){var e=null,t=!1;r.context.req.query.mid&&(e=r.context.req.query.mid),1==r.context.req.query.anonymousTalk&&(t=!0),1==r.context.req.query.fromPhonebook&&(fromPhoneBook=!0),(0,L.startChatView)(e,r.props.card.id,t,null,!1)},r.ignoreFrRequest=function(){var e=r.props.extro_info.frHeWantMe,t=r.context,n=t.fconf,o=t.auth_info,a=n.online_url+"user/v3/ignore_task?"+V.default.stringify(c({id:e.id,type:1},o)),i=fetch(a).then(H.default.parse_online_json).then(function(){(0,X.default)("已忽略"),(0,O.sendWebViewBroadcast)("task_mid_is_done",{id:e.id,done:2}),r.props.cursor.select("extro_info").set(null)}).catch(H.default.toast_error_handler);(0,ee.default)("忽略中",i)},r.show_auth_info=function(){(0,D.default)("../auth_info/"+r.props.card.id,"登录信息(运营专用)")},r.save_address=function(){if(!r.props.uinfo.mobile)return void(0,J.showModalForConfirm)({title:"需提升好友级别，才能将其存入本地通讯录",ok_text:"确定"});if(window.MaiMai_Native.native_contact_add_address){var e=me.default.getAddressInfo(r.props.card,r.props.uinfo),t=me.default.getCareer(r.props.card,""),n={name:r.props.card.name,title:e,company:r.props.card.company,career:t,avartar:r.props.card.avatar,phone:r.props.uinfo.mobile,email:r.props.uinfo.email};(0,Ne.load_image_withcallback)("contact_avatar",null,function(e){e&&(n.avatar_data=e),window.MaiMai_Native.native_contact_add_address(JSON.stringify(n))})}},r.block_action=function(){var e={uid:r.props.card.id,_csrf:r.context.auth_info._csrf};fetch("/contact/block_info?"+V.default.stringify(e),{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){var t=e.black?1:0,n=e.hide_my_feed?1:0,o=e.hide_its_feed?1:0;if(r.props.cursor.select("black").set(t),window.MaiMai_Native.native_contact_block_setting){var a='{"black":'+t+',"hide_its_feed":'+o+',"hide_my_feed":'+n+"}";window.MaiMai_Native.native_contact_block_setting(JSON.stringify(r.props.card),a,"block_contact_callback")}}).catch(H.default.toast_error_handler)},r.block_contact_callback=function(e){JSON.parse(e).conf.black!=r.props.black&&(0,L.refreshPageSilent)()},r.collect=function(){(0,de.collect)(r.context.auth_info,r.props.card.id,"contact",function(){r.props.cursor.select("collected").set(!0)})},r.uncollect=function(){(0,de.uncollect)(r.context.auth_info,r.props.card.id,"contact",function(){r.props.cursor.select("collected").set(!1)})},r.changeFriendLv=function(e){e&&e.stopPropagation();var t={0:{},1:{},2:{},3:{}},n=r.props.extro_info||{},o=r.props.card.lv;t[0].type=200004,t[0].t="解除";var a=-1;n.frMeChgHe&&(a=n.frMeChgHe.extra.lv);var i=-1;n.frHeChgMe&&(i=n.frHeChgMe.extra.lv),t[1].lv=1,1==o?(t[1].type=-1,t[1].t="当前级别"):(t[1].type=200023,t[1].t="降级"),t[2].lv=2,o<2?2==i?(t[2].t="通过申请",t[2].type=8,t[2].id=n.frHeChgMe.id):2==a?(t[2].t="已申请",t[2].type=-1):a>0?(t[2].t="申请",t[2].type=-1):(t[2].type=200022,t[2].t="申请"):2==o?(t[2].type=-1,t[2].t="当前级别"):o>2&&(t[2].type=200023,t[2].t="降级"),t[3].lv=3,o<3?3==i?(t[3].t="通过申请",t[3].type=8,t[3].id=n.frHeChgMe.id):3==a?(t[3].t="已申请",t[3].type=-1):a>0?(t[3].t="申请",t[3].type=-1):(t[3].t="申请",t[3].type=200022):3==o&&(t[3].type=-1,t[3].t="当前级别"),(0,L.changeFriendLevel)(JSON.stringify(r.props.card),o,JSON.stringify(t),function(){(0,L.refreshPageSilent)()})},r.addFriend=function(){var e=r.props.query.accountFromSearch?r.props.query.accountFromSearch:"",t=r.context,n=t.auth_info,o=t.fconf,a=t.req,i=r.context.auth_info.u,s={};s.mycard=r.props.mycard,s.jump_to_add_fr_requested=!0,(0,ue.tryAddFriend)(e,n,o,i,r.props.card.mmid,a.query.from,s)},r.remove_contact=function(){var e=r;(0,J.showModalForConfirm)({title:"确定要解除好友关系吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v3/break?"+V.default.stringify(c({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){(0,L.refreshPageSilent)(),(0,X.default)("已解除好友关系")}).catch(H.default.toast_error_handler)},cancel_text:"取消"})},r.close_mid=function(){var e=r;(0,J.showModalForConfirm)({title:"确定要关闭聊天权限吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"msg/v3/pause_msg?"+V.default.stringify(c({mid:e.props.mid_info.mid},n));fetch(o,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){(0,L.refreshPageSilent)(),(0,X.default)("已关闭聊天权限")}).catch(H.default.toast_error_handler)},cancel_text:"取消"})},r.follow_uid=function(){var e=r;(0,J.showModalForConfirm)({title:"确定要加入关注列表吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v4/follow?"+V.default.stringify(c({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){e.suc?((0,L.refreshPageSilent)(),(0,X.default)("已加入关注")):((0,L.refreshPageSilent)(),(0,X.default)("关注不成功或者已超过上限"))}).catch(H.default.toast_error_handler)},cancel_text:"取消"})},r.unfollow_uid=function(){var e=r;(0,J.showModalForConfirm)({title:"确定要从关注列表移除吗？",ok_text:"确定",ok:function(){var t=e.context,n=t.auth_info,r=t.fconf,o=r.online_url+"contact/v4/unfollow?"+V.default.stringify(c({u2:e.props.card.mmid},n));fetch(o,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(e){1==e.suc?((0,L.refreshPageSilent)(),(0,X.default)("已从关注移除")):((0,L.refreshPageSilent)(),(0,X.default)("关注不存在"))}).catch(H.default.toast_error_handler)},cancel_text:"取消"})},r.navToMMFromOutApp=function(){var e="uidtype="+(r.props.share_u_type?r.props.share_u_type:"0")+"&fcard";(0,fe.launch)("openwebview","https://maimai.cn/contact/detail/"+r.props.card.id,e)},r.exchangePhone=function(){var e=r.context,t=e.auth_info,n=e.fconf;r.props.cursor.select("extro_info","frMeChgHe","extra","lv").set(2),(0,X.default)("已申请"),fetch(n.online_url+"contact/v3/init_inclv?"+V.default.stringify(c({u2:r.props.card.mmid,lv:2},t))).then(H.default.parse_online_json).catch(H.default.toast_error_handler).catch(function(e){r.props.cursor.select("extro_info","frMeChgHe").set(null)})},r.confirmExchangePhone=function(){var e=r.context,t=e.auth_info,n=e.fconf,o=r.props.extro_info.frHeChgMe.id,a=fetch(n.online_url+"user/v3/complete_task?"+V.default.stringify(c({type:8,id:o},t))).then(H.default.parse_online_json).then(function(e){(0,X.default)("已通过"),(0,O.sendWebViewBroadcast)("task_mid_is_done",{id:o,done:1}),(0,L.refreshPageSilent)()}).catch(H.default.toast_error_handler);(0,ee.default)("通过中...",a)},r.requestedExchangePhone=function(){return r.props.extro_info&&r.props.extro_info.frMeChgHe&&2==r.props.extro_info.frMeChgHe.extra.lv},r.recievedExchangePhone=function(){return r.props.extro_info&&r.props.extro_info.frHeChgMe&&2==r.props.extro_info.frHeChgMe.extra.lv},r.inviteComment=function(){if(0==r.props.card.dist)return void(0,q.default)("/contact/invite_comment_list","邀请好友点评","fetch");try{if(confirm("系统会向TA的同事们发送点评邀请，不会泄露您的身份")){var e=r.context.auth_info,t="/sdk/contact/invite_comment?"+V.default.stringify(c({u2:r.props.card.id},e)),n=fetch(t).then(H.default.parse_online_json).then(function(e){(0,X.default)("已邀请成功！")}).catch(alert);(0,ee.default)("请求中",n)}}catch(e){alert(e)}},r.moreComments=function(){var e=0==r.props.card.dist?"我":r.props.card.name,t=r.props.card.encode_mmid?r.props.card.encode_mmid:r.props.card.mmid;(0,q.default)("/contact/comment_list/"+t,e+"收到的点评","fetch")},r.pubService=function(){if(r.props.outApp)return void(0,fe.launch_webview)();(0,q.default)("/service/pub","发布服务",{})},r.moreServices=function(){if(r.props.outApp)return void(0,fe.launch_webview)();var e=r.props,t=e.services,n=e.card;(0,q.default)("/service/list?uid="+n.id,"全部服务",{services:t,card:n})},r.onPubService=function(e){for(var t=r.props,n=t.services,o=t.cursor,a=0;a<n.length;a++)if(n[a]._id==e._id)return void o.select("services",a).set(e);e.uid==r.props.card.id&&r.props.cursor.select("services").unshift(e)},r.onDeleteService=function(e){for(var t=r.props,n=t.services,o=t.cursor,a=0;a<n.length;a++)if(n[a]._id==e._id){o.select("services").splice([a,1]);break}},r.openEditSelfIntroduce=function(){if(r.props.outApp)return void(0,fe.launch_webview)();(0,q.default)("/contact/edit_self_introduce","编辑自我介绍",{uinfo:r.props.uinfo})},r.open_self_intro_detail=function(){if(r.props.outApp)return void(0,fe.launch_webview)();(0,q.default)("/contact/self_introduce_detail","自我介绍",{uinfo:r.props.uinfo})},r.commentFriend=function(){r.props.mystatus.status?(0,D.default)("/contact/add_comment/"+r.props.card.id,"给"+r.props.card.name+"点评"):(0,J.showModalForConfirm)({title:"给"+r.props.ta+"点评需要完善您的实名资料，是否现在完善?",ok:function(){(0,L.completeRealProfile)(L.refreshPageSilent)},ok_text:"去完善",cancel_text:"取消"})},r.openDist3Page=function(){(0,D.default)(r.props.my_show_more_url,"邀请好友")},r.openRelationPath=function(){(0,q.default)("/contact/relation_path/"+r.props.card.mmid,"关系链","fetch")},r.renderMyFriendForm=function(e){if(!r.props.outApp&&0==r.props.card.dist){var t=[],n=function(){(0,q.default)("/contact/add_friend_list","添加好友","fetch")};return e&&t.push(d.default.createElement(T.default,{key:"inapp_contact",title:"我的好友",content:"去加好友",onClick:n,classname:"list-group-item p-x form-cell border-top-0"})),d.default.createElement("ul",{className:"list-group m-b-0"},t)}},r.renderFormCell=function(){if(!r.props.outApp){var e=[];if(0!=r.props.card.dist&&1==r.props.card.in_app){if(r.props.common_fr_info&&r.props.common_fr_info.total>0){return r.props.common_fr_info.cards.slice(0,4).map(function(t,n){e.push(d.default.createElement("div",{className:"d-i-b font-0 m-r-5 media-middle",key:"cmf"+n,onClick:r.openCommonContactlist},d.default.createElement("img",{className:"radius-50 avatar-25",src:t.avatar})))}),e.push(d.default.createElement("div",{key:"cmf",className:"d-i-b font-12 text-orange-hl m-x-5",onClick:r.openCommonContactlist},d.default.createElement("span",{className:"text-orange-hl"},r.props.common_fr_info.total),d.default.createElement("span",{className:"text-black-6"},"个共同好友>"))),d.default.createElement("div",{className:"text-center p-y-5 m-t"},e)}if(3==r.props.card.dist){var t="通过好友认识"+r.props.ta;return e.push(d.default.createElement(T.default,{key:"rel_path",title:t,content:"",onClick:r.openRelationPath,classname:"list-group-item p-x form-cell border-top-0"})),d.default.createElement("div",null,e)}}}},r.renderZd=function(){r.context.auth_info;r.props.outApp},r.goZd=function(){var e=r.props.card;(0,q.default)("/zd/ask?"+V.default.stringify({auid:e.id}),e.name+"的职答","fetch")},r.goZdInfo=function(){r.props.card;(0,q.default)("/zd/my_info","我的职答","fetch")},r.openCard=function(){(0,q.default)("/contact/card/"+r.props.card.id,"二维码名片","fetch")},r.openExperience=function(e){r.props.outApp?r.navToMMFromOutApp():(0,q.default)("/contact/experience/"+r.props.card.id+(r.context.req.query.u?"?share_u="+r.context.req.query.u:"")+(e&&"#"+e),"背景经历",{uinfo:r.props.uinfo,card:r.props.card,ta:r.props.ta})},r.completeMyExperience=function(){(0,q.default)("/contact/experience/"+r.context.auth_info.u,"背景经历","fetch")},r.openTagDetail=function(){r.props.outApp?r.navToMMFromOutApp():(0,q.default)("/contact/tags_list/"+r.props.card.id,r.props.card.name+"的标签","fetch")},r.completeMyTagDetail=function(){window.MaiMai_Native.native_edit_myself_tag&&window.MaiMai_Native.native_edit_myself_tag(null)},r.menuAddMark=function(e){0!=r.props.card.dist&&((0,D.default)("/contact/mark/show?u2="+r.props.card.id,"备注信息"),e.stopPropagation())},r.addMark=function(e){0!=r.props.card.dist&&r.props.card.edit_mark_icon&&((0,D.default)("/contact/mark/show?u2="+r.props.card.id,"备注信息"),e.stopPropagation())},r.gotoEditMyProfile=function(e){(0,q.default)("/contact/detail/"+r.context.auth_info.u+"?edit_mode=1&from=contact_detail","编辑资料","fetch"),e.stopPropagation()},r.goJudge=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();var t=r.context.auth_info.u;if(r.props.srcu_blocked)return void(0,J.showModalForConfirm)({title:"您的账号已被封禁，请与脉脉小助手联系",ok_text:"确定"});(0,L.openJudgePage)(t,r.props.card.judge,r.props.uinfo,r.props.uinfo.figure,"",r.context.auth_info),e.stopPropagation()},r.authDescription=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();r.props.srcu_blocked?(0,J.showModalForConfirm)({title:"您已被封禁, 不能查看TA的资料",ok_text:"确定"}):(0,D.default)("/contact/auth_together/"+r.props.card.id,"认证"),e.stopPropagation()},r.showProfileHistory=function(e){if(r.props.outApp)return void r.navToMMFromOutApp();(0,q.default)("/contact/profile_history/"+r.props.card.id,"职业变更记录","fetch"),e.stopPropagation()},r.moreComment=function(){if(r.props.outApp)r.navToMMFromOutApp();else{var e=0==r.props.card.dist?"我":r.props.card.name,t=r.props.card.encode_mmid?r.props.card.encode_mmid:r.props.card.mmid;(0,q.default)("/contact/comment_list/"+t,e+"收到的点评","fetch")}},r.renderForbiddenView=function(){if(!r.props.canViewAllInfo)return r.props.needUpdateMyInfo?r.props.outApp?d.default.createElement(Q.default,{tips:"由于对方隐私设置，TA的资料不可见"}):d.default.createElement(Q.default,{tips:"您的基本信息尚未完善，不能查看TA的个人资料",buttonTitle:"完善基本信息",onClick:function(){(0,L.completeRealProfile)(L.refreshPageSilent)}}):r.props.blocked?d.default.createElement(Q.default,{tips:"该用户已被封禁"}):r.props.srcu_blocked?0==r.props.card.dist?d.default.createElement(Q.default,{tips:"您的账号已被封禁，请与脉脉小助手联系"}):d.default.createElement(Q.default,{tips:"您已被封禁, 不能查看TA的资料"}):void 0},r.openCommonContactlist=function(){var e="/contact/relation/"+r.props.card.id;(0,q.default)(e,"我和"+r.props.card.name,"fetch")},r.isShowTag=function(){var e=r.context.auth_info,t=r.props,n=t.card,o=t.tag_conf,a=!0;return 0==n.dist&&(a=ne.default.gte(e.version,"4.16.0")&&o&&o.switch&&1==o.switch.my_page),a},r.state={detailBottomHeight:140},s=n,i(r,s)}return s(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var n={title:this.props.card.name+"的脉脉名片",link:window.location.href,imgUrl:this.props.card.avatar,success:function(){},cancel:function(){}},r="";this.props.card.company&&(r+="公司:"+this.props.card.company+"\n",this.props.card.position&&(r+="职位:"+this.props.card.position+"\n")),r+="点击查看更多信息",n.desc=r,t.wx_sdk.onMenuShareAppMessage(n),t.wx_sdk.onMenuShareTimeline(n),t.wx_sdk.onMenuShareQQ(n),t.wx_sdk.onMenuShareQZone(n)}}},{key:"isNewVersion",value:function(){return ne.default.gt(this.context.auth_info.version,"3.33.0")}},{key:"isEditMode",value:function(){return 0==this.props.card.dist&&!!this.props.edit_mode}},{key:"componentDidUpdate",value:function(){this.storeCard()}},{key:"componentDidMount",value:function(){(0,O.bindBroadcast)("User_Info_Changed",this.reloadData),(0,O.bindBroadcast)("merge_user_info",this.reload_user_info),window.edit_contact=this.edit_contact,(0,O.bindBroadcast)("show_edit_mark_icon",this.bc_show_edit_mark_icon),(0,O.bindBroadcast)("pub_comment",this.onPubComment),(0,O.bindBroadcast)("pub_service",this.onPubService),(0,O.bindBroadcast)("delete_service",this.onDeleteService),(0,O.bindBroadcast)("addFriendRequestSent",this.onFriendRequestSent);var e=this.props;window.show_auth_info=this.show_auth_info,window.add_mark=this.menuAddMark,window.share_contact=function(){(0,L.shareContactCard)(JSON.stringify(e.card))},window.save_address=this.save_address,window.changeFriendLv=this.changeFriendLv,window.block_action=this.block_action,window.close_mid=this.close_mid,window.uncollect=this.uncollect,window.collect=this.collect,window.remove_contact=this.remove_contact,window.follow_uid=this.follow_uid,window.unfollow_uid=this.unfollow_uid,window.block_contact_callback=this.block_contact_callback,1==this.context.req.query.autoaddfr&&1!=this.context.req.query.silent&&this.props.card.dist>1&&this.addFriend(),1==this.context.req.query.goblock&&this.block_action(),this.fetchCommentList(),this.fetchInterestContacts(),this.fetchUserTags(),sessionStorage.regfr&&this.props.cursor.select("regfr").set(sessionStorage.regfr)}},{key:"fetchCommentList",value:function(){var e=this;try{var t=this.props.card.encode_mmid?this.props.card.encode_mmid:this.props.card.mmid,n="/contact/comment_list/"+t+"?jsononly=1";fetch(n,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(t){e.props.cursor.select("evaluation_list").set(t.data.evaluation_list)})}catch(e){}}},{key:"fetchInterestContacts",value:function(){var e=this;try{var t=this.props.card.encode_mmid?this.props.card.encode_mmid:this.props.card.mmid,n="/contact/interest_contact/"+t+"?jsononly=1";fetch(n,{credentials:"same-origin"}).then(H.default.parse_online_json).then(function(t){e.props.cursor.select("interestCards").set(t.data)})}catch(e){}}},{key:"componentWillUnmount",value:function(){(0,O.unbindBroadcast)("User_Info_Changed",this.reloadData),(0,O.unbindBroadcast)("merge_user_info",this.reload_user_info),(0,O.unbindBroadcast)("show_edit_mark_icon",this.bc_show_edit_mark_icon),(0,O.unbindBroadcast)("pub_comment",this.onPubComment),(0,O.unbindBroadcast)("pub_service",this.onPubService),(0,O.unbindBroadcast)("delete_service",this.onDeleteService),(0,O.unbindBroadcast)("addFriendRequestSent",this.onFriendRequestSent),(0,ue.clearState)(),window.show_auth_info=null,window.add_mark=this.null,window.share_contact=null,window.changeFriendLv=null,window.save_address=null,window.block_action=null,window.close_mid=null,window.uncollect=null,window.collect=null,window.remove_contact=null,window.follow_uid=null,window.unfollow_uid=null,window.block_contact_callback=null}},{key:"renderContactHeader",value:function(){return d.default.createElement(A.default,c({},this.props,{edit_mode:this.isEditMode(),addMark:this.addMark,goJudge:this.goJudge,changeFriendLv:this.changeFriendLv,requestedExchangePhone:this.requestedExchangePhone(),recievedExchangePhone:this.recievedExchangePhone(),exchangePhone:this.exchangePhone,confirmExchangePhone:this.confirmExchangePhone,authDescription:this.authDescription,showProfileHistory:this.showProfileHistory,openMyMember:this.openMyMember,viewOtherInfos:this.viewOtherInfos}))}},{key:"renderExp",value:function(){var e=[];return 4==this.props.uinfo.profession?(e.push(this.renderEduExp()),e.push(this.renderWorkExp())):(e.push(this.renderWorkExp()),e.push(this.renderEduExp())),e}},{key:"renderWorkExp",value:function(){var e=this,t=this.props.uinfo.work_exp||[];if(0!=t.length){var n=this.props;n.cursor,o(n,["cursor"]);return d.default.createElement(k.default,{key:"work",title:"工作经历",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&t.map(function(t){return d.default.createElement(g.default,c({me:0==e.props.card.dist,ta:e.props.ta,outApp:e.props.outApp,onClick:e.openExperience,inDetail:!0,key:t.id},t,{uid:e.props.card.id,userName:e.props.card.name}))}))}}},{key:"renderEduExp",value:function(){var e=this,t=this.props.uinfo.education||[];if(0!=t.length){var n=this.props;n.cursor,o(n,["cursor"]);return d.default.createElement(k.default,{key:"edu",title:"教育经历",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&t.map(function(t){return d.default.createElement(y.default,c({me:0==e.props.card.dist,ta:e.props.ta,outApp:e.props.outApp,onClick:e.openExperience,inDetail:!0,userName:e.props.card.name,key:t.id},t,{uid:e.props.card.id}))}))}}},{key:"renderTags",value:function(){if(0!=this.props.card.dist&&!this.props.mystatus.tags)return this.props.outApp?void 0:d.default.createElement(k.default,{title:"好友印象",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},d.default.createElement(Q.default,{tips:"您的标签尚未完善，不能查看TA的标签",buttonTitle:"完善标签",onClick:this.completeMyTagDetail}));var e=1==this.props.card.dist&&!this.props.outApp;return 0==this.props.card.dist||this.props.uinfo.weibo_tags&&this.props.uinfo.weibo_tags.length>0||e?d.default.createElement(m.default,c({editMode:this.isEditMode(),onClick:this.openTagDetail,inDetail:!0},this.props)):void 0}},{key:"needShowResumeInvite",value:function(){var e=this.props.card,t=this.context.req,n={job_helper:!0,search_talent:!0,talent_pool:!0,search_talent1:!0,search_talent2:!0,zhaopin_index:!0};return 0!=e.dist&&n[t.query.from]}},{key:"renderBottomButtons",value:function(){var e=this;if(this.props.outApp){if(this.props.cursor.select("regfr").get()){var t=this.context.env.from_pc?"立即联系":"联系他";return d.default.createElement(f.default,{btns:[t],actions:[this.navToMMFromOutApp]})}if(this.context.fconf.ab_conf&&this.context.fconf.ab_conf.exchange_contact_new_button)var t=this.context.fconf.ab_conf.exchange_contact_new_button;else var t="创建名片加入人脉库";var n=this.navToMMFromOutApp;return d.default.createElement(f.default,{btns:[t],actions:[n]})}if(this.props.srcu_blocked||1!=this.props.card.in_app)return null;var r=this.props.card,o=this.props.extro_info||{},a=null,i=null;0==r.dist?this.isNewVersion()?(a="分享脉脉名片",i=function(){(0,L.shareContactCard)(JSON.stringify(e.props.card))}):(a="更新个人资料",i=function(){(0,L.updateMyselfInfo)(L.refreshPageSilent)}):1!=r.dist&&1!=r.pub||1!=r.in_app?1!=r.dist&&(o.frHeWantMe?(a="忽略请求",i=this.ignoreFrRequest):this.props.hasMid?(a="发消息",i=this.openChat):(a="极速联系",i=function(){if(e.props.mystatus.status){var t={u2:e.props.card.id};e.context.req.query.from&&(t.from=e.context.req.query.from),e.context.req.query.fr&&(t.fr=e.context.req.query.fr),e.context.req.query.uh_jid&&(t.jid=e.context.req.query.uh_jid),(0,D.default)("/uh_chat?"+V.default.stringify(t))}else(0,J.showModalForConfirm)({title:"您还未完善资料，完善资料后才能直接联系哦！",ok:function(){(0,L.completeRealProfile)(L.refreshPageSilent)},ok_text:"立即完善",cancel_text:"忍痛放弃"})})):(a="发消息",i=this.openChat);var s=null,c=null;return this.needShowResumeInvite()?(s="邀请投递简历",c=function(){(0,D.default)("/invite_resume?u2="+e.props.card.id,"职位邀请")}):0==r.dist?this.isNewVersion()?(s="隐私策略",c=function(){(0,q.default)("/user_conf/index?choose_circle=true","隐私策略","fetch")}):(s="分享脉脉名片",c=function(){(0,L.shareContactCard)(JSON.stringify(e.props.card))}):1==r.pub?s=1==r.dist?"已关注":"未关注":1==r.dist&&1==r.in_app?this.recievedExchangePhone()?(s="同意交换手机号",c=this.confirmExchangePhone):this.requestedExchangePhone()?s="已申请手机号":this.props.uinfo.mobile?(s="存入本机通讯录",c=this.save_address):(s="申请交换手机号",c=this.exchangePhone):1!=r.dist&&(o.frHeWantMe?(s="通过好友申请",c=function(){(0,L.acceptFriend)(e.props.card.mmid,1,e.context.fconf,e.context.auth_info).then(function(e){(0,L.refreshPageSilent)()})}):o.frMeWantHe?s="已申请好友":(s="＋加好友",c=this.addFriend)),d.default.createElement(f.default,{btns:[a,s],actions:[i,c]})}},{key:"renderComments",value:function(){var e=this,t=this.props,n=t.card,r=t.evaluation_list;if(1==n.in_app){var o=0==n.dist&&this.context.auth_info.u>0?"我":n.name;if(r)var a=r.length>0?"共"+r.length+"人点评过"+o:"还没有人点评过"+o;else var a="点评";var i;this.props.outApp||(i=0==this.props.card.dist&&d.default.createElement(Q.default,{buttonTitle:"邀请好友点评我",onClick:this.inviteComment})||1==this.props.card.dist&&d.default.createElement(Q.default,{buttonTitle:"我要点评"+this.props.card.name,onClick:this.commentFriend})||this.props.card.dist>1&&d.default.createElement(Q.default,{buttonTitle:"邀请"+this.props.ta+"的同事来点评",onClick:this.inviteComment})||null);var s=r&&r.length>5&&"didi_client"!=this.context.req.query.regfr;return d.default.createElement(k.default,{title:a,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},i&&d.default.createElement("div",null,i),r&&d.default.createElement("ul",{className:"list-group m-b-0"},r.slice(0,5).map(function(t,n){return d.default.createElement(E.default,{key:t.id,inDetail:!0,comment_data:t,cursor:e.props.cursor.select("evaluation_list",n),listCursor:e.props.cursor.select("evaluation_list"),index:n})})),s&&d.default.createElement(M.default,{defined_children:!0},d.default.createElement("div",{className:"detail_more_btn m-y-20",onClick:this.moreComments},"全部",r.length,"个点评")))}}},{key:"renderServices",value:function(){var e=this.props,t=e.services,n=e.card;e.uinfo;return t=U.default.sortBy(t,function(e){return-(e.settop*Math.pow(10,26)+e.settop_time*Math.pow(10,16)+e.paynum*Math.pow(10,10)+e._id)}),t.length>0?d.default.createElement(k.default,{title:"服务",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},t.length>0&&d.default.createElement(pe.default,{services:t,card:n}),t.length>3&&d.default.createElement(M.default,{defined_children:!0},d.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:this.moreServices},"全部",t.length,"个服务"))):null}},{key:"renderHeadline",value:function(){var e=0==this.props.card.dist&&this.isEditMode()&&!this.props.outApp;if(!(0!=this.props.card.dist||!this.isEditMode())||this.props.uinfo.headline&&this.props.uinfo.headline.length>0){var t=this.props.uinfo.headline&&this.props.uinfo.headline.length>0?this.props.uinfo.headline:" ";return d.default.createElement(k.default,{title:"自我介绍",btn:e?"编辑":null,onClick:this.openEditSelfIntroduce,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},d.default.createElement("li",{className:"list-group-item p-x",style:Fe.wrapper},this.props.uinfo.headline&&this.props.uinfo.headline.length>0&&d.default.createElement("span",{style:Fe.arrow,className:"arrow-bg"}),d.default.createElement("div",{ref:"self_intro_content",style:Fe.collapse,onClick:this.open_self_intro_detail},t)))}}},{key:"renderAppMessage",value:function(){var e=c({},ae.default);return 0==this.props.card.dist?(this.props.edit_mode?e.top_right_item={title:"完成",callback:"edit_contact()"}:e.top_right_item={title:"编辑",callback:"edit_contact()"},d.default.createElement(Y.default,{msg_to_app:e})):(e.more_items=[],this.props.admin&&e.more_items.push({title:"登录信息(运营专用)",callback:"show_auth_info()"}),0==this.props.card.dist||(1==this.props.card.dist?(e.more_items.push({title:"设置备注/分组",callback:"add_mark()"}),e.more_items.push({title:"分享脉脉名片",callback:"share_contact()"}),e.more_items.push({title:"存入本机通讯录",callback:"save_address()"}),e.more_items.push({title:"更改好友关系",callback:"changeFriendLv()"}),e.more_items.push({title:"屏蔽/举报/拉黑",callback:"block_action()"}),e.more_items.push({title:"解除好友关系",callback:"remove_contact()"})):(e.more_items.push({title:"设置备注/分组",callback:"add_mark()"}),3==this.props.card.dist&&!this.props.is_follow&&this.props.can_follow?e.more_items.push({title:"加入关注列表",callback:"follow_uid()"}):this.props.is_follow&&e.more_items.push({title:"取消关注",callback:"unfollow_uid()"}),e.more_items.push({title:"分享脉脉名片",callback:"share_contact()"}),e.more_items.push({title:"屏蔽/举报/拉黑",callback:"block_action()"}),this.props.hasMid&&e.more_items.push({title:"关闭聊天权限",callback:"close_mid()"}))),0!=this.props.card.dist&&this.props.shouldShowCollection&&(this.props.collected?e.more_items.push({title:"移除收藏",callback:"uncollect()"}):e.more_items.push({title:"收藏人脉卡片",callback:"collect()"})),d.default.createElement(Y.default,{msg_to_app:e}))}},{key:"renderFeedDetailPanel",value:function(){if(this.props.feed_infos)return d.default.createElement(ge.default,{feed_infos:c({},this.props.feed_infos,{job:this.props.uinfo.job_count}),open_data:this.props.open_data,ta:this.props.ta,card:this.props.card})}},{key:"renderFollowPanel",value:function(){return d.default.createElement(ye.default,this.props)}},{key:"renderWorkEditPanel",value:function(){var e=this;return d.default.createElement(k.default,{key:"work",onClick:L.addWorkExp,title:"工作经历",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.uinfo.work_exp.map(function(t){return d.default.createElement(g.default,c({key:t.id},t,{me:!0,noauth:!0,uid:e.props.card.id,userName:e.props.card.name}))}),4!=this.props.uinfo.profession&&0==this.props.uinfo.work_exp.length&&d.default.createElement(Q.default,{onBgClick:L.addWorkExp,tips:"添加工作经历信息",subTips:"吸引更多访客，提升5倍人气",tipsClass:"warning-color"}))}},{key:"renderEduEditPanel",value:function(){var e=this;return d.default.createElement(k.default,{key:"edu",onClick:L.addEduExp,title:"教育经历",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.uinfo.education.map(function(t){return d.default.createElement(y.default,c({key:t.id},t,{me:0==e.props.card.dist,noauth:!0,uid:e.props.card.id,userName:e.props.card.name,isStudent:4==e.props.uinfo.profession}))}),0==this.props.uinfo.education.length&&d.default.createElement(Q.default,{tips:"添加教育经历信息",subTips:"让同窗校友轻松找到你",onBgClick:L.addEduExp,tipsClass:"warning-color"}))}},{key:"renderDomainSkillPanel",value:function(){if(this.isShowTag()){var e=this.props,t=e.user_tags,n=e.cursor,r=e.card;if(t&&0!=t.tags.length){var o=function(){(0,q.default)("/tag/user_tag?"+V.default.stringify({tagu:r.encode_mmid}),r.name+"的职业标签","fetch")};return d.default.createElement(k.default,{key:"domain_skill",title:"职业标签",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},d.default.createElement("div",{className:"p-t-10"},d.default.createElement(Te.default,c({tag_wrap_class:"p-x p-y-10",fetchUserTags:this.fetchUserTags,cursor:n.select("user_tags")},t,{inDetail:!0})),t.count>4&&d.default.createElement(M.default,{defined_children:!0},d.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:o},"全部",t.count,"个职业标签"))))}}}},{key:"renderDomainSkillEditPanel",value:function(){if(this.isShowTag()){var e=this.props,t=e.user_tags,n=e.cursor,r=e.card,o=function(){(0,q.default)("/tag/user_tag?"+V.default.stringify({tagu:r.encode_mmid}),r.name+"的职业标签","fetch")},a=function(){window.MaiMai_Native.native_modify_domain_skill()&&window.MaiMai_Native.native_modify_domain_skill()};return t&&0!=t.tags.length?d.default.createElement(k.default,{key:"domain_skill",onClick:a,title:"职业标签",btn:"编辑",icon_classname:"glyphicon glyphicon-pencil",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},d.default.createElement("div",{className:"p-t-10"},d.default.createElement(Te.default,c({tag_wrap_class:"p-x p-y-10",fetchUserTags:this.fetchUserTags,cursor:n.select("user_tags")},t,{inDetail:!0})),t.count>4&&d.default.createElement(M.default,{defined_children:!0},d.default.createElement("div",{className:"detail_more_btn m-t m-b-20",onClick:o},"全部",t.count,"个职业标签")))):d.default.createElement(k.default,{key:"domain_skill",onClick:a,title:"职业标签",btn:"添加",icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},d.default.createElement(Q.default,{tips:"添加职业标签，让机会找到你",onBgClick:a,tipsClass:"warning-color"}))}}},{key:"renderInterestContacts",value:function(){if("didi_client"!=this.context.req.query.regfr&&this.props.interestCards&&(this.props.outApp||0!=this.props.card.dist)){var e=this.props.outApp?"你可能感兴趣":"看了"+this.props.ta+"的人还看了";return d.default.createElement(k.default,{key:"interest",title:e,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info"},this.props.interestCards.map(function(e){return d.default.createElement(Ce.default,{key:e.id,card:e,from:"contact_detail_interest"})}))}}},{key:"renderOtherEditPanel",value:function(e){return d.default.createElement(we.default,c({},this.props,{readonly:e}))}},{key:"renderDetailBottom",value:function(){return d.default.createElement("div",null,d.default.createElement("div",{style:{height:this.state.detailBottomHeight+"px"}}),d.default.createElement(Oe.default,{avatar:this.props.card.avatar,cshow_url:this.props.cshow_url,updateItemHeight:this.updateItemHeight.bind(this)}))}},{key:"updateItemHeight",value:function(e){this.setState({detailBottomHeight:e}),this.forceUpdate()}},{key:"goToProMember",value:function(){(0,q.default)("/uh_memlist?fr=ent","企业家会员","fetch")}},{key:"renderProMemberCell",value:function(){return d.default.createElement("div",null,d.default.createElement("div",{className:"p-y-5 gray-bg-f2f6f7"}),d.default.createElement("div",{className:"contact_gradient_line"}),d.default.createElement("div",{className:"p-y p-x",onClick:this.goToProMember},d.default.createElement("div",{className:"media-body media-middle"},d.default.createElement("div",{className:"font-16 text-yellow-a48b5f m-b-7"},d.default.createElement("span",{className:"contact_pro_member media-middle m-r-10"}),d.default.createElement("span",{className:"d-i-b media-middle l-h-1 m-t-5"},"企业家俱乐部成员")),d.default.createElement("div",{className:"text-muted"},"年营业额2000万以上企业家会员结成的高价值人脉圈")),d.default.createElement("div",{className:"media-right media-middle"},d.default.createElement("span",{className:"pro_arrow"}))))}},{key:"render",value:function(){var e=this.context,t=e.auth_info,n=e.env;if(this.isEditMode())return this.props.srcu_blocked?d.default.createElement("div",null,d.default.createElement(P.default,{title:"编辑资料"}),this.renderForbiddenView()):d.default.createElement("div",null,this.renderAppMessage(),d.default.createElement(P.default,{title:"编辑资料"}),this.renderContactHeader(),this.renderMyFriendForm(!0),this.renderZd(),4!=this.props.uinfo.profession&&[this.renderWorkEditPanel(),this.renderEduEditPanel()],4==this.props.uinfo.profession&&[this.renderEduEditPanel(),this.renderWorkEditPanel()],this.renderDomainSkillEditPanel(),this.renderHeadline(),this.renderServices(),this.renderTags(),this.renderOtherEditPanel(!1));var r=1==t.u||2==t.u||4==t.u||31==t.u||42==t.u||30180999==t.u;return d.default.createElement("div",null,this.renderAppMessage(),d.default.createElement(P.default,{title:this.props.outApp?this.props.card.name+"的脉脉名片":"企业家主页"}),this.renderContactHeader(),!this.props.blocked&&this.renderMyFriendForm(),!this.props.blocked&&this.renderFormCell(),r&&!this.props.blocked&&!this.props.outApp&&this.renderFollowPanel(),!this.props.blocked&&!this.props.outApp&&this.renderFeedDetailPanel(),!this.props.blocked&&!this.props.outApp&&0!=this.props.card.dist&&this.renderProMemberCell(),!this.props.blocked&&!this.props.outApp&&this.renderZd(),!this.props.blocked&&this.renderExp(),!this.props.blocked&&this.renderDomainSkillPanel(),!this.props.blocked&&this.renderHeadline(),!this.props.blocked&&!this.props.blocked&&this.renderComments(),!this.props.blocked&&!this.props.outApp&&this.renderServices(),!this.props.blocked&&this.renderTags(),!this.props.blocked&&!this.props.outApp&&this.renderOtherEditPanel(!0),this.renderForbiddenView(),!this.props.blocked&&this.renderInterestContacts(),!this.props.blocked&&this.renderBottomButtons(),-1==t.u&&n.mobile&&this.renderDetailBottom())}}]),t}(d.default.Component));Ae.contextTypes={auth_info:d.default.PropTypes.object,req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,env:d.default.PropTypes.object,wx_sdk:d.default.PropTypes.object},Ae.getCacheKey=function(e){return e.req.query.edit_mode?void 0:e.req.pathname+"_key_"},e.exports=Ae;var Fe={collapse:{lineHeight:"22px",overflow:"hidden",paddingTop:"5px",marginRight:"35px",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,color:"#222",WebkitBoxOrient:"vertical"},wrapper:{position:"relative"},arrow:{position:"absolute",width:"13px",height:"16px",right:"10px",top:"50%",marginTop:"-8px"},bottomHeight:{width:"100%",height:"140px"}}},1381:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(166),f=(r(u),n(17)),h=r(f);t.default=e.exports=(c=s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this;if(this.context.env.mobile&&!(this.context.auth_info.u>0))return d.default.createElement("div",null);var t=h.default.filter(this.props.btns,function(e){return e&&e.length>0});if(this.context.env.from_pc){if(this.context.env.renderLeftContainer){var n=t.map(function(t,n){return d.default.createElement("div",{className:"btn btn-xsm btn-secondary btn-block",style:{marginBottom:"15px"},key:n,onClick:e.props.actions[n]},t)});this.context.env.renderLeftContainer(d.default.createElement("div",{className:"m-a-lg"},n))}return d.default.createElement("div",null)}return 2==t.length?d.default.createElement("div",null,d.default.createElement("div",{style:{height:"80px"}}),d.default.createElement("div",{className:"iphoneX"==this.context.env.device?"detail_member_buttons_bg_ipx":"detail_member_buttons_bg"},d.default.createElement("div",{className:"halfWidth p-r-7 fl"},d.default.createElement("span",{onClick:this.props.actions[0]||function(){},style:m.leftBottomBtn,className:"d-i-b btn-radius-26"},t[0])),d.default.createElement("div",{className:"halfWidth p-l-7 fr"},d.default.createElement("span",{onClick:this.props.actions[1]||function(){},style:m.rightBottomBtn,className:"d-i-b btn-radius-26"},t[1])))):1==t.length?d.default.createElement("div",null,d.default.createElement("div",{style:{height:"80px"}}),d.default.createElement("div",{className:"iphoneX"==this.context.env.device?"detail_member_buttons_bg_ipx":"detail_member_buttons_bg"},d.default.createElement("div",{onClick:this.props.actions[0]||function(){},style:m.bottomBtn,className:"d-i-b btn-radius-26"},d.default.createElement("span",{className:this.props.className||""},t[0])))):void 0}}]),t}(d.default.Component),s.contextTypes={env:d.default.PropTypes.object,auth_info:d.default.PropTypes.object},c);var m={leftBottomBtn:{width:"100%",height:"46px",lineHeight:"46px",background:"#D7B77F",color:"#fff",fontSize:"16px",textAlign:"center",cursor:"pointer"},rightBottomBtn:{width:"100%",height:"46px",lineHeight:"46px",background:"#D7B77F",color:"#fff",fontSize:"16px",textAlign:"center",cursor:"pointer"},bottomBtn:{width:"100%",height:"46px",lineHeight:"46px",background:"#D7B77F",color:"#fff",fontSize:"16px",textAlign:"center",cursor:"pointer"}}},1382:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(166),f=(r(u),n(1001)),h=(r(f),n(117)),m=(r(h),n(171)),_=(r(m),n(279)),g=r(_),v=n(46),y=r(v),b=n(164),k=(n(113),n(116)),x=r(k),w=n(15),E=r(w),C=n(50),P=(r(C),n(1075)),N=r(P),M=n(274),O=r(M),j=n(277),T=n(41),S={cardInfor:{padding:"13px 0 0",position:"relative"},head:{background:"#fff",margin:"0 11px 15px",border:"1px solid #e2e2e2",WebkitBoxShadow:"2px 2px 0px #eeeeee",position:"relative",overflow:"auto"},headPC:{background:"#fff",margin:"0 11px 15px",overflow:"auto"},headinfor:{margin:"0 12px",padding:"10px 0 5px 0",color:"#333",position:"relative"},headinfor_connectWay:{margin:"0 12px",color:"#333",position:"relative",padding:"0 0 15px"},dd:{lineHeight:"14px",fontSize:"12px",margin:"3px 0 4px 63px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},authWarning:{background:"url(/static/images/auth/authWarning.png) no-repeat left center",color:"#fa5218",textDecoration:"underline",WebkitBackgroundSize:"14px 14px",paddingLeft:"20px"},identify:{background:"url(/static/images/auth/identifyImg.png) no-repeat left center",WebkitBackgroundSize:"22px 15px",paddingLeft:"22px",height:"15px",marginLeft:"5px"},notIdentify:{background:"url(/static/images/auth/notIdentifyImg.png) no-repeat left center",WebkitBackgroundSize:"22px 15px",paddingLeft:"22px",height:"15px",marginLeft:"5px"},memberIcon:{background:"url(https://maimai.cn/images/icon_member_normal.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon1:{background:"url(/static/images/icon_member_normal1.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon2:{background:"url(/static/images/icon_member_normal2.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},memberIcon3:{background:"url(/static/images/icon_member_normal3.png) no-repeat left center",WebkitBackgroundSize:"16px 14px",paddingLeft:"16px",height:"14px",marginLeft:"3px"},connectWay:{padding:"0 0 15px",overflow:"auto"},connectWay_dt:{float:"none",marginTop:"0px"},connectWay_dd:{overflow:"auto",margin:"4px 0 0 0",color:"#fff",lineHeight:"16px",wordWrap:"break-word",wordBreak:"break-all",fontSize:"12px"},connectWay_label:{display:"block",float:"left",marginRight:"6px"},connectWay_em:{marginRight:"13px"},connectWay_dd_span:{maxWidth:"59%",display:"block",float:"left",wordBreak:"break-all"},companyLogo:{position:"absolute",right:"0",bottom:"12px"},rightTopEditIcon:{height:"25px",position:"absolute",paddingLeft:"20px",top:"10px",right:"10px",zIndex:10}};t.default=e.exports=(c=s=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.log=function(){0!=e.props.card.dist||e.props.edit_mode||(0,j.pingback)("pbuser_info","self_edit","show",e.context.auth_info)},e.openRankDetail=function(){if(!e.props.edit_mode&&!e.props.outApp){var t=e.props.card.encode_mmid?e.props.card.encode_mmid:e.props.card.mmid;(0,y.default)("/contact/rank_detail?u2="+t,e.props.card.name+"的行业影响力","fetch")}},e.openRankOrder=function(){if(!e.props.edit_mode&&!e.props.outApp&&e.props.uinfo.rank_order){var t,n=e.props.uinfo.rank_order,r=n.profession,o=n.major,a="/contact/rank_top_list?"+E.default.stringify({profession:r,major:o});t=o>=0?(0,g.default)(r,o,"|"):(0,g.default)(r,0).profession,(0,y.default)(a,"排行榜-"+t,"fetch")}},e.goCompanyDetail=function(t){t.stopPropagation(),window.location.href.indexOf("regfr=didi_client")>-1||(0,y.default)(e.props.company.company_url,e.props.company.stdname?e.props.company.stdname:"","fetch")},e.goAvatarImage=function(t){if(0==e.props.card.dist)try{window.MaiMai_Native.native_edit_avatar(e.props.card.avatar_large)}catch(e){window.MaiMai_Native.native_edit_avatar()}else window.MaiMai_Native.native_show_avatar(e.props.card.avatar_large);t.stopPropagation()},e.showAddress=function(t){(0,b.showAddress)(e.props.uinfo.companycity,e.props.uinfo.companyaddress),t.stopPropagation()},e.editContactCard=function(t){!e.props.outApp&&e.props.edit_mode&&(t.stopPropagation(),(0,b.editContactCard)())},e.state={hide_banner:!1},e}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.log()}},{key:"shouldComponentUpdate",value:function(e,t){return T.shouldComponentUpdate.apply(this,[e,t])}},{key:"renderProfessionLine",value:function(){var e=x.default.getLine4(this.props.card,this.props.uinfo);if(1==this.props.card.in_app&&1!=this.props.card.pub){var t;return this.props.uinfo.rank_order&&this.props.uinfo.rank_order.order>0&&(t="（排名"+this.props.uinfo.rank_order.order+"）"),0==this.props.card.dist?d.default.createElement("dd",{className:"font-12 m-t-2"},(0,g.default)(this.props.uinfo.profession,this.props.uinfo.major,"｜"),d.default.createElement("span",{onClick:this.openRankDetail},"  影响力 ",d.default.createElement("span",{className:"cursor-pointer"},this.props.card.rank)),t&&d.default.createElement("span",{className:"text-orange-f67200 cursor",onClick:this.openRankOrder},t)):d.default.createElement("dd",{className:"font-12 m-t-2"},(0,g.default)(this.props.uinfo.profession,this.props.uinfo.major,"｜"),"  影响力 ",d.default.createElement("span",null,this.props.card.rank),t&&d.default.createElement("span",{className:"text-orange-f67200 cursor",onClick:this.openRankOrder},t))}return d.default.createElement("dd",{className:"font-12 m-t-2"},e)}},{key:"renderCareerLine",value:function(){var e=x.default.getCareerOrSchoolInfo(this.props.card,this.props.uinfo),t=this.props.edit_mode&&(!this.props.card.company||!this.props.card.position);return t&&(e=4==this.props.uinfo.profession?"添加学校信息":"添加职位信息"),d.default.createElement("dd",{className:"font-12 o-hidden"},d.default.createElement("span",{key:1,className:t&&"warning-color cursor-pointer"||null},e),1==this.props.card.judge&&d.default.createElement("span",{className:"add_v_img_detail"}))}},{key:"renderNameLine",value:function(){return d.default.createElement("dd",{key:"name-line",className:"contact_detail_name",onClick:this.props.addMark},d.default.createElement("span",{key:"name"},this.props.card.name,this.props.card.edit_mark_icon&&!this.props.outApp&&d.default.createElement("span",{key:"mark",className:"font-12"},d.default.createElement("span",{className:"glyphicon glyphicon-pencil"}))))}},{key:"renderOtherInfo",value:function(){var e=this,t=[];if(this.props.uinfo.account&&t.push(d.default.createElement("dd",{key:"account"},d.default.createElement("span",{className:"icon_mai_number_white"},this.props.uinfo.account))),this.props.uinfo.mobile){var n=(0,N.default)(this.props.uinfo.mobile,this.props.uinfo.ccode);t.push(d.default.createElement("dd",{key:"phone",onClick:function(e){(0,b.callPhone)(n),e.stopPropagation()}},d.default.createElement("span",{className:"icon_phone"},n)))}else this.props.uinfo.inc_lv_to_see_mobile&&!this.props.outApp?this.props.recievedExchangePhone?t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{onClick:this.props.confirmExchangePhone,className:"icon_phone cursor-pointer"},"同意交换手机号"))):this.props.requestedExchangePhone?t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{className:"icon_phone"},"已申请交换手机号"))):t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{className:"icon_phone cursor-pointer text-underline",onClick:this.props.exchangePhone},"申请交换手机号"))):t.push(d.default.createElement("dd",{key:"phone"},d.default.createElement("span",{className:"icon_phone"},this.props.uinfo.nomobile)));if(this.props.uinfo.email&&t.push(d.default.createElement("dd",{key:"email",onClick:function(t){(0,b.saveEmail)(e.props.uinfo.email),t.stopPropagation()}},d.default.createElement("span",{className:"icon_email"},this.props.uinfo.email))),this.props.uinfo.companyaddress&&4!=this.props.uinfo.profession)t.push(d.default.createElement("dd",{key:"addr"},d.default.createElement("span",{className:"icon_address",onClick:this.showAddress},this.props.uinfo.companyaddress&&this.props.uinfo.companyaddress.length>0?this.props.uinfo.companyaddress:"")));else{var r=(this.props.uinfo.province||"")+(this.props.uinfo.city||""),o=!1;0==r.length&&(r="未填写",o=this.props.edit_mode),t.push(d.default.createElement("dd",{key:"addr2"},d.default.createElement("span",{className:"icon_address "+(o?"warning-color":"")},r)))}return t}},{key:"renderAvatar",value:function(){var e=this.props.card.avatar;return 0==this.props.card.dist&&this.props.edit_mode&&!this.props.uinfo.figure&&(e="/static/images/icon_default_avatar.png"),d.default.createElement("img",{id:"contact_avatar",className:"avatar-70 radius-50",onClick:this.goAvatarImage,src:e})}},{key:"componentDidMount",value:function(){O.default.isSupportTansShowTitleMenuBar(this.context)&&O.default.setMenuBarStyle({banner_trans:!0})}},{key:"render",value:function(){this.props.card;return d.default.createElement("div",null,O.default.isSupportTansShowTitleMenuBar(this.context)&&d.default.createElement("div",{className:"contact_detail_member_banner",style:{height:"iphoneX"==this.context.env.device?80:64}}),d.default.createElement("div",{className:"p-relative p-x p-t"},d.default.createElement("div",{className:"contact_detail_member_bg"}),d.default.createElement("div",{className:"contact_detail_member_card"},d.default.createElement("div",{onClick:this.editContactCard},0==this.props.card.dist&&!this.props.outApp&&this.props.edit_mode&&d.default.createElement("div",{onClick:function(e){(0,b.editContactCard)(),e.stopPropagation()},style:S.rightTopEditIcon,className:"text-primary"}," 编辑"),d.default.createElement("dl",{key:"dl1",className:"contact_detail_info clearfix"},d.default.createElement("dt",{className:"border-ffe6ca-1 radius-50 fl m-t-2 p-relative"},this.renderAvatar(),1==this.props.memlist.my_card.mem_st&&4==this.props.memlist.my_card.mem_id&&d.default.createElement("div",{className:"position_member3",onClick:this.props.openMyMember},d.default.createElement("span",{className:"cursor-pointer",style:S.memberIcon3}))),this.renderNameLine(),this.renderCareerLine(),this.renderProfessionLine()),d.default.createElement("dl",{key:"dl2",className:"contact_detail_connect_info"},this.props.card.company&&this.props.company&&d.default.createElement("dt",{className:"contact_detail_company_logo"},d.default.createElement("img",{onClick:this.goCompanyDetail,className:"avatar-52 border-radius-8",src:this.props.company.clogo})),this.renderOtherInfo())))))}}]),t}(d.default.Component),s.contextTypes={auth_info:d.default.PropTypes.object,env:d.default.PropTypes.object,req:d.default.PropTypes.object},c)},1383:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),d=r(p),u=n(17),f=(r(u),n(46)),h=r(f),m=n(50),_=r(m),g=n(169),v=r(g),y=n(1079);t.default=e.exports=(c=s=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openFeedDetail=function(){n.setState({left:!n.state.left})},n.zhimaDetail=function(){var e=n.props.open_data?n.props.open_data[25200151]:{status:0,score:0};(0,_.default)("/zhima_score?u2="+e.ouid2,n.props.card.name+"的芝麻信用")},n.tianchengDetail=function(){var e=n.props.open_data?n.props.open_data[25200927]:{status:0,score:0};(0,_.default)("/tiancheng_score?u2="+e.ouid2,n.props.card.name+"的甜橙信用")},n.opendataDetail=function(){(0,h.default)("/contact/opendata_detail?u2="+n.props.card.id,"个人信用","fetch")},n.state={},n}return i(t,e),l(t,[{key:"formatCount",value:function(e){if(e)var t=""+e;return t}},{key:"renderItem",value:function(e,t,n,r,o,a){return d.default.createElement("div",{className:"item l-h-1",key:e,onClick:n>0||a?r:null},d.default.createElement("span",{className:o||""}),d.default.createElement("div",{className:"small text-black-6 m-t"},t,n>99?"99+":n))}},{key:"renderItems",value:function(){var e=[],t=[],n=this.props.feed_infos,r=this.context.fconf,o=this.props.card,a=this.renderItem("my-feed","动态",n.realname_status,function(){return(0,y.openRealNameFeedlist)(r,o)},"dongtai_member_icon");n.realname_status>0?e.push(a):t.push(a);var i=this.renderItem("my-opinion","观点",n.topic,function(){return(0,y.openTopicFeedList)(r,o)},"guandian_member_icon");n.topic>0?e.push(i):t.push(i);var s=this.renderItem("my-article","专栏",n.article,function(){return(0,y.openArticlelist)(o)},"zhuanlan_member_icon");n.article>0?e.push(s):t.push(s);var c=this.renderItem("my-job","职位",n.job,function(){return(0,y.openJoblist)(o)},"zhiwei_member_icon");n.job?e.push(c):t.push(c);var l=this.renderItem("my-comment","点评",n.evaluation,function(){return(0,y.openSendedComments)(o)},"dianping_member_icon");n.evaluation>0?e.push(l):t.push(l);var p=this.renderItem("my-interact","互动",n.interactive,function(){return(0,y.openInteractFeedList)(r,o)},"hudong_member_icon");n.interactive>0?e.push(p):t.push(p),e=e.concat(t),e.splice(3,0,this.renderItem("my-open-data-lst","信用","",this.opendataDetail,"xinyong_member_icon",!0));var u=0;return this.state.left&&(u=-.6*(0,v.default)().width),d.default.createElement("div",{className:"p-y-20 p-relative"},d.default.createElement("div",{className:"item-container",style:{left:u+"px"}},e),!this.state.left&&d.default.createElement("div",{className:"p-t-20 l-h-1 dot font-12"},d.default.createElement("span",{key:"dot1",className:"more_member_icon",onClick:this.openFeedDetail}),d.default.createElement("div",{className:"m-t"},"更多")),this.state.left&&d.default.createElement("div",{className:"p-t-20 l-h-1 dot font-12"},d.default.createElement("span",{key:"dot2",className:"circle_arrow_icon",onClick:this.openFeedDetail}),d.default.createElement("div",{className:"m-t"},"更多")))}},{key:"render",value:function(){return d.default.createElement("div",{className:"feed_detail_panel"},this.renderItems())}}]),t}(d.default.Component),s.contextTypes={fconf:d.default.PropTypes.object},c)},177:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),p=n(1324),d=r(p),u=n(1380),f=r(u),h=n(1114),m=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.card,t=this.context,n=t.auth_info,r=t.req,o=t.env;try{(0,h.analysisExactProfile)(n,r.query,o,e.id)}catch(e){console.error(e)}}},{key:"render",value:function(){var e=this.props.memlist;return e&&e.my_card&&1==e.my_card.mem_st&&4==e.my_card.mem_id?l.default.createElement(f.default,this.props):l.default.createElement(d.default,this.props)}}]),t}(l.default.Component);m.contextTypes={auth_info:l.default.PropTypes.object,req:l.default.PropTypes.object,fconf:l.default.PropTypes.object,env:l.default.PropTypes.object,wx_sdk:l.default.PropTypes.object},m.getCacheKey=function(e){return e.req.query.edit_mode?void 0:e.req.pathname+"_key_"},e.exports=m},686:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),u=r(d),f=n(17),h=r(f),m=n(46),_=r(m),g=n(15),v=r(g),y=n(1116),b=r(y),k=n(1117),x=r(k),w=n(981),E=r(w),C=n(114),P=r(C),N=n(75),M=r(N),O=n(113),j=r(O);t.default=e.exports=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.onReceiveUpdateTag=function(e){if(e){var t=r.props.tags,n=h.default.findIndex(t,function(t){return t.tag==e.tag});n>-1&&t.splice(n,1,e),r.props.cursor.select("tags").set(t),r.forceUpdate()}r.props.inDetail&&r.props.fetchUserTags&&r.props.fetchUserTags()},r.onReceiveAddLike=function(e){var t=r.context.auth_info,n=e.contact,o=r.props.tags,a=h.default.find(o,function(e){return e.tag==n.like.tag});a&&("add"==e.action?(a.my_like=1,a.like_cnt++,a.contacts.unshift(n)):"edit"!=e.action&&"edit_add_cmt"!=e.action||(a.my_cmt=1,a.cmt_cnt+="edit_add_cmt"==e.action?1:0,a.best_cmt?a.best_cmt&&a.best_cmt.src_uid==t.u&&(a.best_cmt.text=n.like.text):a.best_cmt=n.like),r.props.cursor.select("tags").set(o),r.forceUpdate()),r.props.inDetail&&r.props.fetchUserTags&&r.props.fetchUserTags()},r.onReceiveDeleteLike=function(e){var t=r.context.auth_info,n=r.props.tags,o=h.default.find(n,function(t){return t.tag==e.tagName});if(o){o.my_like=0,o.my_cmt=0,o.like_cnt>0&&o.like_cnt--;var a=h.default.findIndex(o.contacts,function(e){return e.like.src_uid==t.u});if(a>=0){o.contacts[a].like.text&&o.cmt_cnt--,o.contacts.splice(a,1)}o.best_cmt&&o.best_cmt.src_uid==t.u&&(o.best_cmt=null),r.props.cursor.select("tags").set(n),r.forceUpdate()}r.props.inDetail&&r.props.fetchUserTags&&r.props.fetchUserTags()},r.deleteLike=function(e){var t=r.props.card,n=r.context.auth_info,o="/tag/unlike_user_tag?"+v.default.stringify(l({tag:e.tag,tagu:t.encode_mmid},n,{jsononly:1})),a=fetch(o,{credentials:"same-origin"}).then(M.default.parse_online_json).then(function(){j.default.sendWebViewBroadcast("broadcast_tag_delete_like",{tagName:e.tag}),console.log("unlike success")}).catch(M.default.toast_error_handler);(0,P.default)("发送中..",a)},r.onLikeClicked=h.default.debounce(function(e){var t=r.props.card,n=r.context.req.query;if(e.my_like,1){var o={fr:n.fr,stat_frm:n.stat_frm,type:n.type,req:n.req,su:n.su,tag:e.tag,tagu:t.encode_mmid};n.u&&n.u>0&&(o.u=n.u),(0,_.default)("/tag/like_user_tag?"+v.default.stringify(o),"认可成功","fetch")}else r.deleteLike(e)},500,!0),r.onDetailClicked=h.default.debounce(function(e){var t=r.props.card,n=r.context.req.query,o={stat_frm:n.stat_frm,type:n.type,req:n.req,su:n.su,tag:e.tag,tagu:t.encode_mmid};n.u&&n.u>0&&(o.u=n.u),(0,_.default)("/tag/tag_detail?"+v.default.stringify(o),r.props.card.name+"的职业标签","fetch")},500,!0),r.isCanLike=function(e){var t=r.context.auth_info,n=r.props,o=n.same_workexp,a=n.u2_tags,i=n.entrepreneur,s=n.card,c=e.my_like||o||!!h.default.find(a,function(t){return e.tag==t})||i||s.lv>=1;return-1!=t.u&&t.u!=e.uid||(c=!1),c},i=n,a(r,i)}return i(t,e),p(t,[{key:"componentDidMount",value:function(){j.default.bindBroadcast("broadcast_tag_delete_like",this.onReceiveDeleteLike),j.default.bindBroadcast("broadcast_tag_add_like",this.onReceiveAddLike),j.default.bindBroadcast("broadcast_tag_update",this.onReceiveUpdateTag)}},{key:"renderCell",value:function(e){var t=this,n=this.isCanLike(e);return u.default.createElement(b.default,{key:e.tag,tag:e,canLike:n,inDetail:this.props.inDetail,tag_wrap_class:this.props.tag_wrap_class,onLikeClicked:n?function(){t.onLikeClicked(e)}:function(){},onDetailClicked:function(){t.onDetailClicked(e)}})}},{key:"renderCellB",value:function(e){var t=this,n=this.isCanLike(e);return u.default.createElement(x.default,{key:e.tag,tag:e,canLike:n,inDetail:this.props.inDetail,tag_wrap_class:this.props.tag_wrap_class,onLikeClicked:n?function(){t.onLikeClicked(e)}:function(){},onDetailClicked:function(){t.onDetailClicked(e)}})}},{key:"renderTagBanner",value:function(){if(this.context.req.query.tagbanner&&6!=this.props.mycard.id){var e=this.props,t=e.card,n=e.mycard,r=2==t.gender?"她":"他";return u.default.createElement("div",{className:"domain_skill_tag_banner_bg p-t-20 p-b"},u.default.createElement("div",{className:"text-center font-0"},u.default.createElement("div",{className:"d-i-b clearfix m-l-10 p-relative"},u.default.createElement("div",{className:"domain_skill_banner_avatar fl"},u.default.createElement("img",{className:"avatar-45 radius-50",src:n.avatar})),u.default.createElement("div",{className:"domain_skill_banner_avatar fl"},u.default.createElement("img",{className:"avatar-45 radius-50",src:t.avatar})),u.default.createElement("div",{className:"tag_auth_icon tag_auth_icon_position"}))),u.default.createElement("div",{className:"font-18 font-bold text-center text-white m-t"},"可以帮",t.name,"一个忙吗？"),u.default.createElement("div",{className:"font-15 text-center text-white"},"认可并评价",r,"，帮",r,"吸引高达1.8倍的职业人脉。"))}}},{key:"render",value:function(){var e=this,t=this.props.card.id>55515068&&this.props.card.id%2!=0;return u.default.createElement("div",null,!this.props.inDetail&&u.default.createElement(E.default,{title:this.props.card.name+"的职业标签"}),!this.props.inDetail&&this.renderTagBanner(),!t&&this.props.tags.map(function(t){return e.renderCell(t)}),t&&this.props.tags.map(function(t){return e.renderCellB(t)}))}}]),t}(u.default.Component),s.contextTypes={req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,auth_info:u.default.PropTypes.object,env:u.default.PropTypes.object},c)}});