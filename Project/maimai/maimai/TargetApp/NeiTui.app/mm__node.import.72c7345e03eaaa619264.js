webpackJsonp([112],{1542:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(76),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(1),c=n(41),l=(n(50),n(46)),s=n(75),u=s.parse_online_json,d=s.toast_error_handler,f=n(15),p=n(270),h=a.createClass({displayName:"HunterChanceCard",mixins:[c],contextTypes:{fconf:a.PropTypes.object,auth_info:a.PropTypes.object,req:a.PropTypes.object},gotoContact:function(){var e=this.props.contact;e.mmid&&(l("/contact/detail/"+(e.encode_mmid||e.mmid)+"?from="+this.props.from,"人脉详情","fetch"),this.ping("contact_detail",e.mmid,"hunter_chances",0))},addFriend:function(e){var t=this.props,n=t.contact,r=t.cursor,a=this.context,c=a.fconf,l=a.auth_info;if(e.stopPropagation(),2==n.done)(0,i.default)("请求已发送，请耐心等待对方回复~"),this.ping("add_friend_block",n.mmid,"hunter_chances",0);else{var s=c.online_url+"talent/v3/hunter/big_hr_addfr?"+f.stringify(o({uid2:n.mmid},l));fetch(s).then(u).then(function(e){console.log(e),r.select("done").set(2),(0,i.default)(e.ok_msg)}).catch(function(e){throw e}).catch(d),this.ping("add_friend",n.mmid,"hunter_chances",0)}},openChat:function(e){var t=this.props,n=t.contact,r=t.cursor,a=this.context,c=a.fconf,l=a.auth_info;if(e.stopPropagation(),2==n.done)(0,i.default)("请求已发送，请耐心等待对方回复~"),this.ping("open_chat_block",n.mmid,"hunter_chances",0);else{var s=c.online_url+"talent/v3/hunter/big_hr_ask?"+f.stringify(o({uid2:n.mmid},l));fetch(s).then(u).then(function(e){console.log(e),r.select("done").set(2),MaiMai_Native.native_chat&&MaiMai_Native.native_chat("",n.mmid)}).catch(function(e){throw e}).catch(d),this.ping("open_chat",n.mmid,"hunter_chances",0)}},ping:function(e,t,n,r){var i=this.context,a=i.auth_info,c=i.fconf;if(e)try{var l=o({u:a.uid,act:e,act_id:t,fr:n,fr_id:r},a),s=c.online_url+"job/v3/ping_act?"+f.stringify(l);fetch(s,{credentials:"same-origin"})}catch(e){}},render:function(){var e=this.props.contact,t=void 0;return console.log(e),t=1==e.dist?a.createElement("div",{className:"voidBlueBtnM small",style:2==e.done?g.invalidBtn:g.noPaddingRight,onClick:this.openChat},e.done>0?"已询问":"询问工作机会"):a.createElement("div",{className:"voidBlueBtnM small",style:2==e.done?g.invalidBtn:g.noPaddingRight,onClick:this.addFriend},e.done>0?"已询问":"询问工作机会"),a.createElement(p,{contact:e,onClick:this.gotoContact,hideDist:!1},t)}}),g={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},noPaddingRight:{marginRight:"-10px",marginTop:"6px",width:90},invalidBtn:{padding:"5px 7px",border:"1px solid #989898",color:"#989898",borderRadius:2,width:90,lineHeight:"20px",textAlign:"center",marginRight:"-10px",marginTop:"6px"}};e.exports=h},870:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(15),f=o(d),p=n(75),h=n(981),g=o(h),m=n(1542),_=o(m),v=n(165),y=o(v),b=n(1047),x=o(b),j=n(1),P=(n(50),n(982));t.default=e.exports=(l=c=function(e){function t(){var e,n,o,a;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.loadMore=function(){var e=o.props.cursor;o.refs.loader.bindRequest(function(){return t.loadData(o.context,o.nextPage).then(function(t){o.nextPage++;var n=t.data;e.select("userlist").concat(n.userlist),e.select("nulltext").set(n.nulltext),e.select("remain").set(n.remain)})})},a=n,i(o,a)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.nextPage=1}},{key:"render",value:function(){var e=this.props,t=e.cursor,n=e.userlist,o=e.nulltext,r=void 0;return 0==n.length&&(r=j.createElement(x.default,{tips:o||"暂无合适的招聘者推荐给您~",onClick:function(){}})),j.createElement("div",null,j.createElement(g.default,{title:"为您推荐的招聘者"}),r,j.createElement(P,{loadMore:this.loadMore,hasMore:this.props.remain>0,loader:j.createElement(y.default,{ref:"loader",reload:this.loadMore,cursor:t.select("loading_status")})},j.createElement("div",{className:"panel panel-default"},j.createElement("ul",{className:"list-group"},n.map(function(e,n){return j.createElement(_.default,{key:e.id,cursor:t.select("userlist",n),contact:e})})))))}}],[{key:"loadData",value:function(e,t){var n=e.req,o=n.query,r=n.pathname+"?"+f.default.stringify(s({page:t,jsononly:1},o));return fetch(r,{credentials:"same-origin"}).then(p.parse_online_json)}}]),t}(j.Component),c.contextTypes={auth_info:j.PropTypes.object,req:j.PropTypes.object,fconf:j.PropTypes.object},l)}});