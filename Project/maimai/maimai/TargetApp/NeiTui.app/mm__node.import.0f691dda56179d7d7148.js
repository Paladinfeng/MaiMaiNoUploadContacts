webpackJsonp([100],{1550:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=i(1e3),s=n(a),o=i(77),c=n(o),l=i(167),d=i(164),u=i(995),p=n(u),f=i(113),m=i(76),h=n(m),g=i(288),v=n(g),k=i(992),y=i(284),_=n(y),b=i(78),x=n(b),E=i(1),C=i(41),w=(i(171),i(90)),M=i(50),N=i(46),B=i(75),T=B.parse_online_json,D=B.toast_error_handler,P=i(15),j=(i(282).format_for_message,E.createClass({displayName:"NewTaskCardService",mixins:[C],contextTypes:{fconf:E.PropTypes.object,auth_info:E.PropTypes.object,req:E.PropTypes.object},cardClick:function(e){(({10:this.groupMid,12:this.inviteMid,6:this.spreadMid,1:this.frMid,3:this.recMid,4:this.transMid,8:this.inclvMid,1e4:this.props.updateMyselfInfo,2000001:this.frMid})[this.props.task.type]||this.iconClick)(e)},avatarClick:function(e){var t=this.props.task.icon_mmid;1e4==this.props.task.type?this.props.updateMyselfInfo():t?this.iconClick(e):({10:this.groupDetail,12:this.groupDetail,6:this.openCardUrlForJob}[this.props.task.type]||this.iconClick)(e)},formatBottomText:function(){var e=this.props.task;if(e.type>2e6)return"查看";switch(e.type){case 1:return"通过";case 3:return"引荐";case 4:return"通过";case 5:return"投递";case 6:return"分享";case 8:return"通过";case 12:return"加入";case 1e4:return"完善";default:return"通过"}},formatCompleteBottomText:function(){var e=this.props.task;if(e.type>2e6)return"已读";switch(e.type){case 1:return"已通过";case 3:return"已引荐";case 4:return"已通过";case 5:return"已投递";case 6:return"已分享";case 8:return"已通过";case 12:return"已加入";case 1e4:return"已完善";default:return"已通过"}},ignoreTask:function(){var e=this;(0,k.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},openCardUrlForJob:function(e){var t=this.props.task;M(t.card_url,"职位详情")},frMid:function(e){var t="/user_conf/fr_mid?src=list&task_id="+this.props.task.id;N(t,"好友申请","fetch")},inclvMid:function(e){var t="/user_conf/inclv_mid?src=list&task_id="+this.props.task.id;N(t,"好友申请","fetch")},recMid:function(e){var t="/user_conf/rec_mid?src=list&task_id="+this.props.task.id;N(t,"求引荐好友","fetch")},transMid:function(e){var t="/user_conf/trans_mid?src=list&task_id="+this.props.task.id;N(t,"转达好友申请","fetch")},groupMid:function(e){var t="/user_conf/group_mid?task_id="+this.props.task.id;N(t,"加群申请","fetch")},inviteMid:function(e){var t="/user_conf/invite_mid?task_id="+this.props.task.id;N(t,"群邀请","fetch")},spreadMid:function(e){var t="/user_conf/spread_mid?task_id="+this.props.task.id;N(t,"求分享职位","fetch")},groupDetail:function(e){var t="/group?gid="+this.props.task.mid;M(t)},iconClick:function(e){e.stopPropagation();var t=this.props.task,i=t.icon_mmid,n=t.bktoken,r={from:"tasklist"};n&&(r.bktoken=n);var a="/contact/detail/"+i+"?"+P.stringify(r);N(a,"人脉详情","fetch")},ignore:function(e){e&&e.stopPropagation();var t=this.props,i=t.task,n=t.cursor,a=t.index,s=this.context,o=s.fconf,c=s.auth_info,l=o.online_url+"user/v3/ignore_task?"+P.stringify(r({id:i.id,type:i.type},c));fetch(l).then(T).then(function(){(0,h.default)("已忽略"),(0,f.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:2})}).catch(function(e){throw n.select("tasks","requests",a).select("done").set(0),e}).catch(D)},addFriend:function(){var e=this;this.props.mystatus.status?c.default.popup(E.createElement(s.default,{onChoose:function(t){e.sendRequest({lv:t})}})):(0,l.showModalForConfirm)({title:"您完善个人信息后才能加好友",ok_text:"去完善",ok:function(){(0,d.completeRealProfile)(d.refreshPageSilent)},cancel_text:"取消"})},recommendFriend:function(){var e=this,t=this.props.task,i="向"+t.trg_name+"说明引荐"+t.src_name+"的理由（不少于5个字）";c.default.popup(E.createElement(p.default,{title:"填写转达理由（必填）",placeholder:i,checkbox:"同时拉个群聊聊(更真诚可信哦~)",ok:function(i,n){if(i.length<5)return void alert("转达理由不能少于5个字");c.default.dismiss(),e.sendRequest({attach:i},function(e){n&&(0,d.startGroupChat)(t.mmids)})}}))},increaseFriendLevel:function(){var e=this,t=this.props.task;t.confirm&&0==t.confirm.post?(0,l.showModalForConfirm)({title:t.confirm.text,ok_text:"确定",ok:function(){e.sendRequest()},cancel_text:"取消"}):this.sendRequest()},sendRequest:function(e,t){var i=this.props,n=i.cursor,a=i.task,s=i.index,o=this.context,c=o.fconf,l=o.auth_info;e=e||{};var d=c.online_url+"user/v3/complete_task?"+P.stringify(r({id:a.id,type:a.type},l,e));fetch(d).then(T).then(function(e){a.type<2e6&&((0,h.default)("已通过"),(0,f.sendWebViewBroadcast)("task_mid_is_done",{id:a.id,done:1})),t&&t(e)}).catch(function(e){throw n.select("tasks","requests",s).select("done").set(0),e}).catch(D)},goContactDetail:function(){var e=this.props.order;(0,x.default)(e.ucard.id,this.context)},goServiceDetail:function(e){N("/service/detail?"+P.stringify({id:e,from:"myorders"}),"服务详情","fetch")},goOrderDetail:function(e){N("/service/order_detail?orderid="+e,"订单详情","fetch")},goUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";N(e,t,"fetch")},componentDidMount:function(){},componentWillUnmount:function(){},updateTaskState:function(e){6==this.props.task.type&&this.props.task.id==e&&(0,f.sendWebViewBroadcast)("task_mid_is_done",{id:e,done:1})},spreadJob:function(){2==this.props.task.job.status?(0,h.default)("该职位已过期"):(0,d.spreadJob)(this.props.task)},complete:function(e){e.stopPropagation();var t=this.props.task;1e4==t.type?this.props.updateMyselfInfo():1==t.type?this.addFriend():3==t.type?this.recommendFriend():6==t.type?this.spreadJob():8==t.type?this.increaseFriendLevel():4==t.type?this.addFriend():2000001==t.type?this.frMid():this.sendRequest()},renderBottomButtons:function(){var e=this.props.task;e.type;return 1e4!=e.type?e.type>2e6?E.createElement("div",{className:"text-right"},E.createElement("span",{className:"text-center"},E.createElement("button",{onClick:this.cardClick,className:"voidBlueBtnM small white-bg"},"查看"))):E.createElement("div",{style:{width:"92px"}},E.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},E.createElement("img",{style:F.dealImg,src:"/static/images/wrong.png"})),E.createElement("div",{style:{float:"left"},onClick:this.complete},E.createElement("img",{style:F.dealImg,src:1==e.type||8==e.type||3==e.type||4==e.type?"/static/images/right_A.png":"/static/images/right_B.png"}))):E.createElement("div",{className:"text-right"},E.createElement("span",{className:"text-center"},E.createElement("button",{onClick:this.complete,className:"voidBlueBtnM small white-bg"},"完善")))},renderDoneArea:function(){var e=this.props.task;return E.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():e.type>2e6?"已读":"已忽略")},render:function(){var e=this,t=(this.context.auth_info,this.props.order);(0,v.default)("small","text-muted");return"eval-icon",E.createElement(_.default,{component:"li",className:"list-group-item",pressDelay:800},E.createElement("div",{className:"media list-group-item-heading list-group-item-text"},E.createElement("div",{className:"media-left media-middle"},E.createElement("img",{style:F.avatar,src:t.ucard.avatar,onClick:this.goContactDetail})),E.createElement("div",{className:"media-body media-middle",onClick:function(){e.goUrl(t.btn_url,"订单详情")}},E.createElement("div",{style:F.name},E.createElement("div",{style:F.namestr},t.service.title)),E.createElement("div",{style:F.line1,className:"text-muted small lineClamp1"},E.createElement(w,{text:t.ucard.name+" | "+t.ucard.career,support_dref:!0}),1==t.ucard.judge&&E.createElement("span",{className:"add_v_img"})),!1),E.createElement("div",{className:"media-right media-middle"},E.createElement("button",{onClick:function(){e.goUrl(t.btn_url,"订单详情")},className:"voidBlueBtnService small white-bg"},t.btn))),E.createElement("div",{className:"lineClamp2 font-13",style:F.addTxt,onClick:function(){e.goUrl(t.btn_url,"订单详情")}},E.createElement("div",{className:"remind-icon"},E.createElement("span",null,t.st_desc))))}})),F={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},oneButton:{display:"inline-block",width:"60px",paddingLeft:4,paddingRight:4},avatar:{width:52,height:52},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},test:{background:"red"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"62px",marginTop:7}};e.exports=j},893:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a,s,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(1003),l=(n(c),i(1063)),d=(n(l),i(1)),u=n(d),p=i(981),f=n(p),m=(i(113),i(1550)),h=n(m),g=i(271),v=n(g);i(75),i(17);t.default=e.exports=(s=a=function(){function e(){r(this,e)}return o(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"reloadOrders",value:function(){}},{key:"render",value:function(){var e=this.props.myorders;return u.default.createElement("div",null,u.default.createElement(f.default,{title:"全部订单"}),u.default.createElement(v.default,{title:"进行中订单",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"},u.default.createElement("ul",{className:"list-group"},e.active_orders.map(function(e,t){return u.default.createElement(h.default,{order:e})}))),u.default.createElement(v.default,{title:"已完成订单",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"},u.default.createElement("ul",{className:"list-group"},e.done_orders.map(function(e,t){return u.default.createElement(h.default,{order:e})}))))}}]),e}(),a.contextTypes={auth_info:u.default.PropTypes.object},s)}});