webpackJsonp([56],{1078:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=r(75),i=o(a),l=r(114),s=o(l),c=r(15),u=o(c),f=r(76),p=o(f);e.exports.collect=function(e,t,r,o){var a="/sdk/collection/add?"+u.default.stringify(n({target:t,type:r},e)),l=fetch(a,{credentials:"same-origin"}).then(i.default.parse_online_json).then(function(e){(0,p.default)("收藏成功"),o&&o(e)}).catch(i.default.toast_error_handler);(0,s.default)("收藏中...",l)},e.exports.uncollect=function(e,t,r,o){var a="/sdk/collection/remove?"+u.default.stringify(n({target:t,type:r},e)),l=fetch(a,{credentials:"same-origin"}).then(i.default.parse_online_json).then(function(e){(0,p.default)("移出成功"),o&&o(e)}).catch(i.default.toast_error_handler);(0,s.default)("移出收藏中...",l)}},1469:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=r(1),f=o(u),p=r(90),d=o(p),h=r(284),y=o(h),m=r(46),_=o(m),g=r(50),b=o(g),v=r(41),w=o(v),E=r(999);t.default=e.exports=(s=l=function(e){function t(){var e,r,o,i;n(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return r=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.openDetail=function(e){if(e.target==o.refs.avatar&&o.props.mmid)return void(0,_.default)("/contact/detail/"+o.props.mmid+"?from=CollectionItem","人脉详情","fetch");o.props.target_url?(0,b.default)(o.props.target_url,o.props.target_title):"contact"==o.props.type?(0,_.default)("/contact/detail/"+o.props.target+"?from=CollectionItem","人脉详情","fetch"):"feed"==o.props.type?o.props.content&&o.props.content.length>250?(0,_.default)("/article/detail?fid="+o.props.target,"文章详情","fetch"):E(o.props.target):"gossip"==o.props.type&&window.MaiMai_Native.native_gossip_detail(o.props.target)},i=r,a(o,i)}return i(t,e),c(t,[{key:"render",value:function(){var e=[];if(this.props.image&&e.push(f.default.createElement("div",{key:1,className:"conImg"},f.default.createElement("img",{src:this.props.image}))),this.props.content){var t=this.props.image?"conTxt":"conTxtLeft";e.push(f.default.createElement("div",{key:2,className:t},f.default.createElement(d.default,{text:this.props.content})))}return f.default.createElement(y.default,{component:"div",className:"collectItem borderBottom clearfix",onTap:this.openDetail,onPress:this.props.wantDelete,pressDelay:800},f.default.createElement("dt",{key:1},f.default.createElement("img",{ref:"avatar",className:"radius-50",src:this.props.avatar})),f.default.createElement("dd",{key:2},f.default.createElement(d.default,{text:this.props.title})),f.default.createElement("dd",{key:3,className:"collectCon clearfix"},e),f.default.createElement("dd",{key:4,className:"collectTime"},this.props.time))}}]),t}(f.default.Component),l.mixins=[w.default],s)},785:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),f=r(1),p=o(f),d=r(1469),h=o(d),y=r(981),m=o(y),_=r(165),g=o(_),b=r(15),v=o(b),w=r(75),E=o(w),O=r(992),j=r(1078),x=r(17),k=o(x),P=r(982);t.default=e.exports=(s=l=function(e){function t(){var e,r,o,i;n(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return r=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.loadMore=function(){o.refs.loader.bindRequest(function(){var e="/collection/list?"+v.default.stringify({before_id:o.props.history.before_id,count:40,jsononly:1});return fetch(e,{credentials:"same-origin"}).then(E.default.parse_online_json).then(function(e){o.props.cursor.select("history","before_id").set(e.data.history.before_id),o.props.cursor.select("history","more").set(e.data.history.more),o.props.cursor.select("history","items").concat(e.data.history.items)})})},o.wantDelete=function(e){(0,O.showListDialog)("",JSON.stringify(["   移除收藏"]),function(t){(0,j.uncollect)(o.context.auth_info,e.target,e.type,function(){var t=k.default.findIndex(o.props.history.items,function(t){return t.target==e.target});o.props.cursor.select("history","items").splice([t,1])})})},i=r,a(o,i)}return i(t,e),u(t,[{key:"renderEmpty",value:function(){var e=this.props.history;if(!e||!e.items||0==e.items.length)return p.default.createElement("div",{className:"nullList"},"列表为空")}},{key:"render",value:function(){var e=this;return p.default.createElement("div",null,p.default.createElement(m.default,{title:"我的收藏"}),p.default.createElement(P,{hasMore:this.props.history.more>0,loadMore:this.loadMore,loader:p.default.createElement(g.default,{ref:"loader",reload:this.loadMore,cursor:this.props.cursor.select("loading_status")})},this.props.history.items.map(function(t){return p.default.createElement(h.default,c({},t,{wantDelete:function(){return e.wantDelete(t)},key:t.target}))})),this.renderEmpty())}}]),t}(p.default.Component),l.contextTypes={auth_info:p.default.PropTypes.object},s)}});