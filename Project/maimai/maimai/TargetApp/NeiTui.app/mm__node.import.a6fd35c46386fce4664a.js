webpackJsonp([123],{1166:function(e,t,o){"use strict";var i=o(1),a=o(41),n=o(984),s=i.createClass({displayName:"CommonBtnCard",mixins:[a],render:function(){var e=this.props.children;return i.createElement("li",{className:"list-group-item"},i.createElement("div",{className:"media list-group-item-heading list-group-item-text",onClick:this.props.onClick},i.createElement("div",{className:"media-left"},i.createElement("img",{className:"media-object",style:r.avatar,src:this.props.icon})),i.createElement("div",{className:"media-body"},i.createElement("div",{style:n.margin("10px","0px","0px","0px")},i.createElement("span",null,this.props.content),this.props.desc&&i.createElement("span",{className:"text-muted small"},this.props.desc))),e&&i.createElement("div",{style:r.children,className:"media-right"}," ",e," ")))}}),r={children:{paddingTop:5,paddingRight:5},avatar:{width:"35px",height:"35px"}};e.exports=s},853:function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},n=o(1),s=i(n),r=o(994),l=(i(r),o(981)),c=i(l),d=o(75),f=i(d),p=o(76),u=i(p),m=o(15),h=i(m),_=o(114),v=i(_),g=o(113),w=o(46),M=i(w),y=o(1166),j=i(y),N=o(983),b=i(N),x=o(272),C=i(x),E=o(17),k=i(E);e.exports=s.default.createClass({displayName:"exports",contextTypes:{auth_info:s.default.PropTypes.object,fconf:s.default.PropTypes.object},componentDidMount:function(){document.body.style.background="#f9f9f9",window.onVocationChoosed=this.onVocationChoosed,window.changeProfessionMajor=this.changeProfessionMajor,window.changeArea=this.changeArea,window.refresh_page=this.refresh_page,window.close_page=this.close_page,window.onProfessionMajorChoosed=this.onProfessionMajorChoosed,(0,g.bindBroadcast)("article_pm_feed_follow",this.onReceiveResult)},componentWillUnmount:function(){document.body.style.background="#f9f9f9",(0,g.unbindBroadcast)("article_pm_feed_follow")},doRequest:function(e,t){var o=this.context,i=o.auth_info,n=o.fconf,s=n.online_url+"user/v3/update?"+h.default.stringify(a({},i)),r=fetch(s,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h.default.stringify(k.default.extend(e,i))}).then(f.default.parse_online_json).then(function(){t()}).catch(f.default.toast_error_handler);(0,v.default)("设置中...",r)},onReceiveResult:function(e){var t=this.props.cursor.select("cells",function(t){return void 0!==e.dist?"人脉"==t.line1:t.profession==e.profession&&t.major==e.major});if(t&&t.get())t.select("selected").set(e.follow);else if(e.cell){var o=2;k.default.each(this.props.cursor.select("cells").get(),function(e,t){e.selected&&(o=t+1)}),this.props.cursor.select("cells").splice([o,0,e.cell])}var i=this.props.cursor.select("professions",function(t){return t.id==e.profession});if(i&&i.get())if(e.follow)i.select("majors").push({id:e.major});else{var a=k.default.filter(i.get("majors"),function(t){return t.id!=e.major});i.select("majors").set(a)}else e.follow&&this.props.cursor.select("professions").push({majors:[{id:e.major}],id:e.profession})},more:function(){if(window.MaiMai_Native.native_choose_vocation){var e={professions:this.props.professions},t=JSON.stringify(e);window.MaiMai_Native.native_choose_vocation_open_url?window.MaiMai_Native.native_choose_vocation_open_url(t,"https://maimai.cn/article/pm_feed"):window.MaiMai_Native.native_choose_vocation&&window.MaiMai_Native.native_choose_vocation(t,"onVocationChoosed")}},onVocationChoosed:function(){window.MaiMai_Native.native_priority_changed&&window.MaiMai_Native.native_priority_changed(),location.reload()},onItemClicked:function(e){if("更多"==e.line1)return void this.more();var t={follow:e.selected,disable_cancel:e.only_can_select};void 0!==e.profession&&(t.p=e.profession),void 0!==e.major&&(t.m=e.major),"好友"==e.line1&&(t.dist=1),"人脉"==e.line1&&(t.dist=2),(0,M.default)("/article/pm_feed?"+h.default.stringify(t),e.line1,"fetch")},changeProfessionMajor:function(){if(window.MaiMai_Native.native_choose_vocation){var e={professions:this.props.user_pc?this.props.user_pc:[]},t=JSON.stringify(e);window.MaiMai_Native.native_choose_vocation&&window.MaiMai_Native.native_choose_vocation(t,"onProfessionMajorChoosed",!1)}},changeArea:function(){(0,M.default)("/user_conf/choose_city","设置优先关注地区","fetch")},onProfessionMajorChoosed:function(e){var t=JSON.parse(e),o={infos:JSON.stringify({profession:t.profession_id,major:t.major_id,stags:""})};this.doRequest(o,function(){(0,u.default)("修改成功"),(0,g.sendWebViewBroadcast)("action.refresh.myself.fromweb",null),location.reload()})},refresh_page:function(){location.reload()},close_page:function(){window.MaiMai_Native.close_native("",!0)},renderClientMsg:function(){var e=C.default;return e.more_items=[],e.more_items.push({title:"设置我的行业方向",callback:"changeProfessionMajor()"}),e.more_items.push({title:"设置优先关注地区",callback:"changeArea()"}),e.more_items.push({title:"刷新",callback:"refresh_page()"}),e.more_items.push({title:"关闭",callback:"close_page()"}),s.default.createElement(b.default,{msg_to_app:e})},render:function(){var e=this,t=k.default.map(this.props.cells,function(t){return s.default.createElement(j.default,{key:t.line1+t.line2,icon:t.avatar,content:t.line1,desc:t.line2?" ("+t.line2+")":"",onClick:function(){e.onItemClicked(t)}},t.selected&&s.default.createElement("div",{className:"text-primary small",style:P.rightTxt},"已关注"))});return s.default.createElement("div",null,this.renderClientMsg(),s.default.createElement(c.default,{title:"关注行业动态"}),s.default.createElement("div",{className:"m-t-md m-b m-l text-muted"},"我关注的行业动态"),t)}});var P={rightTxt:{marginRight:"-15px",marginTop:"6px",display:"inline-block",width:"50px"}}}});