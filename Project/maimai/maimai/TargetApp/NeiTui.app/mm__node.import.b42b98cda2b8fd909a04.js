webpackJsonp([127],{1117:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(1),l=function(e){return e&&e.__esModule?e:{default:e}}(c);t.default=e.exports=function(e){function t(){var e,a,i,o;n(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.renderTagLike=function(){var e=i.props,t=e.tag,a=e.canLike,n=e.onLikeClicked,r=t.contacts.slice(0,a?1:3),o=1==t.my_cmt?"tag_go_more_icon":1==t.my_like?"tag_go_comment_icon":"like_tag_icon",c=function(e){e.stopPropagation(),n()};return l.default.createElement("div",{className:"media-right p-l-0 media-middle"},l.default.createElement("div",{className:"domain_skill_tag_like_wrap"},l.default.createElement("div",{className:"d-i-b text-info font-12 media-middle m-r-10"},t.like_cnt?t.like_cnt+"人认可":""),l.default.createElement("div",{className:"domain_skill_tag_like_avatar_wrap"},l.default.createElement("div",{className:"d-i-b media-middle p-r-5"},r.map(function(e){return l.default.createElement("div",{className:"domain_skill_tag_avatar"},l.default.createElement("img",{className:"avatar-25 radius-50",key:e.avatar,src:e.avatar}))})),a&&l.default.createElement("div",{className:"m-l "+o,onClick:c}))))},i.renderBestCmt=function(){var e=i.props.tag;if(e.best_cmt)return l.default.createElement("div",{className:"text-info m-t-5"},l.default.createElement("span",{className:i.props.inDetail?"lineClamp2":""},"“"+e.best_cmt.text+"”"))},o=a,r(i,o)}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.tag,a=e.onDetailClicked,n=e.title,r=e.hideCmt;return l.default.createElement("div",{className:this.props.tag_wrap_class?this.props.tag_wrap_class:"p-x p-y-20 border-bottom-e0",onClick:a},n&&l.default.createElement("div",{className:"font-13 text-info m-b-5"},n),l.default.createElement("div",null,l.default.createElement("div",{className:"media-body media-middle font-15"},t.tag),this.renderTagLike()),!r&&this.renderBestCmt())}}]),t}(l.default.Component)},686:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,l,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(1),f=n(d),p=a(17),m=n(p),_=a(46),g=n(_),v=a(15),h=n(v),k=a(1116),b=n(k),y=a(1117),E=n(y),w=a(981),x=n(w),C=a(114),N=n(C),j=a(75),O=n(j),T=a(113),L=n(T);t.default=e.exports=(l=c=function(e){function t(){var e,a,n,o;r(this,t);for(var c=arguments.length,l=Array(c),u=0;u<c;u++)l[u]=arguments[u];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.onReceiveUpdateTag=function(e){if(e){var t=n.props.tags,a=m.default.findIndex(t,function(t){return t.tag==e.tag});a>-1&&t.splice(a,1,e),n.props.cursor.select("tags").set(t),n.forceUpdate()}n.props.inDetail&&n.props.fetchUserTags&&n.props.fetchUserTags()},n.onReceiveAddLike=function(e){var t=n.context.auth_info,a=e.contact,r=n.props.tags,i=m.default.find(r,function(e){return e.tag==a.like.tag});i&&("add"==e.action?(i.my_like=1,i.like_cnt++,i.contacts.unshift(a)):"edit"!=e.action&&"edit_add_cmt"!=e.action||(i.my_cmt=1,i.cmt_cnt+="edit_add_cmt"==e.action?1:0,i.best_cmt?i.best_cmt&&i.best_cmt.src_uid==t.u&&(i.best_cmt.text=a.like.text):i.best_cmt=a.like),n.props.cursor.select("tags").set(r),n.forceUpdate()),n.props.inDetail&&n.props.fetchUserTags&&n.props.fetchUserTags()},n.onReceiveDeleteLike=function(e){var t=n.context.auth_info,a=n.props.tags,r=m.default.find(a,function(t){return t.tag==e.tagName});if(r){r.my_like=0,r.my_cmt=0,r.like_cnt>0&&r.like_cnt--;var i=m.default.findIndex(r.contacts,function(e){return e.like.src_uid==t.u});if(i>=0){r.contacts[i].like.text&&r.cmt_cnt--,r.contacts.splice(i,1)}r.best_cmt&&r.best_cmt.src_uid==t.u&&(r.best_cmt=null),n.props.cursor.select("tags").set(a),n.forceUpdate()}n.props.inDetail&&n.props.fetchUserTags&&n.props.fetchUserTags()},n.deleteLike=function(e){var t=n.props.card,a=n.context.auth_info,r="/tag/unlike_user_tag?"+h.default.stringify(s({tag:e.tag,tagu:t.encode_mmid},a,{jsononly:1})),i=fetch(r,{credentials:"same-origin"}).then(O.default.parse_online_json).then(function(){L.default.sendWebViewBroadcast("broadcast_tag_delete_like",{tagName:e.tag}),console.log("unlike success")}).catch(O.default.toast_error_handler);(0,N.default)("发送中..",i)},n.onLikeClicked=m.default.debounce(function(e){var t=n.props.card,a=n.context.req.query;if(e.my_like,1){var r={fr:a.fr,stat_frm:a.stat_frm,type:a.type,req:a.req,su:a.su,tag:e.tag,tagu:t.encode_mmid};a.u&&a.u>0&&(r.u=a.u),(0,g.default)("/tag/like_user_tag?"+h.default.stringify(r),"认可成功","fetch")}else n.deleteLike(e)},500,!0),n.onDetailClicked=m.default.debounce(function(e){var t=n.props.card,a=n.context.req.query,r={stat_frm:a.stat_frm,type:a.type,req:a.req,su:a.su,tag:e.tag,tagu:t.encode_mmid};a.u&&a.u>0&&(r.u=a.u),(0,g.default)("/tag/tag_detail?"+h.default.stringify(r),n.props.card.name+"的职业标签","fetch")},500,!0),n.isCanLike=function(e){var t=n.context.auth_info,a=n.props,r=a.same_workexp,i=a.u2_tags,o=a.entrepreneur,c=a.card,l=e.my_like||r||!!m.default.find(i,function(t){return e.tag==t})||o||c.lv>=1;return-1!=t.u&&t.u!=e.uid||(l=!1),l},o=a,i(n,o)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){L.default.bindBroadcast("broadcast_tag_delete_like",this.onReceiveDeleteLike),L.default.bindBroadcast("broadcast_tag_add_like",this.onReceiveAddLike),L.default.bindBroadcast("broadcast_tag_update",this.onReceiveUpdateTag)}},{key:"renderCell",value:function(e){var t=this,a=this.isCanLike(e);return f.default.createElement(b.default,{key:e.tag,tag:e,canLike:a,inDetail:this.props.inDetail,tag_wrap_class:this.props.tag_wrap_class,onLikeClicked:a?function(){t.onLikeClicked(e)}:function(){},onDetailClicked:function(){t.onDetailClicked(e)}})}},{key:"renderCellB",value:function(e){var t=this,a=this.isCanLike(e);return f.default.createElement(E.default,{key:e.tag,tag:e,canLike:a,inDetail:this.props.inDetail,tag_wrap_class:this.props.tag_wrap_class,onLikeClicked:a?function(){t.onLikeClicked(e)}:function(){},onDetailClicked:function(){t.onDetailClicked(e)}})}},{key:"renderTagBanner",value:function(){if(this.context.req.query.tagbanner&&6!=this.props.mycard.id){var e=this.props,t=e.card,a=e.mycard,n=2==t.gender?"她":"他";return f.default.createElement("div",{className:"domain_skill_tag_banner_bg p-t-20 p-b"},f.default.createElement("div",{className:"text-center font-0"},f.default.createElement("div",{className:"d-i-b clearfix m-l-10 p-relative"},f.default.createElement("div",{className:"domain_skill_banner_avatar fl"},f.default.createElement("img",{className:"avatar-45 radius-50",src:a.avatar})),f.default.createElement("div",{className:"domain_skill_banner_avatar fl"},f.default.createElement("img",{className:"avatar-45 radius-50",src:t.avatar})),f.default.createElement("div",{className:"tag_auth_icon tag_auth_icon_position"}))),f.default.createElement("div",{className:"font-18 font-bold text-center text-white m-t"},"可以帮",t.name,"一个忙吗？"),f.default.createElement("div",{className:"font-15 text-center text-white"},"认可并评价",n,"，帮",n,"吸引高达1.8倍的职业人脉。"))}}},{key:"render",value:function(){var e=this,t=this.props.card.id>55515068&&this.props.card.id%2!=0;return f.default.createElement("div",null,!this.props.inDetail&&f.default.createElement(x.default,{title:this.props.card.name+"的职业标签"}),!this.props.inDetail&&this.renderTagBanner(),!t&&this.props.tags.map(function(t){return e.renderCell(t)}),t&&this.props.tags.map(function(t){return e.renderCellB(t)}))}}]),t}(f.default.Component),c.contextTypes={req:f.default.PropTypes.object,fconf:f.default.PropTypes.object,auth_info:f.default.PropTypes.object,env:f.default.PropTypes.object},l)}});