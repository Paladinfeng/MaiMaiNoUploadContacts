webpackJsonp([113],{1541:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=(n(992),n(167),n(76)),o=function(e){return e&&e.__esModule?e:{default:e}}(a),r=n(1),c=n(41),s=(n(50),n(46)),l=n(75),d=l.parse_online_json,u=l.toast_error_handler,p=n(15),f=n(270),h=n(164),_=(h.nativeAddFriend,h.completeRealProfile,h.refreshPageSilent,r.createClass({displayName:"HunterAddFriendCard",mixins:[c],contextTypes:{fconf:r.PropTypes.object,auth_info:r.PropTypes.object,req:r.PropTypes.object},gotoContact:function(){var e=this.props,t=e.contact;e.cursor;1!=e.user.judge?((0,o.default)("想联系TA或查看更多内容，请先去加V吧~"),this.ping("contact_detail_block",t.mmid,"hunter_candidates",0)):t.mmid&&(s("/contact/detail/"+(t.encode_mmid||t.mmid)+"?from="+this.props.from,"人脉详情","fetch"),this.ping("contact_detail",t.mmid,"hunter_candidates",0))},addFriend:function(e){var t=this.props,n=t.contact,a=t.cursor,r=t.user,c=this.context,s=c.fconf,l=c.auth_info;if(e.stopPropagation(),1!=r.judge)(0,o.default)("想联系TA或查看更多内容，请先去加V吧~"),this.ping("hunter_add_friend_block",n.mmid,"hunter_candidates",0);else if(1==n.done)(0,o.default)("请求已发送，请耐心等待对方通过");else if(n.contact_request_count>5)(0,o.default)("抱歉，今天已有超过5位猎头向TA发起了好友申请，请明天再试吧~"),this.ping("hunter_add_friend_limit",n.mmid,"hunter_candidates",0);else{var f=s.online_url+"talent/v3/hunter/add_friend?"+p.stringify(i({uid2:n.mmid},l));fetch(f).then(d).then(function(e){console.log(e),a.select("done").set(1),(0,o.default)(e.ok_msg)}).catch(function(e){throw a.select("done").set(0),e}).catch(u),this.ping("hunter_add_friend",n.mmid,"hunter_candidates",0)}},openChat:function(e){var t=this.props,n=t.contact,i=t.user;e.stopPropagation(),1!=i.judge?((0,o.default)("想联系TA或查看更多内容，请先去加V吧~"),this.ping("open_chat_block",n.mmid,"hunter_candidates",0)):MaiMai_Native.native_chat&&(MaiMai_Native.native_chat("",n.mmid),this.ping("open_chat",n.mmid,"hunter_candidates",0))},ping:function(e,t,n,a){var o=this.context,r=o.auth_info,c=o.fconf;if(e)try{var s=i({u:r.uid,act:e,act_id:t,fr:n,fr_id:a},r),l=c.online_url+"job/v3/ping_act?"+p.stringify(s);fetch(l,{credentials:"same-origin"})}catch(e){}},render:function(){var e=this.props.contact,t=void 0;return t=1==e.dist?r.createElement("div",{className:"voidBlueBtnM small",style:m.noPaddingRight,onClick:this.openChat},"询问"):1==e.done?r.createElement("div",{className:"small",style:m.invalidBtn,onClick:this.addFriend},"已加"):r.createElement("div",{className:"voidBlueBtnM small",style:m.noPaddingRight,onClick:this.addFriend},"+好友"),r.createElement(f,{contact:e,onClick:this.gotoContact,hideDist:!1},t)}})),m={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},noPaddingRight:{marginRight:"-10px",marginTop:"6px"},invalidBtn:{padding:"5px 7px",border:"1px solid #989898",color:"#989898",borderRadius:2,width:"50px",lineHeight:"20px",textAlign:"center",marginRight:"-10px",marginTop:"6px"}};e.exports=_},869:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,s,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(15),p=i(u),f=n(75),h=n(981),_=i(h),m=n(1541),g=i(m),b=n(46),v=(i(b),n(165)),y=i(v),j=n(1047),x=i(j),M=n(1),P=(n(1045),n(50)),k=n(982);t.default=e.exports=(s=c=function(e){function t(){var e,n,i,r;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.loadMore=function(){var e=i.props.cursor;i.refs.loader.bindRequest(function(){return t.loadData(i.context,i.nextPage).then(function(t){i.nextPage++;var n=t.data;e.select("canditates").concat(n.canditates),e.select("user").set(n.user),e.select("remain").set(n.remain)})})},i.my_jobs=function(){P("https://maimai.cn/jobs/zhaopin_index?tab=2","我发布的职位")},i.pub_job=function(){MaiMai_Native.native_pub_job?MaiMai_Native.native_pub_job():MaiMai_Native.native_open_my_jobs&&MaiMai_Native.native_open_my_jobs()},r=n,o(i,r)}return r(t,e),d(t,[{key:"componentDidMount",value:function(){this.nextPage=1}},{key:"render",value:function(){var e=this.props,t=e.cursor,n=e.canditates,i=e.user,a=e.blocked,o=void 0;return 0==n.length&&(o=1==a?M.createElement(x.default,{tips:"抱歉，您还未开通此功能",onClick:function(){}}):i.job_count>0?M.createElement(x.default,{tips:"正在努力为您寻找候选人，请过会儿再试吧~",btn:"我的职位",btnOnClick:this.my_jobs,onClick:function(){}}):M.createElement(x.default,{tips:"没有在招职位，无法匹配候选人，请先发职位吧~",btn:"发职位",btnOnClick:this.pub_job,onClick:function(){}})),M.createElement("div",null,M.createElement(_.default,{title:"活跃候选人"}),o,M.createElement(k,{loadMore:this.loadMore,hasMore:this.props.remain>0,loader:M.createElement(y.default,{ref:"loader",reload:this.loadMore,cursor:t.select("loading_status")})},M.createElement("div",{className:"panel panel-default"},M.createElement("ul",{className:"list-group"},n.map(function(e,n){return M.createElement(g.default,{key:e.id,cursor:t.select("canditates",n),contact:e,user:i})})))))}}],[{key:"loadData",value:function(e,t){var n=e.req,i=n.query,a=n.pathname+"?"+p.default.stringify(l({page:t,jsononly:1},i));return fetch(a,{credentials:"same-origin"}).then(f.parse_online_json)}}]),t}(M.Component),c.contextTypes={auth_info:M.PropTypes.object,req:M.PropTypes.object,fconf:M.PropTypes.object},s)}});