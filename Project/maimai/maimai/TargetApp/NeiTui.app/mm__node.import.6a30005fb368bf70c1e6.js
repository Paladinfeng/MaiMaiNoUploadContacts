webpackJsonp([72],{1461:function(e,t,a){"use strict";var s=a(1),o=s.createClass({displayName:"UploadId",uploadFront:function(){this.props.showbtns(0)},uploadBack:function(){this.props.showbtns(1)},uploadHold:function(){this.props.showbtns(4)},render:function(){var e=this.props.photos,t="/static/images/idImg1.jpg",a="/static/images/idImg2.jpg",o="/static/images/idImg3.jpg",l="【示例】",i=l,c=l,r="idImgBox_grey p-x-10 p-y-10",n=r,d=r;return 1==e.has_front&&(t=e.front_url,l="已上传",r="idImgBox p-x-10 p-y-10"),1==e.has_back&&(a=e.back_url,i="已上传",n="idImgBox p-x-10 p-y-10"),1==e.has_hold&&(o=e.hold_url,c="已上传",d="idImgBox p-x-10 p-y-10"),s.createElement("div",null,s.createElement("div",{className:"media p-t-10 m-y media-middle clearfix"},s.createElement("div",{className:"media-left text-center idImgLeft p-x-10"},s.createElement("div",{className:r},s.createElement("img",{src:t})),s.createElement("p",{className:"m-t-10 m-b-0"},l)),s.createElement("div",{className:"media-right text-center idImgRight p-x-10"},s.createElement("div",{className:"btn btn-secondary",onClick:this.uploadFront},"上传身份证正面照片"))),s.createElement("div",{className:"media p-t-10 m-y media-middle clearfix"},s.createElement("div",{className:"media-left text-center idImgLeft p-x-10"},s.createElement("div",{className:n},s.createElement("img",{src:a})),s.createElement("p",{className:"m-t-10 m-b-0"},i)),s.createElement("div",{className:"media-right text-center idImgRight p-x-10"},s.createElement("div",{className:"btn btn-secondary",onClick:this.uploadBack},"上传身份证反面照片"))),s.createElement("div",{className:"media p-t-10 m-y media-middle clearfix"},s.createElement("div",{className:"media-left text-center idImgLeft p-x-10"},s.createElement("div",{className:d},s.createElement("img",{src:o})),s.createElement("p",{className:"m-t-10 m-b-0"},c)),s.createElement("div",{className:"media-right text-center idImgRight p-x-10"},s.createElement("div",{className:"btn btn-secondary",onClick:this.uploadHold},"上传手持身份证照片"))))}});e.exports=o},769:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},l=a(1),i=s(l),c=a(46),r=s(c),n=a(114),d=(s(n),a(1046),a(113)),p=(s(d),a(15)),m=s(p),u=a(76),h=s(u),f=a(75),_=s(f),v=a(1096),g=(s(v),a(1461)),b=s(g),x=a(1097),y=s(x),N=a(164),E=a(166),k=a(981),w=a(41),I=i.default.createClass({displayName:"UploadIdentPanel",mixins:[w],contextTypes:{auth_info:i.default.PropTypes.object,fconf:i.default.PropTypes.object},getInitialState:function(){return{show_upload:!1}},closePage:function(){window.MaiMai_Native.close_native(null,!0)},componentDidMount:function(){(0,d.bindBroadcast)("bank_card_added",this.closePage)},showUploadButtons:function(e){this.props.cursor.select("upload_type").set(e),this.setState({show_upload:!0})},set_file:function(e,t){var a=this,s=this.context,l=s.fconf,i=s.auth_info,c=l.online_url+"mmpay/v4/set_file?"+m.default.stringify(o({ftype:e,fid:t.id},i));fetch(c).then(_.default.parse_online_json).then(function(s){0==e?(a.props.cursor.select("photos","front_url").set(t.url),a.props.cursor.select("photos","has_front").set(1)):1==e?(a.props.cursor.select("photos","back_url").set(t.url),a.props.cursor.select("photos","has_back").set(1)):(a.props.cursor.select("photos","hold_url").set(t.url),a.props.cursor.select("photos","has_hold").set(1))}).catch(_.default.toast_error_handler)},upload_callback:function(e){var t=this.props.cursor.select("upload_type").get(),a=JSON.parse(e);this.set_file(t,a)},onUploadClick:function(e,t){if(this.setState({show_upload:!1}),1==t||2==t){var a={type:2,compress:.6,security:1,select_type:t};(0,N.uploadImageToServer)(JSON.stringify(a),this.upload_callback)||(0,h.default)("请使用客户端上传照片")}},allUploaded:function(){return this.props.photos.has_front&&this.props.photos.has_back&&this.props.photos.has_hold},onNextClick:function(){var e=this.allUploaded();if(this.props.add_card){if(!e)return;if(this.props.deposit){var t="/contact/account/check_bank_numb?deposit=1&dpvalue="+this.props.dpvalue;(0,r.default)(t,"添加银行卡","fetch")}else this.props.upload_card?this.props.cardid>0?(0,r.default)("/contact/account/upload_card?cardid="+this.props.cardid,"银行卡信息","fetch"):window.MaiMai_Native.close_native(null,!0):(0,r.default)("/contact/account/check_bank_numb","添加银行卡","fetch")}else window.MaiMai_Native.close_native(null,!0)},render:function(){var e=void 0,t=void 0,a=void 0,s=this.allUploaded();this.state.show_upload&&(e=i.default.createElement(y.default,{show_type:"3",onClick:this.onUploadClick}));var o=this.onNextClick,l="btn w-100 btn-secondary";return 1==this.props.add_card?(t=i.default.createElement("div",{className:"lightBlueTips small"},"由于第三方支付合作方要求,用户需补充身份证信息后才能正常使用绑卡提现等功能。"),s||(o=null,l="btn w-100 btn-grey-bg"),a="下一步"):a=s?"完成":"关闭",i.default.createElement("div",null,i.default.createElement(k,{title:"身份证信息"}),t,i.default.createElement(b.default,{photos:this.props.photos,showbtns:this.showUploadButtons}),i.default.createElement("div",{className:"m-x m-y text-center"},i.default.createElement("div",{className:l,onClick:o},a)),e)}});e.exports=E(I)}});