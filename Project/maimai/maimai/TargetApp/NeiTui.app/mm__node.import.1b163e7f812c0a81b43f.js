webpackJsonp([247],{749:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(1),i=a(o),l=n(271),s=(a(l),n(1028)),f=n(113),d=n(114),u=a(d),c=n(75),p=a(c),h=n(15),m=a(h),x=n(76),y=(a(x),n(166)),b=y.Style,g=n(47);e.exports=i.default.createClass({displayName:"exports",contextTypes:{auth_info:i.default.PropTypes.object,fconf:i.default.PropTypes.object},componentDidMount:function(){this.props.uinfo.headline&&this.props.uinfo.headline.length>0&&(g.findDOMNode(this.refs.textarea).value=this.props.uinfo.headline)},save:function(){var e=this,t=g.findDOMNode(this.refs.textarea).value;(0,s.checkStrEmpty)(t)&&(t="");var n=this.context,a=(n.req,n.fconf),o=n.auth_info,i=r({infos:JSON.stringify({headline:t.trim()})},o),l=a.online_url+"user/v3/update",d=fetch(l,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:m.default.stringify(i)}).then(p.default.parse_online_json).then(function(n){e.props.cursor.select("uinfo","headline").set(t.trim()),(0,f.sendWebViewBroadcast)("merge_user_info",e.props.cursor.select("uinfo").get()),window.MaiMai_Native.close_native("",!0)}).catch(p.default.toast_error_handler);(0,u.default)("发送中..",d)},render:function(){return i.default.createElement("div",null,i.default.createElement(b,{rules:{html:{height:"100%"},body:{height:"100%",backgroundColor:"#f3f3f3"}}}),i.default.createElement("div",null,i.default.createElement("div",{style:v.textareaStyleInput,className:"m-t"},i.default.createElement("textarea",{style:v.textarea,placeholder:"",ref:"textarea"})),i.default.createElement("div",{className:"m-x m-t"},i.default.createElement("button",{className:"btn btn-secondary btn-block btn-lg",onClick:this.save},"保存"))))}});var v={textarea:{display:"block",fontSize:"16px",border:"none",width:"100%",lineHeight:"22px",height:"140px",fontFamily:"Arial,sans-serif",outlineStyle:"none",resize:"none"},textareaStyleInput:{margin:"5px 1em",background:"#ffffff",borderRadius:"6px",color:"#414141",padding:"6px"},title:{height:"20px",color:"#999999",margin:"1em 1em 0.3em"}}}});