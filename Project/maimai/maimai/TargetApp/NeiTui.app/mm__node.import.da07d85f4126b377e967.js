webpackJsonp([90],{1143:function(e,t,n){"use strict";var o,r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,l){"object"===i(t)&&void 0!==e?e.exports=l():(o=l,void 0!==(r="function"==typeof o?o.call(t,n,t,e):o)&&(e.exports=r))}(0,function(){function e(){var e=s.classPrefix,t=s.ptrElement,n=s.iconArrow,o=s.iconRefreshing,r=s.instructionsRefreshing,i=s.instructionsPullToRefresh,l=s.instructionsReleaseToRefresh,a=t.querySelector("."+e+"icon"),c=t.querySelector("."+e+"text");a.innerHTML="refreshing"===f?o:n,"releasing"===f&&(c.innerHTML=l),"pulling"!==f&&"pending"!==f||(c.innerHTML=i),"refreshing"===f&&(c.innerHTML=r)}function t(){function t(){var e=s.cssProp,t=s.ptrElement,n=s.classPrefix;t.classList.remove(n+"refresh"),t.style[e]="0px",f="pending"}function n(t){var n=s.triggerElement;window.scrollY||(a=t.touches[0].screenY),"pending"===f&&(clearTimeout(o),m=n.contains(t.target),f="pending",e())}function r(t){var n=s.ptrElement,o=s.resistanceFunction,r=s.distMax,i=s.distThreshold,l=s.cssProp,p=s.classPrefix;if(a?c=t.touches[0].screenY:window.scrollY||(a=t.touches[0].screenY),!m||"refreshing"===f)return void(!window.scrollY&&a<c&&t.preventDefault());"pending"===f&&(n.classList.add(p+"pull"),f="pulling",e()),a&&c&&(u=c-a),u>0&&(t.preventDefault(),n.style[l]=d+"px",d=o(u/i)*Math.min(r,u),"pulling"===f&&d>i&&(n.classList.add(p+"release"),f="releasing",e()),"releasing"===f&&d<i&&(n.classList.remove(p+"release"),f="pulling",e()))}function i(){var n=s.ptrElement,r=s.onRefresh,i=s.refreshTimeout,l=s.distThreshold,p=s.distReload,m=s.cssProp,h=s.classPrefix;if("releasing"===f&&d>l)f="refreshing",n.style[m]=p+"px",n.classList.add(h+"refresh"),o=setTimeout(function(){var e=r(t);e&&"function"==typeof e.then&&e.then(function(){return t()}),e||r.length||t()},i);else{if("refreshing"===f)return;n.style[m]="0px",f="pending"}e(),n.classList.remove(h+"release"),n.classList.remove(h+"pull"),a=c=null,u=d=0}return window.addEventListener("touchend",i),window.addEventListener("touchstart",n),window.addEventListener("touchmove",r,{passive:!1}),{onTouchStart:n,onTouchMove:r,onTouchEnd:i}}function n(){var e=s.mainElement,t=s.getMarkup,n=s.getStyles,o=s.classPrefix,r=s.onInit;if(!s.ptrElement){var i=document.createElement("div");e!==document.body?e.parentNode.insertBefore(i,e):document.body.insertBefore(i,document.body.firstChild),i.classList.add(o+"ptr"),i.innerHTML=t().replace(/__PREFIX__/g,o),s.ptrElement=i}var l=document.createElement("style");return l.textContent=n().replace(/__PREFIX__/g,o).replace(/\s+/g," "),document.head.appendChild(l),"function"==typeof r&&r(s),{styleNode:l,ptrElement:s.ptrElement}}var o,r=function(){return'<div class="__PREFIX__box">\n  <div class="__PREFIX__content">\n    <div class="__PREFIX__icon"></div>\n    <div class="__PREFIX__text"></div>\n  </div>\n</div>'},i=function(){return".__PREFIX__ptr {\n  box-shadow: inset 0 -3px 5px rgba(0, 0, 0, 0.12);\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n.__PREFIX__box {\n  padding: 10px;\n  flex-basis: 100%;\n}\n.__PREFIX__pull {\n  transition: none;\n}\n.__PREFIX__text {\n  margin-top: .33em;\n  color: rgba(0, 0, 0, 0.3);\n}\n.__PREFIX__icon {\n  color: rgba(0, 0, 0, 0.3);\n  transition: transform .3s;\n}\n.__PREFIX__release .__PREFIX__icon {\n  transform: rotate(180deg);\n}"},s={},l={distThreshold:60,distMax:80,distReload:50,bodyOffset:20,mainElement:"body",triggerElement:"body",ptrElement:".ptr",classPrefix:"ptr--",cssProp:"min-height",iconArrow:"&#8675;",iconRefreshing:"&hellip;",instructionsPullToRefresh:"下拉刷新",instructionsReleaseToRefresh:"松开刷新",instructionsRefreshing:"加载中,请稍候...",refreshTimeout:500,getMarkup:r,getStyles:i,onInit:function(){},onRefresh:function(){return location.reload()},resistanceFunction:function(e){return Math.min(1,e/2.5)}},a=null,c=null,u=0,d=0,f="pending",p=!1,m=!1;return{init:function(e){void 0===e&&(e={});var o;Object.keys(l).forEach(function(t){s[t]=e[t]||l[t]}),"string"==typeof s.mainElement&&(s.mainElement=document.querySelector(s.mainElement)),"string"==typeof s.ptrElement&&(s.ptrElement=document.querySelector(s.ptrElement)),"string"==typeof s.triggerElement&&(s.triggerElement=document.querySelector(s.triggerElement)),p||(o=t(),p=!0);var r=n(),i=r.styleNode,a=r.ptrElement;return{destroy:function(){window.removeEventListener("touchstart",o.onTouchStart),window.removeEventListener("touchend",o.onTouchEnd),window.removeEventListener("touchmove",o.onTouchMove),i.parentNode.removeChild(i),a.parentNode.removeChild(a),p=!1,o=null,i=null,a=null,s={}}}}}})},874:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,a,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),d=o(u),f=n(46),p=o(f),m=n(981),h=o(m),_=n(1143),g=o(_),y=n(75),v=n(15),E=o(v),b=n(983),w=o(b),T=n(90),x=(a=l=function(e){function t(){var e,n,o,s;r(this,t);for(var l=arguments.length,a=Array(l),c=0;c<l;c++)a[c]=arguments[c];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.goToCmpGossipFromCmp=function(e){(0,p.default)("/company/gossip_one_company?fid="+e.id,"什么值得去-"+e.company,"fetch")},o.goToCmpGossipFromGossip=function(e,t){(0,p.default)("/company/gossip_one_company?fid="+e.id+"&cid="+t,"什么值得去-"+e.company,"fetch")},o.scrollToTop=function(e){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?(window.scrollBy(0,-50),o.scrollTimer=setTimeout(o.scrollToTop,10)):clearTimeout(o.scrollTimer)},o.loadNew=function(){var e=o.props.cursor;e.select("loading").set("loading");var t=o.context.req,n=t.pathname+"?"+E.default.stringify({fid:t.query.fid,jsononly:1});return fetch(n,{credentials:"same-origin"}).then(y.parse_online_json).then(function(t){e.select("gossips").set(t.data.gossips),setTimeout(function(){return e.select("loading").set(null)},1800)}).catch(function(t){e.select("loading").set(null),(0,y.toast_error_handler)(t)})},s=n,i(o,s)}return s(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var n={link:window.location.href,imgUrl:"https://maimai.cn/static/images/logo.png",success:function(){},cancel:function(){}};t.wx_sdk.onMenuShareAppMessage(n),t.wx_sdk.onMenuShareTimeline(n),t.wx_sdk.onMenuShareQQ(n),t.wx_sdk.onMenuShareQZone(n)}}},{key:"componentDidMount",value:function(){g.default.init({mainElement:"#pull_refresh_div",onRefresh:this.loadNew}),window.scroll_to_top=this.scrollToTop}},{key:"componentWillUnmount",value:function(){this.scrollTimer&&clearTimeout(this.scrollTimer),window.scroll_to_top=null}},{key:"renderClientMsg",value:function(){[].push({title:"分享",callback:"MaiMai_Native.native_share(1)"})}},{key:"renderMenu",value:function(){var e={share_info:{name:"话题",title:"招聘季-内部员工告诉你，什么公司值得去",desc:""}},t=[];return t.push({title:"分享",callback:"MaiMai_Native.native_share(1)"}),t.push({title:"刷新",callback:"MaiMai_Native.native_refresh()"}),t.push({title:"关闭",callback:'MaiMai_Native.close_native("",true)'}),e.more_items=t,d.default.createElement(w.default,{msg_to_app:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.gossips,o=t.companys;return d.default.createElement("div",{id:"pull_refresh_div"},d.default.createElement(h.default,{title:"招聘季-什么公司值得去"}),this.renderMenu(),this.renderClientMsg(),n.map(function(t){return d.default.createElement("div",{className:"border-bottom-a0 p-x-20 p-y gray-bg-f4",onClick:function(n){return e.goToCmpGossipFromGossip(t.company,t.company_gossip.id)}},d.default.createElement("div",{className:"m-b-10"},d.default.createElement("div",{className:"media-left font-0"},d.default.createElement("img",{className:"avatar-30 radius-50",src:t.company.logo})),d.default.createElement("div",{className:"media-body media-middle font-15"},t.company.company),d.default.createElement("div",{className:"media-right p-l-0 media-middle text-blue-1c4781"},d.default.createElement("div",{className:"text-right",style:{width:120}},"该公司更多内幕 >"))),d.default.createElement("div",{className:"font-15"},d.default.createElement(T,{ref:"txt",text:t.company_gossip.text,support_dref:!0})))}),d.default.createElement("div",{className:"gray-bg-f9 text-gray-7d p-t p-b-10 p-x-20"},"更多公司内幕"),d.default.createElement("div",{className:"clearfix"},o.map(function(t){return d.default.createElement("div",{className:"gossip_company_list_item",onClick:function(n){return e.goToCmpGossipFromCmp(t)}},d.default.createElement("div",{className:"gcli_img_box"},d.default.createElement("img",{className:"radius-50 mw-100",src:t.logo})),d.default.createElement("div",{className:"mw-100 widthEllipsis font-13"},t.company))})))}}]),t}(d.default.Component),l.contextTypes={req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,auth_info:d.default.PropTypes.object,wx_sdk:d.default.PropTypes.object},a);t.default=e.exports=x}});