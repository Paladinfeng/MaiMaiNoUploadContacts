webpackJsonp([286],{829:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(1),i=r(n),c=a(981),g=r(c),l=a(984),u=a(46),m=r(u),f=a(17),p=a(114),o=a(15),_=a(75),d=a(76),x=a(117),h=(x.Constants.large,x.Constants.blue_loading,i.default.createClass({displayName:"LiveGift",contextTypes:{auth_info:i.default.PropTypes.object,fconf:i.default.PropTypes.object},getImage:function(e){switch(e){case 1:return"/static/images/gift_images/gift_my.png";case 2:return"/static/images/gift_images/gift_mht.png";case 3:return"/static/images/gift_images/gift_lyh.png";case 4:return"/static/images/gift_images/gift_lqd.png";case 5:return"/static/images/gift_images/gift_boat.png";case 6:return"/static/images/gift_images/gift_egg.png";case 7:return"/static/images/gift_images/gift_lunch.png";case 8:return"/static/images/gift_images/gift_cake.png";case 11:return"/static/images/gift_images/gift_my_z.png";case 12:return"/static/images/gift_images/gift_mht_z.png";case 13:return"/static/images/gift_images/gift_lyh_z.png";case 14:return"/static/images/gift_images/gift_lqd_z.png";case 15:return"/static/images/gift_images/gift_boat_z.png";case 16:return"/static/images/gift_images/gift_egg_z.png";case 17:return"/static/images/gift_images/gift_lunch_z.png";case 18:return"/static/images/gift_images/gift_cake_z.png"}},getName:function(e){switch(e){case 1:return"马芸";case 2:return"马画藤";case 3:return"李艳红";case 4:return"刘强冻";case 5:return"友谊的小船";case 6:return"茶叶蛋";case 7:return"盒饭";case 8:return"迷之糕点";case 11:return"马雲";case 12:return"马花藤";case 13:return"李艳虹";case 14:return"刘强冬";case 15:return"友谊的大船";case 16:return"皇家茶叶蛋";case 17:return"高铁盒饭";case 8:return"贵族糕点"}},openPackage:function(){(0,m.default)("/contact/account/my_wallet","我的钱包","fetch")},charge:function(){var e=this;if(!this.props.charged){var t=this.context,a=t.auth_info,r=t.fconf,n=r.online_url+"/user/v4/charge_gift?"+o.stringify(s({type:0},a)),i=fetch(n,{credentials:"same-origin"}).then(_.parse_online_json).then(function(t){d("兑换成功"),e.props.cursor.select("charged").set(!0),e.props.cursor.select("charged_value").set(t.value)}).catch(_.toast_error_handler);p("兑换中...",i)}},render:function(){var e=this,t=this.props,a=t.list,r=t.charged,s=t.charged_value,n=0;f.map(a,function(t){t.value=1*t.value/100,n+=t.value,t.img_url=e.getImage(t.type),t.name=e.getName(t.type)}),n=n.toFixed(2);var c;return c=r?i.default.createElement("div",{className:"p-y-10 border-radius-3 btn-purple m-x m-t text-center",onClick:function(){return e.openPackage()}},i.default.createElement("span",{className:"text-orange-hl p-x-5"},s),"元已充入脉脉钱包，点击查看"):i.default.createElement("div",{className:"p-y-10 border-radius-3 btn-purple m-x m-t text-center",onClick:function(){return e.charge()}},"可兑换金额：",i.default.createElement("span",{className:"text-orange-hl p-x-5"},n),"元"),0==a.length?i.default.createElement("div",{style:(0,l.margin)("70px","0px","0px","0px"),className:"text-light text-center large"},i.default.createElement(g.default,{title:"可兑换礼物"}),i.default.createElement("img",{src:"/static/images/no_result_icon.png",style:(0,l.size)(60)}),i.default.createElement("div",{style:(0,l.margin)("10px","0px","0px","0px")},"暂无可兑换礼物")):i.default.createElement("div",{className:"p-t"},i.default.createElement(g.default,{title:"可兑换礼物"}),i.default.createElement("div",{className:"p-x-5 m-t d-flex flex-row flex-wrap-auto"},a.map(function(e){return i.default.createElement("div",{className:"m-b-10 w-33 text-center p-x-10"},i.default.createElement("div",{className:"giftImgBg"},i.default.createElement("div",{className:"giftImg"},i.default.createElement("img",{className:"w-100",src:e.img_url}))),i.default.createElement("div",{className:"giftText"},e.name,i.default.createElement("span",{className:"text-purple"},"X",e.count)))})),c,i.default.createElement("div",{className:"text-muted small m-t-10 m-x",style:(0,l.margin)("10px","0px","20px","0px")},"*兑换时脉脉将收取50%的服务费"))}}));t.default=e.exports=h}});