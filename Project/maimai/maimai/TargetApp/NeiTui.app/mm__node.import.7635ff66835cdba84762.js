webpackJsonp([51],{1174:function(e,t,r){"use strict";var n=r(1),o=n.createClass({displayName:"InfoRow",render:function(){return n.createElement("div",{className:"infoRow borderBottom clearfix"},n.createElement("div",{className:"pull-left text-muted"},this.props.info1),n.createElement("div",{className:"pull-right text-content"},this.props.info2))}});e.exports=o},1175:function(e,t,r){"use strict";var n=r(1),o=n.createClass({displayName:"Transcation",render:function(){return n.createElement("div",{className:"borderBottom transcation"},"交易状态：",n.createElement("em",null,this.props.st_desc))}});e.exports=o},888:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,d,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1003),s=(n(f),r(1172)),m=n(s),_=r(988),p=n(_),h=r(1),v=n(h),b=r(981),y=n(b),g=r(1001),C=(n(g),r(46)),E=n(C),j=r(75),w=(n(j),r(15)),k=n(w),x=r(76),N=n(x),R=r(113),M=(n(R),r(1025)),O=(n(M),r(1012)),T=n(O),P=r(78),A=n(P),B=r(1062),V=(n(B),r(1173)),D=(n(V),r(271)),W=n(D),S=r(1063),q=(n(S),r(986)),I=n(q),J=r(117),z=n(J),F=r(50),G=(n(F),r(164)),H=r(1174),K=n(H),L=r(1175),Q=n(L),U=r(77),X=(n(U),r(995)),Y=(n(X),r(116)),Z=n(Y);r(983),r(998),r(1002).types;t.default=e.exports=(d=l=function(e){function t(){var e,r,n,i;o(this,t);for(var l=arguments.length,d=Array(l),u=0;u<l;u++)d[u]=arguments[u];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),n.state={},n.goContactDetail=function(e){n.context.auth_info;(0,A.default)(e,n.context)},n.orderAccept=function(){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a="您确定要接单吗?";if(1==o.for_member&&(a="您确定要见面吗?"),confirm(a)){var i=r.online_url+"talent/v3/usrv/order_accept?"+k.default.stringify(c({orderid:o.orderid},t));fetch(i).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:1}),(0,N.default)("接单成功"),setTimeout(function(){(0,G.startChatView)(null,o.srcu,!1,null,!1)},2e3)):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderConfirm=function(){if(confirm("您确定完成订单吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_confirm?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:1}),(0,N.default)("确认成功"),n.goComment(),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderReject=function(){if(confirm("您确定要拒绝订单吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_reject?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:2}),(0,N.default)("拒绝成功"),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderApplyRefund=function(){if(confirm("您确定要申请退款吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_apply_refund?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:1}),(0,N.default)("申请成功"),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderRefund=function(){if(confirm("您确定同意退款吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_refund?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:1}),(0,N.default)("退款成功"),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderRejectRefund=function(){if(confirm("您确定拒绝退款吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_reject_refund?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,R.sendWebViewBroadcast)("task_mid_is_done",{orderid:o.orderid,done:1}),(0,N.default)("拒绝成功"),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.orderCancel=function(){if(confirm("您确定取消订单吗?")){var e=n.context,t=e.auth_info,r=e.fconf,o=n.props.order,a=r.online_url+"talent/v3/usrv/order_cancel?"+k.default.stringify(c({orderid:o.orderid},t));fetch(a).then(j.parse_online_json).then(function(e){1==e.ret?((0,N.default)("取消成功"),location.reload()):(0,N.default)(e.error)}).catch(j.toast_error_handler)}},n.goComment=function(e){var t=n.props.order,r="/service/comment_form?"+k.default.stringify({id:t.orderid});(0,E.default)(r,"点评服务","fetch")},n.goChatMaihelper=function(){MaiMai_Native.native_chat&&MaiMai_Native.native_chat("","6")},n.goChat=function(e){MaiMai_Native.native_chat&&MaiMai_Native.native_chat("",""+e)},i=r,a(n,i)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){document.body.style.background="#f6f6f6"}},{key:"render",value:function(){var e=this,t=this.props,r=t.service,n=t.order,o=t.sucard,a=t.comment,i=t.oucard,l=this.context.auth_info,d="";1==n.st?l.u==n.srcu||l.u==r.uid&&(d=v.default.createElement(p.default,{btns:["拒绝","接单"],actions:[this.orderReject,this.orderAccept]}),1==n.for_member&&(d=v.default.createElement(p.default,{btns:["拒绝","同意"],actions:[this.orderReject,this.orderAccept]}))):2==n.st?l.u==n.srcu?(d=v.default.createElement(p.default,{btns:["申请退款","确认服务"],actions:[this.orderApplyRefund,this.orderConfirm]}),1==n.for_member&&(d=v.default.createElement(p.default,{btns:["确认见面"],actions:[this.orderConfirm]}))):(l.u,r.uid):5==n.st?l.u==n.srcu||l.u==r.uid&&(d=v.default.createElement(p.default,{btns:["拒绝退款","同意退款"],actions:[this.orderRejectRefund,this.orderRefund]})):3==n.st?l.u==n.srcu?d=a.id?v.default.createElement(p.default,{btns:["已点评"],actions:[null]}):v.default.createElement(p.default,{btns:["点评服务"],actions:[this.goComment]}):(l.u,r.uid):7==n.st&&(l.u==n.srcu||(l.u,r.uid));var c=Z.default.getCareer(o),u=Z.default.getCareer(i),f="订单详情",s="订单编号",_="预约时间";return 1==r.for_member&&(f="预约详情",s="预约编号：",_="预约时间："),v.default.createElement("div",null,v.default.createElement(y.default,{title:f}),!(1==r.for_member)&&n.term_remind&&v.default.createElement(W.default,{title:n.term_remind,btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"}),!(1==r.for_member)&&v.default.createElement(Q.default,{st_desc:n.st_desc}),v.default.createElement(m.default,{service:r,noShowPaynum:!0,noShowShare:!0}),l.u!=o.id&&v.default.createElement(W.default,{title:"服务方",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"},1==o.judge?v.default.createElement(T.default,{avatar_url:o.avatar,line1:o.name,line2:c,line2Class:"add_v_img2",onClick:function(){e.goContactDetail(o.encode_mmid||o.id)}}):v.default.createElement(T.default,{avatar_url:o.avatar,line1:o.name,line2:c,onClick:function(){e.goContactDetail(o.encode_mmid||o.id)}}),1!=n.st&&4!=n.st&&v.default.createElement("div",{className:"white-bg"},v.default.createElement(I.default,{onClick:function(){e.goChat(o.id)},title:"和TA沟通  >>"}))),n.msg&&n.msg.length>0&&v.default.createElement(W.default,{title:"附言",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"},v.default.createElement("div",{className:"text-content p-y p-x"},n.msg)),!(1==r.for_member)&&l.u==o.id&&v.default.createElement(W.default,{title:"购买方",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"},1==i.judge?v.default.createElement(T.default,{avatar_url:i.avatar,line1:i.name,line2:u,line2Class:"add_v_img2",onClick:function(){e.goContactDetail(i.encode_mmid||i.id)}}):v.default.createElement(T.default,{avatar_url:i.avatar,line1:i.name,line2:u,onClick:function(){e.goContactDetail(i.encode_mmid||i.id)}}),v.default.createElement("div",{className:"white-bg"},v.default.createElement(I.default,{onClick:function(){e.goChat(i.id)},title:"和TA沟通  >>"}))),v.default.createElement("div",{className:"borderTop m-y"},v.default.createElement(K.default,{info1:s,info2:n.orderid}),v.default.createElement(K.default,{info1:_,info2:n.pay[0].time})),d)}}]),t}(v.default.Component),l.contextTypes={auth_info:v.default.PropTypes.object,req:v.default.PropTypes.object,fconf:v.default.PropTypes.object},d);z.default.Constants.large}});