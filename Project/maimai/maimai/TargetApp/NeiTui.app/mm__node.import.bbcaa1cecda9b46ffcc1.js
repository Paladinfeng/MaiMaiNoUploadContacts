webpackJsonp([50],{1099:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=(n(992),n(989)),a=(o(r),n(46)),c=(o(a),n(1003)),i=(o(c),n(271)),s=(o(i),n(1)),l=(n(997),n(76),{1:"非常不满意",2:"不满意",3:"一般",4:"满意",5:"非常满意"}),u=s.createClass({displayName:"PlayScore",comonentDidMount:function(){document.body.style.backgroundColor="#f6f6f6"},getInitialState:function(){return{score:0}},onChangeScore:function(e){this.setState({score:e}),this.props.onChangeScore(e)},render:function(){var e=this;return s.createElement("div",{className:"scoreFrame"},s.createElement("div",{className:"theStars"},s.createElement("ul",null,s.createElement("li",{className:this.state.score>=1?"sYes":"sNo",onClick:function(){e.onChangeScore(1)}},"1"),s.createElement("li",{className:this.state.score>=2?"sYes":"sNo",onClick:function(){e.onChangeScore(2)}},"2"),s.createElement("li",{className:this.state.score>=3?"sYes":"sNo",onClick:function(){e.onChangeScore(3)}},"3"),s.createElement("li",{className:this.state.score>=4?"sYes":"sNo",onClick:function(){e.onChangeScore(4)}},"4"),s.createElement("li",{className:this.state.score>=5?"sYes":"sNo",onClick:function(){e.onChangeScore(5)}},"5"))),s.createElement("div",{className:"scoreInfo"},l[this.state.score]))}});e.exports=u},1543:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(113),a=(o(r),n(271)),c=o(a),i=n(1099),s=o(i),l=n(1),u=n(997),f=(n(76),n(270)),d=l.createClass({displayName:"JobHrCommentForm",mixins:[u],statics:{validate:function(e){var t=e.content,n=e.score;if(!t||t.length<10)throw"请填写点评，至少10字";if(n<1||n>5)throw"请选择评分";return{content:t,score:n}}},componentDidMount:function(){},getInitialState:function(){return{placeholder:"你可以从以下方面来点评（至少10字）：",content:"",score:0}},onPub:function(){try{var e=d.validate(this.state);this.props.onPub(e)}catch(e){alert(e)}},onChangeScore:function(e){this.setState({score:e}),this.props.onChangeScore&&this.props.onChangeScore(e)},render:function(){var e=this.props.card;return l.createElement("div",{className:"greyBg"},l.createElement(f,{contact:e,onClick:this.gotoContact,hideDist:!1}),l.createElement(s.default,{onChangeScore:this.onChangeScore}),l.createElement(c.default,{title:"点评招聘服务",btn:null,onClick:null,icon_classname:"glyphicon glyphicon-pencil"}),l.createElement("div",{className:"servicePriceRow"},l.createElement("div",{className:"serviceCommentCenter"},l.createElement("textarea",{placeholder:this.state.placeholder,className:"inJobHr",valueLink:this.linkState("content")}))),l.createElement("div",{className:"panel-default p-x"},l.createElement("button",{className:"btn btn-lg m-y btn-block btn-secondary",onClick:this.onPub},"提交")))}});e.exports=d},871:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,s,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=n(1543),d=o(f),h=n(1),p=o(h),m=n(981),y=o(m),b=n(75),g=n(15),v=o(g),_=n(76),C=o(_),E=n(17),j=o(E),N=n(114),S=o(N),k=n(46),w=(o(k),n(983));t.default=e.exports=(s=i=function(e){function t(){var e,n,o,c;r(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.ping=function(e){var t=this.context,n=t.auth_info,o=t.fconf,r=t.req;if(e)try{var a=l({u:n.uid,act:e,act_id:r.query.uid,fr:"job_hr_comment_form",fr_id:r.query.jid||"0"},n),c=o.online_url+"job/v3/ping_act?"+v.default.stringify(a);fetch(c,{credentials:"same-origin"})}catch(e){}},o.onChangeScore=function(e){this.ping("comment_score")},o.onPub=j.default.debounce(function(e){var t=o.context,n=t.req,r=t.auth_info,a=t.fconf;console.log("auth_info"+r);var c=a.online_url+"job/v3/hr/comment_add?"+v.default.stringify(l({uid2:n.query.uid,jid:n.query.jid},r));(0,S.default)("请求中..",fetch(c,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.default.stringify(e)}).then(b.parse_online_json).then(function(e){"ok"==e.result?((0,C.default)(e.ok_msg||"发布成功"),window.location.replace("https://maimai.cn/company/comment_list?uid="+n.query.uid+"&jid="+(n.query.jid||""))):(0,C.default)(e.error)}))},1e3,!0),c=n,a(o,c)}return c(t,e),u(t,[{key:"componentDidMount",value:function(){this.context.req;this.ping("loaded")}},{key:"render",value:function(){var e=this.props.card,t={};return p.default.createElement("div",null,p.default.createElement(w,{msg_to_app:t}),p.default.createElement(y.default,{title:"点评招聘服务"}),p.default.createElement(d.default,{onPub:this.onPub,card:e}))}}],[{key:"loadData",value:function(e){var t=e.req,n=e.auth_info;console.log("auth_info"+n);var o=t.query,r=t.pathname+"?"+v.default.stringify(l({jsononly:1},o));return fetch(r,{credentials:"same-origin"}).then(b.parse_online_json)}}]),t}(p.default.Component),i.contextTypes={auth_info:p.default.PropTypes.object,req:p.default.PropTypes.object,fconf:p.default.PropTypes.object},s)}});