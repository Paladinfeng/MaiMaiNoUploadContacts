webpackJsonp([184],{898:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(15),f=a(d),p=n(981),h=a(p),b=n(1),m=a(b),_=n(50),y=(a(_),n(77)),g=(a(y),n(1e3)),v=(a(g),n(46)),E=(a(v),n(113)),k=n(995),w=(a(k),n(76)),x=a(w),T=n(164),j=n(270),N=n(75),O=N.parse_online_json,C=N.toast_error_handler;n(985)("app");t.default=e.exports=(s=l=function(e){function t(){var e,n,a,o;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.ignoreTask=function(){var e=a.props,t=e.uhdeal,n=e.cursor,r=a.context,c=r.fconf,o=r.auth_info;n.select("uhdeal").select("accepted").set(2);var l=c.online_url+"talent/v3/uh/chatgift_reject?"+f.default.stringify(i({uhdealid:t.id},o));fetch(l).then(O).then(function(e){1==e.ret&&(0,E.sendWebViewBroadcast)("task_mid_is_done",{orderid:t.orderid,done:2})}).then(function(){(0,x.default)("已忽略")}).catch(function(e){throw n.select("uhdeal").select("accepted").set(0),e}).catch(C)},a.sendRequest=function(e,t){var n=a.props,r=n.uhdeal,c=n.cursor,o=a.context,l=o.fconf,s=o.auth_info;e=e||{},c.select("uhdeal").select("accepted").set(1);var u=l.online_url+"talent/v3/uh/chatgift_accept?"+f.default.stringify(i({uhdealid:r.id},s,e));fetch(u).then(O).then(function(e){1==e.ret&&(0,E.sendWebViewBroadcast)("task_mid_is_done",{orderid:r.orderid,done:1})}).then(function(){(0,x.default)("已通过"),setTimeout(function(){(0,T.startChatView)(null,r.from_uid,!1,null,!1),(0,T.closePage)("",!0)},1500)}).catch(function(e){throw c.select("uhdeal").select("accepted").set(0),e}).catch(C)},a.renderBottomButtons=function(){var e=a.context.auth_info,t=a.props.uhdeal,n="";return 1==t.pay_status?n="to_accept":3==t.pay_status&&1==t.refund_type&&(0==t.is_accept_later?n="to_accept_later":1==t.is_accept_later&&(n="accept_later")),"to_accept_later"==n?m.default.createElement("div",null,m.default.createElement("span",{style:R.buttonC},m.default.createElement("button",{onClick:a.sendRequest,className:"btn btn-block fast-btn-secondary"},"接受沟通"))):"accept_later"==n?m.default.createElement("div",{className:"text-center text-muted",style:R.done},m.default.createElement("span",{className:"glyphicon glyphicon-ok-circle"})," 已接受沟通"):e.u%2==0?m.default.createElement("div",null,m.default.createElement("span",{style:R.buttonL},m.default.createElement("button",{onClick:a.ignoreTask,className:"btn btn-block fast-btn-ignore"},"婉拒")),m.default.createElement("span",{style:R.buttonR},m.default.createElement("button",{onClick:a.sendRequest,className:"btn btn-block fast-btn-secondary"},"接受沟通"))):m.default.createElement("div",null,m.default.createElement("span",{style:R.buttonL},m.default.createElement("button",{onClick:a.ignoreTask,className:"btn btn-block fast-btn-ignore"},"帮不上忙")),m.default.createElement("span",{style:R.buttonR},m.default.createElement("button",{onClick:a.sendRequest,className:"btn btn-block fast-btn-secondary"},"可以聊聊")))},a.renderDoneArea=function(){var e=a.props.uhdeal;return m.default.createElement("div",{className:"text-center text-muted",style:R.done},1==e.accepted&&m.default.createElement("span",{className:"glyphicon glyphicon-ok-circle"}),1==e.accepted?" 已接受沟通":"已忽略")},o=n,c(a,o)}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.uhdeal,n=e.contact,a=(this.context.auth_info,"");return 1==t.pay_status?a="to_accept":3==t.pay_status&&1==t.refund_type&&(0==t.is_accept_later?a="to_accept_later":1==t.is_accept_later&&(a="accept_later")),m.default.createElement("div",{className:"bg"},m.default.createElement(h.default,{title:"带心意求沟通"}),m.default.createElement(j,{contact:n,cost_text:"to_accept_later"!=a&&"accept_later"!=a?t.amount+"元心意礼金请你喝杯咖啡":t.amount+"元心意（24小时内回应才能领取）"}),m.default.createElement("div",{className:"list-group-item"},m.default.createElement("div",{className:"text-muted small"},n.name+": "+(t.remark||"无附言"))),m.default.createElement("span",{className:"fastMsg"},"能否帮忙都请礼貌处理一下，可提升职场形象"),t.accepted?this.renderDoneArea():this.renderBottomButtons())}}]),t}(m.default.Component),l.contextTypes={auth_info:m.default.PropTypes.object,req:m.default.PropTypes.object,fconf:m.default.PropTypes.object},l.styles={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttonL:{display:"inline-block",width:"50%",marginTop:5,paddingLeft:10,paddingRight:4},buttonR:{display:"inline-block",width:"50%",marginTop:15,paddingLeft:4,paddingRight:10},buttonC:{display:"inline-block",width:"85%",marginTop:15,paddingLeft:50,paddingRight:4},applyMargin:{margin:"15px 0 0"},borderMarginTop:{marginTop:"-1px"},recName:{paddingLeft:7}},s);var R=ChatOrderMid.styles}});