webpackJsonp([99],{1081:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u,c,p=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(1),f=n(l),d=r(989),h=n(d),y=r(981),b=(n(y),r(50)),_=n(b),m=r(113),v=r(46),g=n(v),O=r(271),w=n(O),j=r(278),k=n(j),E=(r(164),r(281));n(E);e.default=t.exports=(c=u=function(t){function e(){var t,r,n,s;a(this,e);for(var u=arguments.length,c=Array(u),p=0;p<u;p++)c[p]=arguments[p];return r=n=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),n.zhimaBinding=function(){1==n.props.uinfo.status?(0,_.default)("/zhima_bind","芝麻信用授权"):alert("绑定芝麻信用前，需要先完善个人资料。")},n.zhimaDetail=function(){var t=n.props.open_data?n.props.open_data[25200151]:{status:0,score:0};(0,_.default)("/zhima_score?u2="+t.ouid2,n.props.card.name+"的芝麻信用")},n.zhimaScoreUpdate=function(t){var e=n.props.cursor;t[25200151]&&e.select("open_data","25200151").set(t[25200151])},n.tianchengBinding=function(){1==n.props.uinfo.status?(0,_.default)("/tiancheng_auth","甜橙信用授权"):alert("绑定甜橙信用前，需要先完善个人资料。")},n.tianchengDetail=function(){var t=n.props.open_data?n.props.open_data[25200927]:{status:0,score:0};(0,_.default)("/tiancheng_score?u2="+t.ouid2,n.props.card.name+"的甜橙信用")},n.tianchengScoreUpdate=function(t){var e=n.props.cursor;t[25200927]&&e.select("open_data","25200927").set(t[25200927])},n.editOtherInfo=function(){var t=n.props,e=(t.cursor,o(t,["cursor"]));(0,g.default)("/contact/edit_all?otherInfo=true","编辑其他信息",e)},s=r,i(n,s)}return s(e,t),p(e,[{key:"componentDidMount",value:function(){0==this.props.card.dist&&((0,m.bindBroadcast)("zhima_score_update",this.zhimaScoreUpdate),(0,m.bindBroadcast)("tiancheng_score_update",this.tianchengScoreUpdate))}},{key:"componentWillUnmount",value:function(){0==this.props.card.dist&&((0,m.unbindBroadcast)("zhima_score_update",this.zhimaScoreUpdate),(0,m.unbindBroadcast)("tiancheng_score_update",this.tianchengScoreUpdate))}},{key:"renderForms",value:function(){var t=[];this.props.open_data&&this.props.open_data[25200151],this.props.open_data&&this.props.open_data[25200927];if(0==this.props.card.dist||this.props.canViewAllInfo){if(this.props.uinfo.ht_city||this.props.uinfo.ht_province){var e=(this.props.uinfo.ht_province||"")+(this.props.uinfo.ht_city||"");t.push(f.default.createElement(h.default,{key:"home",noArrow:!0,title:"家乡",content:e}))}else 0==this.props.card.dist&&t.push(f.default.createElement(h.default,{key:"home",noArrow:!0,title:"家乡",content:"待完善"}));if(this.props.uinfo.birthday&&this.props.card.dist<2)if(0==this.props.card.dist){var r=(0,k.default)(this.props.uinfo.birthday),n=r.format("MM-DD");t.push(f.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:n}))}else t.push(f.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:this.props.uinfo.birthday}));this.props.uinfo.birthday||0!=this.props.card.dist||t.push(f.default.createElement(h.default,{key:"birthday",noArrow:!0,title:"生日",content:"待完善"})),this.props.uinfo.xingzuo&&this.props.card.dist>1&&t.push(f.default.createElement(h.default,{key:"xingzuo",noArrow:!0,title:"星座",content:this.props.uinfo.xingzuo}))}return t}},{key:"editMode",value:function(){return 0==this.props.card.dist&&!this.props.readonly}},{key:"render",value:function(){var t=this.renderForms();return 0==t.length?f.default.createElement("div",null):f.default.createElement(w.default,{title:"更多资料",onClick:this.editMode()?this.editOtherInfo:null,icon_classname:"null",headClass:"p-b-5 p-t p-x gray-bg-f2f6f7 text-info",btn:this.editMode()?"编辑":null},t)}}],[{key:"hasSameOtherInfo",value:function(t,e){var e=e?e[25200151]:{status:0,score:0};return 1==e.status||t.ht_city||t.ht_province||t.birthday||t.xingzuo}}]),e}(f.default.Component),u.contextTypes={auth_info:f.default.PropTypes.object,req:f.default.PropTypes.object,fconf:f.default.PropTypes.object},c)},747:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(1),p=n(c),l=r(981),f=n(l),d=r(113),h=r(164),y=r(1081),b=n(y);e.default=t.exports=function(t){function e(){var t,r,n,i;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return r=n=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),n.reloadData=function(t){n.props.cursor.select("uinfo").merge((0,h.formatUserV3ToUInfo)(t)),n.props.cursor.select("card").merge((0,h.formatUserV3ToCard)(t))},i=r,a(n,i)}return i(e,t),u(e,[{key:"componentDidMount",value:function(){0==this.props.card.dist&&(0,d.bindBroadcast)("User_Info_Changed",this.reloadData)}},{key:"componentWillUnmount",value:function(){0==this.props.card.dist&&(0,d.unbindBroadcast)("User_Info_Changed",this.reloadData)}},{key:"render",value:function(){return p.default.createElement("div",null,p.default.createElement(f.default,{title:"更多资料"}),p.default.createElement(b.default,s({},this.props,{readonly:!0})))}}]),e}(p.default.Component)}});