webpackJsonp([244],{822:function(e,t,a){"use strict";(function(n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(1),p=r(d),_=a(981),h=r(_),m=a(75),v=a(76),g=r(v),b=a(15),y=r(b),w=a(17),E=r(w),N=a(113),j=r(N);t.default=e.exports=(s=l=function(e){function t(e){o(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.saveGroup=E.default.debounce(function(){var e=a.context,t=e.auth_info,n=e.fconf,r=a.state.cur_group,o=a.props,u=o.u2_list,i=o.group_id1,l=o.idx;if(r.length){var s=i?n.online_url+"talent/v3/uh/group_update_user?"+y.default.stringify(c({},t,{uid2:u,id2list:r.join(","),id1:i})):n.online_url+"talent/v3/uh/group_add_user?"+y.default.stringify(c({},t,{uidlist:u,idlist:r.join(",")}));fetch(s,{credentials:"same-origin"}).then(m.parse_online_json).then(function(e){(0,g.default)("保存成功！"),i?j.default.sendWebViewBroadcast("update_suc",{idx:l}):j.default.sendWebViewBroadcast("update_suc"),setTimeout(function(){window.MaiMai_Native.close_native&&window.MaiMai_Native.close_native(null,!0)},1e3)}).catch(m.toast_error_handler)}else(0,g.default)("请选择分组！")},500,!0),a.choice=function(e){e.stopPropagation();var t=parseInt(n(e.currentTarget).attr("id")),r=a.state.cur_group,o=a.isChoice(t);-1==o?r.push(t):r.splice(o,1),a.setState({cur_group:r})},a.isChoice=function(e){return a.state.cur_group.indexOf(e)},a.addGroup=E.default.debounce(function(){var e=a.context,t=e.auth_info,n=e.fconf,r=a.refs.name.value.replace(/\s+/g,""),o=a.state.cur_group;if(r){if(a.hadName(r))return void(0,g.default)("该组名已存在！");var u=n.online_url+"talent/v3/uh/group_add?"+y.default.stringify(c({},t,{name:r}));fetch(u,{credentials:"same-origin"}).then(m.parse_online_json).then(function(e){a.setState({show_layout:!1});var t={id:e.id,name:r,detail:{notouch:0,total:0}};a.props.cursor.select("groups").push(t),o.push(e.id)}).catch(m.toast_error_handler)}else(0,g.default)("请输入组名！")},500,!0),a.hadName=function(e){var t=a.props.groups,n=0,r=t.length;for(r;n<r;n++)if(t[n].name==e)return!0;return!1},a.state={cur_group:[],show_layout:!1},a}return i(t,e),f(t,[{key:"renderGroup",value:function(){var e=this;return this.props.groups.map(function(t){return p.default.createElement("div",{className:"group_block clearfix",key:t.id,id:t.id,onClick:e.choice},p.default.createElement("div",{className:"fl halfWidth group_name"},t.name),p.default.createElement("div",{className:"fr halfWidth text-right"},p.default.createElement("span",{className:"fast_add_icon "+(-1!=e.isChoice(t.id)?"choiced":"")})))})}},{key:"render",value:function(){var e=this,t=this.state.show_layout;return p.default.createElement("div",{className:"fast_contact_group p-t-10"},p.default.createElement(h.default,{title:"添加到分组"}),p.default.createElement("div",{className:"group_block m-b-10",onClick:function(){e.setState({show_layout:!0})}},p.default.createElement("span",{className:"add_icon"},"+"),"新建分组"),this.renderGroup(),p.default.createElement("div",{className:"fast_save_group"},p.default.createElement("span",{className:"fast_save_btn",onClick:this.saveGroup},"保存")),t&&p.default.createElement("div",{className:"add_group_warp"},p.default.createElement("div",{className:"mask"}),p.default.createElement("div",{className:"add_group_content"},p.default.createElement("p",{className:"text-black-3 m-b"},"请输入分组名："),p.default.createElement("input",{type:"text",className:"input_name",ref:"name"}),p.default.createElement("div",{className:"clearfix"},p.default.createElement("span",{className:"btn_fl",onClick:function(){e.setState({show_layout:!1})}},"取消"),p.default.createElement("span",{className:"btn_fr",onClick:this.addGroup},"确定")))))}}]),t}(p.default.Component),l.contextTypes={auth_info:p.default.PropTypes.object,req:p.default.PropTypes.object,fconf:p.default.PropTypes.object,env:p.default.PropTypes.object},s)}).call(t,a(280))}});