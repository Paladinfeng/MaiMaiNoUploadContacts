webpackJsonp([213],{915:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),d=r(s),p=n(272),b=r(p),m=n(981),y=r(m),_=n(1028),h=n(76),v=r(h),w=n(15),g=r(w),j=n(75),x=r(j),O=n(113),E=n(114),P=r(E),T=n(983),k=n(47);t.default=e.exports=(u=i=function(e){function t(){var e,n,r,l;o(this,t);for(var i=arguments.length,u=Array(i),f=0;f<i;f++)u[f]=arguments[f];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.submitInfo=function(){var e=k.findDOMNode(r.refs.textarea).value;if((0,_.checkStrEmpty)(e))return e="",void(0,v.default)("澄清内容不能为空!");if(void 0!=e&&""!=e&&e.length>250){var t=e.length-250;return void(0,v.default)("最多输入250个字,已经超过"+t+"字")}var n=r.context,o=(n.req,n.fconf),a=n.auth_info,l=c({u:a.u,text:e.trim(),gid:r.props.gid,is_realname:1,username_type:-1,clarification:1},a),i=o.online_url+"gossip/v3/addcmt",u=fetch(i,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g.default.stringify(l)}).then(x.default.parse_online_json).then(function(e){(0,v.default)("提交成功"),(0,O.sendWebViewBroadcast)("clarify_submit_success",{}),window.MaiMai_Native.close_native("",!0)}).catch(x.default.toast_error_handler);(0,P.default)("发送中..",u)},r.componentDidMount=function(){window.submitInfo=r.submitInfo},l=n,a(r,l)}return l(t,e),f(t,[{key:"render",value:function(){var e=b.default;return e.top_right_item={title:"提交",callback:"submitInfo()"},d.default.createElement("div",null,e&&d.default.createElement(T,{msg_to_app:e}),d.default.createElement(y.default,{title:"实名澄清"}),d.default.createElement("div",null,d.default.createElement("div",{className:"p-x-20 p-y-12 border-bottom-e0"},"澄清内容说明（必填）"),d.default.createElement("div",{className:"m-x-20 border-bottom-e0 l-h-1-6 p-y"},d.default.createElement("textarea",{className:"gossip_clarify_textarea",placeholder:"澄清内容审核通过后，会以实名回复的形式显示在评论中。",ref:"textarea",autoFocus:!0})),d.default.createElement("div",{className:"text-red-f66f51 l-h-1-6 p-y-10 p-x-20"},"实名澄清提交后，会在12小时内以脉脉消息的形式通知审核结果，请注意查收！")))}}]),t}(d.default.Component),i.contextTypes={auth_info:d.default.PropTypes.object,req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,env:d.default.PropTypes.object,wx_sdk:d.default.PropTypes.object},u)}});