webpackJsonp([25,29],{1153:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=n(113),i=n(76),o=s(i),l=n(992),c=n(284),d=s(c),u=n(1),p=n(41),m=(n(171),n(90)),f=(n(50),n(46)),_=n(75),h=_.parse_online_json,g=_.toast_error_handler,y=n(15),v=n(114),k=u.createClass({displayName:"YewenTaskCard",mixins:[p],contextTypes:{fconf:u.PropTypes.object,auth_info:u.PropTypes.object,req:u.PropTypes.object},formatCompleteBottomText:function(){return"已回答"},ignoreTask:function(){var e=this;(0,l.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},cardClick:function(e){e.stopPropagation();var t=this.props.question.question_id,n={qid:t,from:"tasklist"},s="http://yewen.maimai.cn/app/write_answer?"+y.stringify(n);f(s,"回答悬赏问题-业问","fetch")},ignore:function(e){e&&e.stopPropagation();var t=this.props,n=t.question,s=t.cursor,i=t.index,l=this.context,c=l.fconf,d=l.auth_info,u=c.online_url+"user/v4/ignore_yw_question?"+y.stringify(r({qid:n.question_id},d)),p=fetch(u).then(h).then(function(){(0,o.default)("已忽略"),(0,a.sendWebViewBroadcast)("yewen_is_done",{id:n.question_id,done:2})}).catch(function(e){throw s.select("yewen_questions","questions",i).select("done").set(0),e}).catch(g);v("忽略中",p)},componentDidMount:function(){},componentWillUnmount:function(){},complete:function(e){e.stopPropagation(),this.cardClick(e)},renderBottomButtons:function(){return u.createElement("div",{style:{width:"92px"}},u.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},u.createElement("img",{style:b.dealImg,src:"/static/images/wrong.png"})),u.createElement("div",{style:{float:"left"},onClick:this.complete},u.createElement("img",{style:b.dealImg,src:"/static/images/right_A.png"})))},renderDoneArea:function(){var e=this.props.question;return u.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():"已忽略")},render:function(){var e=this.context,t=(e.auth_info,e.fconf,this.props),n=t.question;t.pending;return u.createElement(d.default,{component:"li",className:"list-group-item",pressDelay:800},u.createElement("div",{className:"media list-group-item-heading list-group-item-text"},u.createElement("div",{className:"media-left media-middle"},u.createElement("img",{style:b.avatar,src:"/static/images/yewen_icon.jpg",onClick:this.cardClick})),u.createElement("div",{className:"media-body media-middle",onClick:this.cardClick},u.createElement("div",{style:b.name},u.createElement("div",{style:b.namestr},"用户悬赏",n.value,"元提问")),u.createElement("div",{style:b.line1,className:"text-muted small lineClamp2"},u.createElement(m,{text:n.title,support_dref:!0}))),u.createElement("div",{className:"media-right media-middle"},n.done?this.renderDoneArea():this.renderBottomButtons())))}}),b={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},oneButton:{display:"inline-block",width:"60px",paddingLeft:4,paddingRight:4},avatar:{width:52,height:52},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},test:{background:"red"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"62px",marginTop:7}};e.exports=k},1154:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=n(1e3),i=(s(a),n(77)),o=s(i),l=n(167),c=n(164),d=n(995),u=s(d),p=n(113),m=n(76),f=s(m),_=n(288),h=s(_),g=n(992),y=n(284),v=s(y),k=n(1),b=n(41),q=(n(171),n(90)),w=n(50),x=n(46),E=n(75),C=E.parse_online_json,M=E.toast_error_handler,N=n(15),B=(n(282).format_for_message,n(114)),T=k.createClass({displayName:"NewTaskCard",mixins:[b],contextTypes:{fconf:k.PropTypes.object,auth_info:k.PropTypes.object,req:k.PropTypes.object},cardClick:function(e){(({10:this.groupMid,12:this.inviteMid,6:this.spreadMid,3:this.recMid,4:this.transMid,8:this.inclvMid,20008:this.openUrlForCshow,19:this.openCardUrlForJob,23:this.openCardUrlForCompany,20:this.openCardUrlForJob,1e4:this.props.updateMyselfInfo,2000001:this.frMid})[this.props.task.type]||this.iconClick)(e)},avatarClick:function(e){var t=this.props.task.icon_mmid;1e4==this.props.task.type?this.props.updateMyselfInfo():t?this.iconClick(e):({10:this.groupDetail,12:this.groupDetail,20008:this.openUrlForCshow,19:this.openAvatarUrlForJob,23:this.openAvatarUrlForCompany,20:this.openAvatarUrlForJob,6:this.openCardUrlForJob}[this.props.task.type]||this.iconClick)(e)},formatBottomText:function(){var e=this.props.task;if(e.type>2e6)return"查看";switch(e.type){case 1:return"通过";case 3:return"引荐";case 4:return"通过";case 5:return"投递";case 6:return"分享";case 8:return"通过";case 12:return"加入";case 20008:return"查看";case 1e4:return"完善";default:return"通过"}},formatCompleteBottomText:function(){var e=this.props.task;if(e.type>2e6)return"已读";switch(e.type){case 1:return"已通过";case 3:return"已引荐";case 4:return"已通过";case 5:return"已投递";case 6:return"已分享";case 8:return"已通过";case 12:return"已加入";case 20008:return"已查看";case 1e4:return"已完善";default:return"已通过"}},ignoreTask:function(){var e=this;(0,g.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},openUrlForCshow:function(e){this.ignore(),w("/contact/magic_moment?source=todo","人脉秀")},openCardUrlForJob:function(e){var t=this.props.task;w(t.card_url,"职位详情")},openCardUrlForCompany:function(e){var t=this.props.task;w(t.card_url,"公司详情")},openAvatarUrlForJob:function(e){var t=this.props.task;w(t.avatar_url,"页面")},openAvatarUrlForCompany:function(e){var t=this.props.task;w(t.avatar_url,"公司详情 ")},frMid:function(e){var t="/user_conf/fr_mid?src=list&task_id="+this.props.task.id;x(t,"好友申请","fetch")},inclvMid:function(e){var t="/user_conf/inclv_mid?src=list&task_id="+this.props.task.id;x(t,"好友申请","fetch")},recMid:function(e){var t="/user_conf/rec_mid?src=list&task_id="+this.props.task.id;x(t,"求引荐好友","fetch")},transMid:function(e){var t="/user_conf/trans_mid?src=list&task_id="+this.props.task.id;x(t,"转达好友申请","fetch")},groupMid:function(e){var t="/user_conf/group_mid?task_id="+this.props.task.id;x(t,"加群申请","fetch")},inviteMid:function(e){var t="/user_conf/invite_mid?task_id="+this.props.task.id;x(t,"群邀请","fetch")},spreadMid:function(e){var t="/user_conf/spread_mid?task_id="+this.props.task.id;x(t,"求分享职位","fetch")},groupDetail:function(e){var t="/group?gid="+this.props.task.mid;w(t)},iconClick:function(e){e.stopPropagation();var t=this.props.task,n=t.icon_mmid,s=t.bktoken,r={from:"tasklist"};s&&(r.bktoken=s);var a="/contact/detail/"+n+"?"+N.stringify(r);x(a,"人脉详情","fetch")},ignore:function(e){var t=this;e&&e.stopPropagation();var n=this.props,s=n.task,a=n.cursor,i=n.index,o=n.resume_request_block,l=n.resume_storage_request_block,c=n.candidate_hunter_service_block,d=this.context,u=d.fconf,m=d.auth_info,_=u.online_url+"user/v3/ignore_task?"+N.stringify(r({id:s.id,type:s.type},m));if(s.label_item)var h=JSON.stringify({company:s.label_item.company,position:s.label_item.position,description:""}),g=JSON.stringify({school:s.label_item.school,department:s.label_item.department,description:"",degree:s.label_item.degree});var y=fetch(_).then(C).then(function(){20008!=s.type&&(0,f.default)("已忽略"),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:2}),21==s.type?t.openEditView(h):22==s.type&&t.openEditView(g)}).catch(function(e){throw 10==s.type?"其他管理员已忽略"==e?(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:2}):"其他管理员已通过"==e&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:s.id,done:1}):1==o?a.select("resume_request_tasks","requests",i).select("done").set(0):1==c?a.select("candidate_hunter_service_tasks","requests",i).select("done").set(0):1==l?a.select("resume_storage_request_tasks","requests",i).select("done").set(0):a.select("tasks","requests",i).select("done").set(0),e}).catch(M);20008==s.type?y.then(function(e){return e}).catch(function(e){throw e}):B("忽略中",y)},openEditView:function(e){21==this.props.task.type?(0,c.openWorkExpCustom)(!1,e):(0,c.openEduExpCustom)(!1,e)},addFriend:function(){this.props.mystatus.status?this.sendRequest({lv:1}):(0,l.showModalForConfirm)({title:"您完善个人信息后才能加好友",ok_text:"去完善",ok:function(){(0,c.completeRealProfile)(c.refreshPageSilent)},cancel_text:"取消"})},recommendFriend:function(){var e=this,t=this.props.task,n="向"+t.trg_name+"说明引荐"+t.src_name+"的理由（不少于5个字）";o.default.popup(k.createElement(u.default,{title:"填写转达理由（必填）",placeholder:n,checkbox:"同时拉个群聊聊(更真诚可信哦~)",ok:function(n,s){if(n.length<5)return void alert("转达理由不能少于5个字");o.default.dismiss(),e.sendRequest({attach:n},function(e){s&&(0,c.startGroupChat)(t.mmids)})}}))},increaseFriendLevel:function(){var e=this,t=this.props.task;t.confirm&&0==t.confirm.post?(0,l.showModalForConfirm)({title:t.confirm.text,ok_text:"确定",ok:function(){e.sendRequest()},cancel_text:"取消"}):this.sendRequest()},sendResumeStorage:function(){var e=this.props,t=e.cursor,n=e.task,s=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"job/v3/recommend/accept_resume_storage_invite?"+N.stringify(r({cid:n.cid,type:n.type,cr_id:n.id},o)),c=fetch(l,{credentials:"same-origin"}).then(C).then(function(e){t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3}),(0,f.default)("已表达感兴趣")}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3})):(0,f.default)("网络连接失败")});B("处理中...",c)},sendResume:function(){var e=this.props,t=e.cursor,n=e.task,s=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"job/v3/recommend/accept_anonymous_invite?"+N.stringify(r({jid:n.jid,type:n.type},o)),c=fetch(l).then(C).then(function(e){t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3}),MaiMai_Native.native_chat&&e&&e.to_uid?MaiMai_Native.native_chat("",e.to_uid):(0,f.default)("已表达感兴趣")}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3})):(0,f.default)("网络连接失败")});B("处理中...",c)},applyCandidateHunterService:function(){var e=this.props,t=e.cursor,n=e.task,s=e.index,a=this.context,i=a.fconf,o=a.auth_info,l=i.online_url+"talent/v3/co_hunter/apply?"+N.stringify(r({jid:n.jid,type:n.type},o)),c=fetch(l).then(C).then(function(e){(0,f.default)("提交成功"),t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3})}).catch(function(e){"string"==typeof e?((0,f.default)(e),t.select("tasks","requests",s).select("done").set(3),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:n.id,done:3})):(0,f.default)("网络连接失败")});B("投递中",c)},sendRequest:function(e,t){var n=this,s=this.props,a=s.cursor,i=s.task,o=s.index,l=this.context,c=l.fconf,d=l.auth_info;if(i.label_item)var u=JSON.stringify({company:i.label_item.company,position:i.label_item.position,description:""}),m=JSON.stringify({school:i.label_item.school,department:i.label_item.department,description:"",degree:i.label_item.degree});e=e||{};var _=c.online_url+"user/v3/complete_task?"+N.stringify(r({id:i.id,type:i.type},d,e)),h=1==i.type;h&&((0,f.default)("已通过"),a.select("tasks","requests",o).select("done").set(3),window.MaiMai_Native&&window.MaiMai_Native.show_notice_remind&&window.MaiMai_Native.show_notice_remind(),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:3}));var g=fetch(_).then(C).then(function(e){21==i.type?n.openEditView(u):22==i.type&&n.openEditView(m),i.type<2e6&&(h||(0,f.default)("已通过"),(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:1,asyncMode:h})),t&&t(e)}).catch(function(e){throw 10==i.type?"其他管理员已忽略"==e?(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:2}):"添加的成员已在群中"!=e&&"其他管理员已通过"!=e||(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:1}):(a.select("tasks","requests",o).select("done").set(0),h&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:i.id,done:0,asyncMode:h})),e}).catch(M);h||B("通过中",g)},componentDidMount:function(){6==this.props.task.type&&(0,p.bindBroadcast)("task_is_done",this.updateTaskState)},componentWillUnmount:function(){},updateTaskState:function(e){6==this.props.task.type&&this.props.task.id==e&&(0,p.sendWebViewBroadcast)("task_mid_is_done",{id:e,done:1})},spreadJob:function(){2==this.props.task.job.status?(0,f.default)("该职位已过期"):(0,c.spreadJob)(this.props.task)},complete:function(e){e.stopPropagation();var t=this.props.task;1e4==t.type?this.props.updateMyselfInfo():1==t.type?this.addFriend():3==t.type?this.recommendFriend():6==t.type?this.spreadJob():8==t.type?this.increaseFriendLevel():4==t.type?this.addFriend():20008==t.type?this.openUrlForCshow():19==t.type?this.sendResume():20==t.type?this.applyCandidateHunterService():23==t.type?this.sendResumeStorage():2000001==t.type?this.frMid():this.sendRequest()},renderBottomButtons:function(){var e=this.props.task;e.type;if(1e4!=e.type&&20008!=e.type){if(1==e.type&&2==e.real_accepted)return;return e.type>2e6?k.createElement("div",{className:"text-right"},k.createElement("span",{className:"text-center"},k.createElement("button",{onClick:this.cardClick,className:"voidBlueBtnM small white-bg"},"查看"))):k.createElement("div",{style:{width:"92px"}},k.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},k.createElement("img",{style:P.dealImg,src:"/static/images/wrong.png"})),k.createElement("div",{style:{float:"left"},onClick:this.complete},k.createElement("img",{style:P.dealImg,src:1==e.type||8==e.type||3==e.type||4==e.type?"/static/images/right_A.png":"/static/images/right_B.png"})))}return k.createElement("div",{className:"text-right"},k.createElement("span",{className:"text-center"},k.createElement("button",{onClick:this.complete,className:"voidBlueBtnM small white-bg"},20008==e.type?"查看":"完善")))},renderDoneArea:function(){var e=this.props.task;return k.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():e.type>2e6?"已读":"已忽略")},renderMember:function(){var e=this.props.task.member||{};return 1==e.mem_id||2==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img1",onClick:this.openMyMember}):3==e.mem_id||5==e.mem_id||6==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img2",onClick:this.openMyMember}):4==e.mem_id?k.createElement("span",{className:"cursor-pointer  add_huiyuan_img3",onClick:this.openMyMember}):k.createElement("span",{className:"cursor-pointer  add_huiyuan_img",onClick:this.openMyMember})},openMyMember:function(e){e.stopPropagation(),x("/uh_memlist?tpl=show&fr=tasks","会员权益","fetch")},render:function(){var e=this.context,t=(e.auth_info,e.fconf,this.props),n=t.task,s=(t.pending,(0,h.default)("small",n.is_alert&&n.is_alert>0?"text-danger":"text-muted"),""),r=n.frm&&n.frm.indexOf("job")>=0,a=n.block&&1==n.block;s=a?"warn-icon":n.is_reply||r?"":n.is_alert?"warn-icon":n.is_eval||n.is_light||n.qr||n.sch?"eval-icon":1e4==n.type&&1!=n.ustatus?"text-red":"";var i=!!(n.is_eval||n.is_light||r||a||n.sch||n.qr||19==n.type||20==n.type);return k.createElement(v.default,{component:"li",className:"list-group-item",pressDelay:800},k.createElement("div",{className:"list-group-item-heading list-group-item-text"},k.createElement("div",{className:"media-left media-middle"},k.createElement("img",{className:"avatar-56 radius-50",src:n.icon,onClick:this.avatarClick})),k.createElement("div",{className:"media-body media-middle",onClick:this.cardClick},k.createElement("div",{style:P.name},k.createElement("div",{style:P.namestr},n.title)),k.createElement("div",{style:P.line1,className:"text-muted small lineClamp2"},k.createElement(q,{text:n.rtext||n.text,support_dref:!0}),(1==n.type||8==n.type)&&1==n.judge&&k.createElement("span",{className:"add_v_img"}),(1==n.type||8==n.type)&&n.member&&1==n.member.mem_st&&this.renderMember()),!1),k.createElement("div",{className:"media-right media-middle"},n.done?this.renderDoneArea():this.renderBottomButtons())),i&&k.createElement("div",{className:"lineClamp2 font-13",style:P.addTxt,onClick:this.cardClick},k.createElement("div",{className:s},k.createElement("span",null,a?"用户已被封禁":r||n.sch||n.qr?n.attach:n.is_alert?n.attach:n.is_light?n.lightspot:n.attach))))}}),P={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},buttons:{marginTop:6,height:40},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},oneButton:{display:"inline-block",width:"60px",paddingLeft:4,paddingRight:4},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},test:{background:"red"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"66px",marginTop:7}};e.exports=T},1155:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a=n(1e3),i=(s(a),n(77)),o=(s(i),n(167),n(164)),l=n(995),c=(s(l),n(113)),d=n(76),u=s(d),p=n(288),m=(s(p),n(992)),f=n(284),_=s(f),h=n(78),g=s(h),y=n(1),v=n(41),k=(n(171),n(90)),b=(n(50),n(46)),q=n(75),w=q.parse_online_json,x=q.toast_error_handler,E=n(15),C=(n(282).format_for_message,y.createClass({displayName:"NewTaskCardService2",mixins:[v],contextTypes:{fconf:y.PropTypes.object,auth_info:y.PropTypes.object,req:y.PropTypes.object},formatCompleteBottomText:function(){switch(this.props.order.type){case"service":case"chatgift":default:return"已接单"}},ignoreTask:function(){var e=this;(0,m.showListDialog)("",JSON.stringify(["   忽略"]),function(){e.ignore()})},ignore:function(e){e&&e.stopPropagation();var t=this.props,n=t.order,s=t.cursor,a=t.index,i=this.context,o=i.fconf,l=i.auth_info,d="service"==n.type?o.online_url+"talent/v3/usrv/order_reject?"+E.stringify(r({orderid:n.orderid},l)):o.online_url+"talent/v3/uh/chatgift_reject?"+E.stringify(r({uhdealid:n.id,process_channel:"task_list"},l));fetch(d).then(w).then(function(e){1==e.ret&&((0,u.default)("已忽略"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:n.orderid,done:2}))}).catch(function(e){throw s.select("services2","orders",a).select("done").set(0),e}).catch(x)},sendRequest:function(e,t){var n=this.props,s=n.cursor,a=n.order,i=n.index,l=this.context,d=l.fconf,p=l.auth_info;e=e||{};var m="talent/v3/usrv/order_accept?";"service"==a.type&&0==a.service.call&&2==a.st?m="talent/v3/usrv/order_confirm?":"service"==a.type&&0==a.service.call&&5==a.st&&(m="talent/v3/usrv/order_refund?");var f="service"==a.type?d.online_url+m+E.stringify(r({orderid:a.orderid},p,e)):d.online_url+"talent/v3/uh/chatgift_accept?"+E.stringify(r({uhdealid:a.id,process_channel:"task_list"},p,e));fetch(f).then(w).then(function(e){1==e.ret?"service"==a.type&&0==a.service.call&&2==a.st?((0,u.default)("已确认"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),t&&t(e)):"service"==a.type&&0==a.service.call&&5==a.st?((0,u.default)("已同意"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),t&&t(e)):((0,u.default)("已通过"),(0,c.sendWebViewBroadcast)("task_mid_is_done",{orderid:a.orderid,done:1}),setTimeout(function(){(0,o.startChatView)(null,"service"==a.type?a.srcu:a.from_uid,!1,null,!1)},800),t&&t(e)):(0,u.default)(e.error)}).catch(function(e){throw s.select("services2","orders",i).select("done").set(0),e}).catch(x)},goContactDetail:function(){var e=this.props.order;(0,g.default)(e.srcucard.id,this.context)},goUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b(e,t,"fetch")},componentDidMount:function(){var e=this.props.order;window["_orderStartCall_"+e.orderid]=this._orderStartCall},componentWillUnmount:function(){},complete:function(e){e.stopPropagation(),this.sendRequest()},renderBottomButtons:function(){var e=this,t=this.props.order,n=(t.type,y.createElement("div",{style:{width:"92px"}},y.createElement("div",{style:{marginRight:"12px",float:"left"},onClick:this.ignore},y.createElement("img",{style:M.dealImg,src:"/static/images/wrong.png"})),y.createElement("div",{style:{float:"left"},onClick:this.complete},y.createElement("img",{style:M.dealImg,src:"/static/images/greenRight_A.png"}))));if("service"==t.type&&0==t.service.call&&2==t.st){var s="确认服务";1==t.for_member&&(s="确认见面"),n=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[M.noPaddingRight,{width:"80px"}],onClick:this.complete},s))}else"service"==t.type&&0==t.service.call&&5==t.st?n=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[M.noPaddingRight,{width:"80px"}],onClick:this.complete},"同意退款")):"service"==t.type&&1==t.service.call&&2==t.st&&(n=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[M.noPaddingRight,{width:"80px"}],onClick:this.orderStartCall},"开始通话")),t.actual_cost>0&&(n=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[M.noPaddingRight,{width:"80px"}],onClick:this.orderStartCall},"重拨"))));return"zd"==t.type&&(n=y.createElement("div",{style:{width:"80px"}},y.createElement("div",{className:"voidBlueBtnM small",style:[M.noPaddingRight,{width:"80px"}],onClick:function(){e.goUrl(t.btn_url,"订单详情")}},"去回答"))),n},_orderStartCall:function(e){var t=this.context,n=t.auth_info,s=t.fconf,a=this.props.order,i=s.online_url+"talent/v3/usrv/order_start_call?"+E.stringify(r({orderid:a.orderid},n));fetch(i).then(w).then(function(e){1==e.ret?((0,u.default)("正在连线，请您耐心等待..."),setTimeout(function(){alert("完成通话后，请您确认服务并评价。如遇未接通，可尝试重新拨打。"),location.reload()},1e4)):((0,u.default)(e.error),setTimeout(function(){location.reload()},1e3))}).catch(x)},orderStartCall:function(e){var t=this.props.order;e.stopPropagation(),confirm("您确定开始通话吗?")&&(MaiMai_Native.native_save_service_phone_no?MaiMai_Native.native_save_service_phone_no("_orderStartCall_"+t.orderid):this._orderStartCall(""))},renderDoneArea:function(){var e=this.props.order;return y.createElement("div",{style:{width:"50px"},className:"text-right"},1==e.done?this.formatCompleteBottomText():"已忽略")},renderMember:function(){var e=this.props.order.member||{};return 1==e.mem_id||2==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img1",onClick:this.openMyMember}):3==e.mem_id||5==e.mem_id||6==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img2",onClick:this.openMyMember}):4==e.mem_id?y.createElement("span",{className:"cursor-pointer  add_huiyuan_img3",onClick:this.openMyMember}):y.createElement("span",{className:"cursor-pointer  add_huiyuan_img",onClick:this.openMyMember})},openMyMember:function(e){e.stopPropagation(),b("/uh_memlist?tpl=show&fr=tasks","会员权益","fetch")},render:function(){var e=this,t=(this.context.req,this.props.order),n=t.title,s="";"service"==t.type?(s="已支付"+t.cost+"元购买服务",1==t.for_member&&(s="")):"chatgift"==t.type?3==t.pay_status&&1==t.refund_type&&0==t.is_accept_later?s="对方已等待超过24小时，请处理":1==t.pay_status&&(s=t.cost+"元心意礼金请你喝杯咖啡",1==t.is_noincome&&(s="奖励1点影响力，请您处理一下")):"zd"==t.type&&(s="回答后，您将收入"+t.cost_in.toFixed(1)+"元");var r="service-icon";return"service"==t.type&&0==t.service.call&&2==t.st?(s=t.srcucard.name+"已接单，服务完成后请您确认，Ta将收到服务费。3个工作日后将自动确认。",1==t.for_member&&(s=t.srcucard.name+"已接受见面邀请,约好线下见面时间后请确认。"),r="remind-icon"):"service"==t.type&&0==t.service.call&&5==t.st?(s=t.srcucard.name+"申请退款，请您处理。3个工作日后未处理，系统将自动退款。",r="remind-icon"):"service"==t.type&&1==t.service.call&&2==t.st&&(s=t.srcucard.name+"已同意通话，协商通话时间后请点击“开始通话”发起。15天后未发起自动取消订单",t.actual_cost>0&&(s="您已通话。有需要可重拨或点击卡片去“确认服务”。3个工作日内未处理将自动确认。"),r="remind-icon"),y.createElement(_.default,{component:"li",className:"list-group-item"},y.createElement("div",{className:"media list-group-item-heading list-group-item-text"},y.createElement("div",{className:"media-left media-middle"},y.createElement("img",{style:M.avatar,src:t.srcucard.avatar,onClick:this.goContactDetail})),y.createElement("div",{className:"media-body media-middle",onClick:function(){e.goUrl(t.btn_url,"service"==t.type?"订单详情":"极速联系")}},y.createElement("div",{style:M.name},y.createElement("div",{style:M.namestr},n)),y.createElement("div",{style:M.line1,className:"text-muted small lineClamp1"},y.createElement(k,{text:t.srcucard.name+" | "+t.srcucard.career,support_dref:!0}),1==t.srcucard.judge&&y.createElement("span",{className:"add_v_img"}),t.member&&1==t.member.mem_st&&this.renderMember()),("chatgift"==t.type||"service"==t.type&&1==t.st)&&y.createElement("div",{className:"lineClamp2 font-13"},y.createElement("span",null,"附言: ",t.msg?t.msg:"无")),"zd"==t.type&&y.createElement("div",{className:"lineClamp2 font-13"},y.createElement("span",null,"问题: ",t.msg?t.msg:"无"))),y.createElement("div",{className:"media-right media-middle"},t.done?this.renderDoneArea():this.renderBottomButtons())),y.createElement("div",{style:M.addTxt,onClick:function(){e.goUrl(t.btn_url,"订单详情")}},y.createElement("div",{className:"service"==t.type?r:"commu-icon"},s)))}})),M={done:{marginTop:6,height:40,lineHeight:"40px",verticalAlign:"middle",backgroundColor:"#efefef"},button:{display:"inline-block",width:"50%",paddingLeft:4,paddingRight:4},avatar:{width:52,height:52},name:{fontSize:15,marginTop:6,marginBottom:6,marginRight:5},namestr:{textOverflow:"ellipsis",overflow:"hidden",width:"100%",WebkitLineClamp:1,display:"-webkit-box",WebkitBoxOrient:"vertical"},line1:{fontSize:13,marginBottom:5},dd:{lineHeight:"14px",fontSize:"12px",color:"#808080",wordWrap:"break-word",wordBreak:"break-all"},dealImg:{width:40,height:33},addTxt:{paddingLeft:"62px",marginTop:7},noPaddingRight:{marginRight:"-10px",marginTop:"6px"}};e.exports=C},689:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),u=n(15),p=s(u),m=n(75),f=n(981),_=s(f),h=n(1),g=s(h),y=n(165),v=s(y),k=n(1007),b=s(k),q=n(986),w=s(q),x=n(1153),E=s(x),C=n(1154),M=s(C),N=n(1155),B=s(N),T=n(272),P=s(T),j=n(46),R=s(j),S=n(114),O=s(S),F=n(164),W=n(113),A=n(167),V=n(292),L=s(V),U=n(982),I=n(983);n(985)("app");t.default=e.exports=(l=o=function(e){function t(){var e,n,s,i;r(this,t);for(var o=arguments.length,l=Array(o),d=0;d<o;d++)l[d]=arguments[d];return n=s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),s.loadMoreContacts=function(){var e=s.props.cursor,n=s.refs.loader;n&&n.bindRequest(function(){return t.loadContacts(s.context,s.nextPage).then(function(t){e.select("contacts","contacts").concat(t.contacts||[]),e.select("contacts","remain").set(t.remain||0),s.nextPage++})})},s.loadMoreServices=function(){var e=s.props,n=e.cursor,r=e.services2,a=s.refs.loader;a&&a.bindRequest(function(){return t.loadServices(s.context,r.more_idx).then(function(e){n.select("services2","orders").concat(e.orders||[]),n.select("services2","more_num").set(e.more_num||0),n.select("services2","more_idx").set(e.more_idx||0)})})},s.loadMoreQuestions=function(){var e=s.props,n=e.cursor,r=(e.yewen_questions,s.refs.loader);r&&r.bindRequest(function(){return t.loadQuestions(s.context,s.nextPage||1).then(function(e){n.select("yewen_questions","questions").concat(e.questions||[]),n.select("yewen_questions","more").set(e.more||0),s.nextPage++})})},s.loadMore=function(){var e=s.props.cursor,n=s.refs.loader;n&&n.bindRequest(function(){return console.log("============= request loading  "),t.loadData(s.context,s.nextPage||1).then(function(t){e.select("tasks","requests").concat(t.requests),e.select("tasks","remain").set(t.remain),s.nextPage++,s.context.req.query.badge||(0,W.sendWebViewBroadcast)("load_more",{})})})},s.reloadReqs=function(){var e=s.props.cursor,n=s.refs.loader;n&&n.bindRequest(function(){return t.loadData(s.context,0).then(function(t){e.select("tasks","requests").set(t.requests),e.select("tasks","remain").set(t.remain)})})},s.componentDidMount=function(){var e=s.context.req;s.nextPage=1,window.setting=s.setting,window.ignoreAllAddFr=s.ignoreAllAddFr,s.props.mystatus.status||(0,W.bindBroadcast)("User_Info_Changed",F.refreshPageSilent),(0,W.bindBroadcast)("task_mid_is_done",s.updateMidTaskState),(0,W.bindBroadcast)("yewen_is_done",s.updateYewenQuestionState),(0,W.bindBroadcast)("acceptFriendSuc",s.updateTaskStateByUid),(0,W.bindBroadcast)("phone_service_end",s.onPhoneServiceEnd),(0,W.bindBroadcast)("ignore_all_add_fr",F.refreshPageSilent),(0,W.bindBroadcast)("ignore_alert",s.ignoreAlert),s.context.req.query.badge&&(0,W.bindBroadcast)("load_more",s.loadMore),s.context.req.query.open_webjid&&(0,R.default)("/job?webjid="+s.context.req.query.open_webjid,"职位详情","fetch"),1==e.query.pending&&window.MaiMai_Native&&window.MaiMai_Native.native_clear_task_list_badge&&window.MaiMai_Native.native_clear_task_list_badge()},s.spliceTaskList=function(e){var t=s.props,n=t.cursor,r=t.displayLen,a=t.tasks,i=t.originLen,o=s.context.req;r>i?(r--,n.select("displayLen").set(r)):n.select("displayLen").set(i),n.select("tasks","requests").splice([e,1]),o.query.badge&&n.select("tasks","requests").get().length<=i&&a.remain>0&&s.loadMore()},s.spliceQuestionList=function(e){var t=s.props,n=t.cursor,r=t.yewen,a=t.yewen_questions,i=t.originLen,o=s.context.req;r>i?(r--,n.select("yewen").set(r)):n.select("yewen").set(i),n.select("yewen_questions","questions").splice([e,1]),o.query.badge&&n.select("yewen_questions","questions").get().length<=i&&a.more>0&&s.loadMoreQuestions()},s.spliceOrderList=function(e){var t=s.props,n=t.cursor,r=t.uh,a=t.services2,i=t.originLen,o=s.context.req;r>i?(r--,n.select("uh").set(r)):n.select("uh").set(i),n.select("services2","orders").splice([e,1]),o.query.badge&&n.select("services2","orders").get().length<=i&&a.more_num>0&&s.loadMoreServices()},s.updateMidTaskState=function(e){if(e.id){var t=s.props,n=t.cursor,r=t.tasks,a=t.resume_request_tasks,i=t.resume_storage_request_tasks,o=t.candidate_hunter_service_tasks,l=r.all_total;0==e.done&&e.asyncMode?l++:1==e.done&&e.asyncMode||l--,n.select("tasks").select("all_total").set(l),r.requests.map(function(t,r){t.id==e.id&&(n.select("tasks","requests",r).select("done").set(e.done),1!=e.done&&2!=e.done||s.spliceTaskList(r))}),s.show_resume_request_block()&&a.requests.map(function(t,s){t.id==e.id&&(n.select("resume_request_tasks","requests",s).select("done").set(e.done),1!=e.done&&2!=e.done||n.select("tasks","requests").splice([index,1]))}),s.show_resume_storage_block()&&i.requests.map(function(t,s){t.id==e.id&&(n.select("resume_storage_request_tasks","requests",s).select("done").set(e.done),1!=e.done&&2!=e.done||n.select("tasks","requests").splice([index,1]))}),s.show_candidate_hunter_service_block()&&o.requests.map(function(t,s){t.id==e.id&&(n.select("candidate_hunter_service_tasks","requests",s).select("done").set(e.done),1!=e.done&&2!=e.done||n.select("tasks","requests").splice([index,1]))})}else if(e.orderid){var c=s.props,n=c.cursor,d=c.services2,l=d.total_num;l--,n.select("services2").select("total_num").set(l),d.orders.map(function(t,r){t.orderid==e.orderid&&(n.select("services2","orders",r).select("done").set(e.done),s.spliceOrderList(r))})}},s.updateTaskStateByUid=function(e){var t=s.props,n=t.cursor,r=t.tasks,a=r.all_total;r.requests.map(function(t,r){t.icon_user==e&&1==t.type&&(n.select("tasks","requests",r).select("done").set(1),s.spliceTaskList(r),a--,n.select("tasks").select("all_total").set(a))})},s.updateYewenQuestionState=function(e){var t=s.props,n=t.cursor,r=t.yewen_questions,a=r.total||0;r.questions.map(function(t,r){t.question_id==e.id&&(n.select("yewen_questions","questions",r).select("done").set(1),s.spliceQuestionList(r),a--,n.select("yewen_questions").select("total").set(a))})},s.onPhoneServiceEnd=function(){location.reload()},s.ignoreAlert=function(){s.props.cursor.select("tasks","alert_fr").set(null)},s.to_privacy_setting=function(){var e=s.context,t=e.fconf,n=e.auth_info,r=s.props.cursor;fetch(t.online_url+"user/v3/ignore_fr_alert?"+p.default.stringify(c({},n))),r.select("tasks","alert_fr").set(null),(0,W.sendWebViewBroadcast)("ignore_alert",{}),(0,R.default)("/user_conf/privacy_add_friends","防打扰设置","fetch")},s.close_alert=function(){var e=s.props.cursor,t=s.context,n=t.fconf,r=t.auth_info;fetch(n.online_url+"user/v3/ignore_fr_alert?"+p.default.stringify(c({},r))),e.select("tasks","alert_fr").set(null),(0,W.sendWebViewBroadcast)("ignore_alert",{})},s.updateMyselfInfo=function(){(0,R.default)("/contact/detail/"+s.context.auth_info.u+"?edit_mode=1&from=task_list_edit","编辑资料","fetch")},s.more_tasks=function(){s.reloadReqs(),(0,R.default)("/user_conf/task_list?pending=2","待处理事项","fetch")},s.more_services=function(){(0,R.default)("/user_conf/task_list?pending=3","待处理订单","fetch")},s.more_questions=function(){(0,R.default)("/user_conf/task_list?pending=4","回答悬赏问题-业问","fetch")},s.more_request_resume_tasks=function(){s.reloadReqs(),(0,R.default)("/user_conf/task_list?pending=5","待处理职业机会","fetch")},s.more_request_resume_storage_tasks=function(){s.reloadReqs(),(0,R.default)("/user_conf/task_list?pending=7","待处理职业机会","fetch")},s.more_candidate_hunter_service_tasks=function(){s.reloadReqs(),(0,R.default)("/user_conf/task_list?pending=6","职业发展顾问推荐","fetch")},s.ignoreAllAddFr=function(){(0,A.showModalForConfirm)({title:"忽略全部待处理好友请求，同时待处理的好友申请将被清空",ok_text:"忽略全部",ok:function(){var e=s.context,t=e.fconf,n=e.auth_info,r=fetch(t.online_url+"user/v3/ignore_all_frtasks?"+p.default.stringify(c({},n))).then(m.parse_online_json).then(function(e){(0,W.sendWebViewBroadcast)("ignore_all_add_fr",{})}).catch(m.toast_error_handler);(0,O.default)("请求中...",r)},cancel_text:"取消"})},s.filterRequests=function(){var e=s.props.tasks,t=s.context.req,n=s.show_resume_request_block(),r=s.show_resume_storage_block(),a=n||5!=t.query.pending,i=r||7!=t.query.pending;return e.requests?e.requests.filter(function(e){return 1e4==e.type||!(a&&19==e.type||i&&23==e.type)&&0==e.done}):[]},s.filterResumeRequests=function(){var e=s.props.resume_request_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},s.filterResumeStorageRequests=function(){var e=s.props.resume_storage_request_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},s.filterCandidateHunterServices=function(){var e=s.props.candidate_hunter_service_tasks;return e&&e.requests?e.requests.filter(function(e){return 0==e.done}):[]},s.indexOfRequests=function(e){return s.props.tasks.requests.indexOf(e)},s.show_resume_request_block=function(){var e=s.props.resume_request_tasks;return e&&e.requests&&e.requests.length>0},s.show_resume_storage_block=function(){var e=s.props.resume_storage_request_tasks;return e&&e.requests&&e.requests.length>0},s.show_candidate_hunter_service_block=function(){var e=s.props.candidate_hunter_service_tasks;return e&&e.requests&&e.requests.length>0},s.open_vip_page=function(){(0,R.default)("/uh_memlist?fr=tasklst_1","购买会员","fetch")},i=n,a(s,i)}return i(t,e),d(t,[{key:"setting",value:function(){(0,R.default)("/user_conf/privacy_add_friends","防打扰设置","fetch")}},{key:"render",value:function(){var e,t=this,n=this.props,s=n.tasks,r=n.services2,a=n.contacts,i=n.displayLen,o=(n.uh,n.uhbadge),l=n.yewen,c=n.ywbadge,d=n.yewen_questions,u=n.cursor,p=n.resume_request_tasks,m=n.resume_storage_request_tasks,f=n.candidate_hunter_service_tasks,h=n.mycard,y=this.context.req,k=this.filterRequests();k&&k[0]&&1e4==k[0].type&&i++;var q=a&&a.contacts.length>0;1==y.query.pending&&y.query.badge?(e=P.default,e.top_right_item={title:"设置",callback:"setting()"}):2==y.query.pending&&s.all_total>0&&(e=P.default,e.top_right_item={title:"忽略全部",callback:"ignoreAllAddFr()"});var x=r&&r.orders.length>0,C=d&&d.questions.length>0,N=this.filterResumeRequests(),T=this.filterResumeStorageRequests(),j=this.show_resume_request_block()&&N.length>0,R=this.show_resume_storage_block()&&T.length>0,S=this.filterCandidateHunterServices(),O=this.show_candidate_hunter_service_block()&&S.length>0,F=!1,W=q?{loadMore:this.loadMoreContacts,hasMore:a.remain>0}:x&&3==y.query.pending?{loadMore:this.loadMoreServices,hasMore:r.more_num>0}:C&&4==y.query.pending?{loadMore:this.loadMoreQuestions,hasMore:d.more>0}:{loadMore:this.loadMore,hasMore:s.remain>0},A=s.all_total<=0&&!x&&!C&&j<=0&&R<=0&&!O&&!q;return g.default.createElement("div",null,e&&g.default.createElement(I,{msg_to_app:e}),g.default.createElement(_.default,{title:0!=y.query.pending?3==y.query.pending?"待处理订单":4==y.query.pending?"回答悬赏问题-业问":5==y.query.pending?"待处理职业机会":7==y.query.pending?"待处理企业邀请":"待处理事项":"已处理"}),A&&g.default.createElement("div",{className:" p-y-lg m-y-lg text-center"},g.default.createElement("div",{className:"font-0"},g.default.createElement("div",{className:"empty-view imacss imacss-loading"})),g.default.createElement("div",{className:"text-center font-12 text-blue-0ba0ff"},"暂无待处理事项哦~")),s.alert_fr&&g.default.createElement("div",{className:"taskTips yellowBg p-y-10 p-l-10 clearfix"},g.default.createElement("div",{className:"fl"},g.default.createElement("span",{className:"small imacss imacss-msg_edit3x msg_edit_icon",onClick:this.to_privacy_setting},"好友请求太多骚扰?点此设置防打扰")),g.default.createElement("div",{className:"fr",onClick:this.close_alert},g.default.createElement("span",{className:"p-x-10"},"×"))),g.default.createElement(U,{loadMore:W.loadMore,hasMore:W.hasMore,loader:g.default.createElement(v.default,{ref:"loader",reload:W.loadMore,cursor:u.select("loading_status")})},g.default.createElement("div",{className:"panel panel-default"},x&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"待处理订单")),g.default.createElement("ul",{className:"list-group"},(x&&3!=y.query.pending||r&&r.orders)&&(x&&y.query.pending,r.orders).map(function(e,n){return g.default.createElement(B.default,{updateMyselfInfo:t.updateMyselfInfo,order:e,mystatus:t.props.mystatus,cursor:u,index:n})}),!1),C&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"业问用户提问")),C&&g.default.createElement("ul",{className:"list-group"},(c<=10?d.questions.slice(0,l):d.questions).map(function(e,n){return g.default.createElement(E.default,{updateMyselfInfo:t.updateMyselfInfo,question:e,mystatus:t.props.mystatus,cursor:u,index:n})}),C&&y.query.pending&&y.query.badge&&d.total>(d.questions&&d.questions.length>l?l:d.questions.length)&&g.default.createElement(w.default,{title:"全部悬赏问题 ("+d.total+") >>",onClick:this.more_questions})),R>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",{className:"text-muted"},"待处理企业邀请，即刻处理加入企业人才库~")),R>0&&g.default.createElement("ul",{className:"list-group"},T.slice(0,1).map(function(e,n){return g.default.createElement(M.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,resume_storage_request_block:1,index:n})}),(m.remain>0||(T&&T.length)>1)&&g.default.createElement(w.default,{title:"全部待处理企业请求 >>",onClick:this.more_request_resume_storage_tasks})),j>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",{className:"text-muted"},"待处理职业机会，即刻处理获取心仪offer")),j>0&&g.default.createElement("ul",{className:"list-group"},N.slice(0,1).map(function(e,n){return g.default.createElement(M.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,resume_request_block:1,index:n})}),(p.remain>0||(N&&N.length)>1)&&g.default.createElement(w.default,{title:"全部待处理职业机会 >>",onClick:this.more_request_resume_tasks})),O&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"职业发展顾问推荐")),O&&g.default.createElement("ul",{className:"list-group"},S.slice(0,1).map(function(e,n){return g.default.createElement(M.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,candidate_hunter_service_block:1,index:n})}),(f.remain>0||(S&&S.length)>1)&&g.default.createElement(w.default,{title:"全部推荐 >>",onClick:this.more_candidate_hunter_service_tasks})),s.all_total>0&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},5==y.query.pending?"待处理职业机会,尽快处理会有更多高薪机会哦~":7==y.query.pending?"待处理企业邀请，即刻处理加入企业人才库~":"待处理申请")),g.default.createElement("ul",{className:"list-group"},(1==y.query.pending&&y.query.badge-o-c<=10?k.slice(0,i):k).map(function(e){var n=t.indexOfRequests(e);return g.default.createElement("div",{key:e.id},2==y.query.pending&&!F&&2==e.real_accepted&&(F=!0)&&g.default.createElement("div",{className:"panel-heading",style:{background:"#f9f9f9"}},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"未提醒的好友请求")),g.default.createElement(M.default,{updateMyselfInfo:t.updateMyselfInfo,key:e.id,task:e,mystatus:t.props.mystatus,pending:t.props.pending,cursor:u,index:n}))}),(q||y.query.pending&&y.query.badge)&&s.all_total>(k.length>i?i:k.length)&&g.default.createElement(w.default,{title:"全部待处理事项 >>",onClick:this.more_tasks})),q&&g.default.createElement("div",{className:"panel-heading"},g.default.createElement("span",null," "),g.default.createElement("span",{className:"text-muted pull-left"},"你可能认识"),(1!=h.mem_st||1==h.mem_st&&2==h.mem_id)&&g.default.createElement("span",{className:"font-13 text-blue-416596 pull-right",onClick:this.open_vip_page},g.default.createElement("i",{className:"task_vip_icon"}),"我也要推广自己，提升人气！")),q&&g.default.createElement("ul",{className:"list-group"},a.contacts.map(function(e,n){return g.default.createElement(b.default,{contact:e,pingback:{fr:3,position:n},status:t.props.mystatus.status,key:e.id,from:"rec_list",cursor:u.select("contacts","contacts",n),mycard:t.props.mycard})})))))}}],[{key:"loadData",value:function(e,t){var n=e.auth_info,s=e.req,r=e.fconf,a=r.online_url+"user/v3/tasks?"+p.default.stringify(c({page:t,count:10,pending:s.query.pending},n,{channel:"beta",version:"3.33.6"}));return(0,L.default)(fetch(a),1e4).then(m.parse_online_json)}},{key:"loadContacts",value:function(e,t){var n=e.auth_info,s=(e.req,e.fconf,"/sdk/contact/rec_frs?"+p.default.stringify(c({page:t,count:10},n)));return fetch(s,{credentials:"same-origin"}).then(m.parse_online_json)}},{key:"loadQuestions",value:function(e,t){var n=e.auth_info,s=(e.req,e.fconf),r=s.online_url+"/user/v4/yewen_questions?"+p.default.stringify(c({page:t,count:10},n));return fetch(r,{credentials:"same-origin"}).then(m.parse_online_json)}},{key:"loadServices",value:function(e,t){var n=e.auth_info,s=(e.req,e.fconf),r=s.online_url+"talent/v3/usrv/myorders_v2?"+p.default.stringify(c({more_idx:t,limit:10},n));return fetch(r).then(m.parse_online_json)}}]),t}(g.default.Component),o.contextTypes={auth_info:g.default.PropTypes.object,req:g.default.PropTypes.object,fconf:g.default.PropTypes.object},l)},798:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),c=n(1),d=s(c),u=n(981),p=s(u),m=n(46),f=s(m),_=n(78),h=s(_),g=n(164),y=n(272),v=s(y),k=n(983),b=s(k),q=n(1007),w=s(q),x=n(165),E=s(x),C=n(689),M=s(C),N=n(1020),B=s(N),T=n(113),P=n(166),j=s(P),R=n(15),S=s(R),O=n(50),F=s(O),W=j.default.Style,A=n(982),V=function(e){function t(){var e,n,s,i;r(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return n=s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),s.goUhChat=function(){var e=s.context.req,t={u2:e.query.u2,from:"add_friend_requested"};(0,F.default)("/uh_chat?"+S.default.stringify(t))},s.goMemlist=function(){(0,f.default)("/uh_memlist?tpl=show&fr=addfr_requested","会员权益","fetch")},s.goUhChatAb=function(){var e=s.context.req,t={u2:e.query.u2,from:"_add_friend_requested_2"};(0,F.default)("/uh_chat?"+S.default.stringify(t))},s.renderHeader=function(){s.context.auth_info;return d.default.createElement("div",{className:"header borderBottom"},d.default.createElement("div",{style:{fontSize:"17px"}},"申请成功,请等待通过"),d.default.createElement("div",{style:{fontSize:"13px",color:"#6a6a6a",marginTop:"4px"}}),d.default.createElement("div",{className:"fastSub",onClick:s.goUhChat},"捎句话给TA"))},s.loadMoreContacts=function(){var e=s.props.cursor,t=s.refs.loader;t&&t.bindRequest(function(){return s.nextPage=s.nextPage||1,M.default.loadContacts(s.context,s.nextPage).then(function(t){e.select("contacts","contacts").concat(t.contacts||[]),e.select("contacts","remain").set(t.remain||0),s.nextPage++})})},i=n,a(s,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){window.close_page=function(){(0,g.closePage)("",!0)},(0,T.sendWebViewBroadcast)("AddFriendRquestedShow"),setTimeout(function(){(0,T.bindBroadcast)("AddFriendRquestedShow",function(e){(0,g.closePage)("",!0)})},2e3)}},{key:"getOptions",value:function(){var e=this;if(1!=this.props.uinfo.status)return{title:"你的资料完善度"+this.props.uinfo.info_ratio+"%，完善后TA更愿意通过申请",button:"去完善资料，提高通过率",onClick:function(){(0,h.default)(e.context.auth_info.encode_mmid||e.context.auth_info.u,e.context,{edit_mode:1,from:"add_friend_requested"},"编辑资料")}}}},{key:"renderBottom",value:function(){var e=this.getOptions();return d.default.createElement("div",{className:"m-t"},d.default.createElement("div",{className:"borderTop",style:{backgroundColor:"white",padding:"10px"}},d.default.createElement("div",{className:"warning text-orange"},e.title)),d.default.createElement("div",{className:"p-a borderTop"},d.default.createElement("div",{className:"btn btn-lg btn-default-outline btn-block",style:{color:"#3e3e3e"},onClick:e.onClick},e.button)))}},{key:"renderBottom1",value:function(){var e=this.getOptions();return d.default.createElement("div",{className:"m-t"},d.default.createElement("div",{className:"borderTop",style:{backgroundColor:"white",padding:"10px"},onClick:e.onClick},d.default.createElement("div",{className:"warning text-orange"},e.title),d.default.createElement("div",{className:"warning2 text-primary"},e.button+" >>")),d.default.createElement("div",{className:"p-a borderTop"},d.default.createElement("div",{className:"btn btn-lg btn-secondary btn-block",onClick:function(){(0,g.closePage)("",!0)}},"完成")))}},{key:"renderAppMessage",value:function(){var e=o({},v.default);return e.top_right_item={title:"完成",callback:"close_page()"},d.default.createElement(b.default,{msg_to_app:e})}},{key:"addFriend",value:function(){(0,f.default)("/contact/add_friend_list?from=requested","添加好友","fetch")}},{key:"renderRecommandFriends",value:function(){var e=this;return this.props.contacts.contacts.map(function(t,n){return t.outofrel?d.default.createElement(B.default,{contact:t,key:t.id,from:"add_friend_requested",cursor:e.props.cursor.select("contacts","contacts",n),mycard:e.props.mycard}):d.default.createElement(w.default,{contact:t,status:e.props.uinfo.status,key:t.id,pingback:{fr:1,position:n},from:"add_friend_requested",cursor:e.props.cursor.select("contacts","contacts",n),mycard:e.props.mycard})})}},{key:"render",value:function(){return d.default.createElement("div",{className:"add_friend_requested"},d.default.createElement(p.default,{title:"申请成功"}),this.renderAppMessage(),d.default.createElement(W,{rules:{body:{background:"#F6F6F6"}}}),d.default.createElement(A,{loadMore:this.loadMoreContacts,hasMore:!1,loader:d.default.createElement(E.default,{ref:"loader",reload:this.loadMoreContacts,cursor:this.props.cursor.select("loading_status")})},this.renderHeader(),d.default.createElement("div",{className:"panel-heading"},d.default.createElement("span",null," "),d.default.createElement("span",{className:"text-muted pull-left"},"你可能感兴趣"),0==this.props.contacts.remain&&d.default.createElement("span",{className:"text-primary pull-right",onClick:this.addFriend},"更多好友推荐 >>")),this.renderRecommandFriends()))}}]),t}(d.default.Component);V.contextTypes={auth_info:d.default.PropTypes.object,fconf:d.default.PropTypes.object,req:d.default.PropTypes.object},e.exports=(0,j.default)(V)}});