webpackJsonp([220],{806:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=e===T.CompanyType.normal,a=t===T.PositionType.others,r=!t,o=a||r;return n&&o}Object.defineProperty(t,"__esModule",{value:!0});var u,f,s,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p=n(15),v=a(p),h=n(981),y=a(h),_=n(1),b=a(_),g=n(77),E=a(g),k=n(46),O=a(k),N=n(76),V=a(N),w=n(272),x=a(w),P=n(983),j=a(P),q=n(113),T=n(1086),C=n(277),M=n(75),B=M.parse_online_json,z=M.toast_error_handler,S=n(47),A=function(){MaiMai_Native.close_native_with_data("",!0,JSON.stringify({refresh:!0}))},I={comment:"鉴于您职位级别较高，为了避免他人盗用您的身份，请立即给您的身份加V，成功加V认证即可获得影响力",renderBottom:function(e){var t=e.gotoOtherVerify;return b.default.createElement("div",{className:"vm-btn-container"},b.default.createElement("button",{className:"vm-btn vm-btn-later",onClick:A}," 以后再说 "),b.default.createElement("button",{className:"vm-btn vm-btn-v",onClick:t}," 去加V "))}},D=(u={},l(u,T.PositionType.manager,I),l(u,T.PositionType.excutive,I),l(u,T.PositionType.senior,I),l(u,T.PositionType.others,{renderBottom:function(e){var t=e.auth_info,n=e.query,a=function(){(0,C.pingback)("verify_mail","verify","done",d({},t,{_xfrompage:n.from})),A()};return b.default.createElement("div",{className:"vm-btn-container"},b.default.createElement("button",{className:"vm-btn vm-btn-ok",onClick:a},"好，知道了"))}}),u);t.default=e.exports=(s=f=function(e){function t(e,n){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.on_top_right_click=function(e){var t=S.findDOMNode(a.refs.email_val);if(!t)return void(0,V.default)("网络错误");var n=t.value.replace(/\uff20/,"@");if(n.length<=0)return void(0,V.default)("邮箱不能为空");if(!a.checkValue(n))return void(0,V.default)("邮箱格式不正确");var r=a.context,o=r.auth_info,i=r.fconf,l=r.req,c=i.online_url+"contact/v4/send_verify_mail?"+v.default.stringify(d({email:n,only_check:1},o));fetch(c,{credentials:"same-origin"}).then(B).then(function(t){"ok"==t.result?"function"==typeof e&&e({fids:n,gid:l.query.gid}):(0,V.default)("邮件验证失败")}).catch(z)},a.checkValue=function(e){return/^(?:[a-z0-9]+[\w.-]*)*[a-z0-9]@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum)$/i.test(e)},a.componentDidMount=function(){window.on_top_right_click=a.on_top_right_click,(0,q.bindBroadcast)("setting/verify_mail/auth_guide/auth/closeback2",function(){MaiMai_Native.close_native(null,!0)})},a.renderAppMessage=function(){var e=d({},x.default);return e.top_right_item={title:"确定",callback:"on_top_right_click()"},b.default.createElement(j.default,{msg_to_app:e})},a.gotoOtherVerify=function(){var e=a.context.req;(0,O.default)("/contact/auth_guide?"+v.default.stringify({from:"verify_mail",fromchain:e.query.fromchain+"/verify_mail"}),"职业身份认证")},a.gotoVerify=function(){var e=a.context,t=e.fconf,n=e.auth_info;a.on_top_right_click(function(e){var r=e.fids,o=e.gid,i=t.online_url+"contact/v4/send_verify_mail?"+v.default.stringify(d({email:r,only_check:0,gid:o},n));fetch(i,{credentials:"same-origin"}).then(B).then(function(){return a.onEmailSendSuccessful({fids:r,gid:o})}).catch(function(e){return(0,V.default)(e)})})},a.clearInput=function(){a.refs.email_val.value="",Promise.resolve().then(function(){return a.refs.email_val.focus()})};var i=n.req.query,l=i.company_type,u=i.position_type;return a.pagetitle="公司邮箱认证",a.btntext="去认证",a.tips="通过公司邮箱验证，即可获得5分影响力！",c(l,u)&&(a.pagetitle="公司邮箱一键加V认证",a.btntext="一键加V认证",a.tips="通过公司邮箱验证可同步完成加V认证，提升个人影响力，获得更多优质职场机会"),a}return i(t,e),m(t,[{key:"onEmailSendSuccessful",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fids,n=this.context.req.query.positionType||T.PositionType.others,a=D[n].comment?b.default.createElement("div",{className:"vm-popup-comment"},D[n].comment):null,r={gotoOtherVerify:this.gotoOtherVerify,auth_info:this.context.auth_info,query:this.context.req.query};E.default.popup(b.default.createElement("div",{className:"popup-body"},b.default.createElement("div",{className:"vm-popup-title"},"已发送"),b.default.createElement("div",{className:"vm-popup-content"},"请在",b.default.createElement("span",{style:{color:"#1FA1FC"}},"24小时"),"内查收并完成验证"),a,D[n].renderBottom(r))),(0,q.sendWebViewBroadcast)("refresh_auth",{emailValue:t,isEmail:!0}),(0,q.sendWebViewBroadcast)("close_guide",{}),console.info("BROADCAST.success")}},{key:"renderOtherVerify",value:function(){if("setting"===this.context.req.query.fromchain)return b.default.createElement("span",{className:"other-verify",onClick:this.gotoOtherVerify},"其他认证方式")}},{key:"render",value:function(){return b.default.createElement("div",null,b.default.createElement(y.default,{title:this.pagetitle}),b.default.createElement("div",{className:"authWrap"},b.default.createElement("div",{className:"borderBottom p-y-40 emailInput-container"},b.default.createElement("input",{ref:"email_val",className:"w-100 emailInput",placeholder:"填写公司的个人邮箱地址"}),b.default.createElement("div",{className:"clear-input",onClick:this.clearInput},b.default.createElement("span",{className:"clear-input-icon"}))),b.default.createElement("div",{className:"text-muted small p-x-40 p-y-20 text-center"},this.tips),b.default.createElement("div",{className:"verify-btn-container"},b.default.createElement("button",{className:"verify-email w-100",onClick:this.gotoVerify}," ",this.btntext," "),this.renderOtherVerify())))}}]),t}(b.default.Component),f.contextTypes={auth_info:b.default.PropTypes.object,req:b.default.PropTypes.object,fconf:b.default.PropTypes.object},s)}});