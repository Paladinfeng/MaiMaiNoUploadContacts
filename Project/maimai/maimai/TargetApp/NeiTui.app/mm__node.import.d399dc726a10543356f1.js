webpackJsonp([273],{877:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,i,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=a(1),f=n(m),d=a(15),p=n(d),_=a(75),y=a(113),b=a(77),h=(n(b),a(46)),v=a(76),g=(i=l=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.gotoMemlist=function(){var e=a.context.req,t="unknown";e.query.fr&&(t=e.query.fr),h("/uh_memlist?"+p.default.stringify({tpl:"show",fr:"comp_claim_"+t}),"开通会员","fetch")},a.gotoVerify=function(){var e=a.props,t=(e.cursor,e.mycard);h("/contact/auth/"+t.id,"认证","fetch")},a.submitApply=function(){var e=a.context,t=e.auth_info,n=e.fconf,r=a.props,c=(r.cursor,r.mycard);if(1!=c.mem_st||c.mem_id<3)return void alert("还未开通VIP会员");if(1!=c.judge)return void alert("还未认证职场身份");if(0==a.state.claim_btn_status){var o=n.online_url+"/talent/v3/uh/submit_claim_apply?"+p.default.stringify(s({},t));fetch(o,{credential:"same-origin"}).then(_.parse_online_json).then(function(e){e&&(v("提交成功"),a.setState({claim_btn_text:"提交成功,请等待审核通过"}),a.setState({claim_btn_status:1}))})}},a.renderJudge=function(){var e=a.props,t=(e.cursor,e.mycard);return 1==t.judge?f.default.createElement("div",{className:"company_claim_ok_text"},"已认证"):2==t.judge||3==t.judge?f.default.createElement("div",{className:"get_company_detail_text"},"审核中"):f.default.createElement("div",{className:"get_company_detail_btn",onClick:a.gotoVerify},"去认证")},a.state={claim_btn_status:0,claim_btn_text:"提交认领申请"},a}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cursor;t.mycard;t.apply_row.length>0&&(this.setState({claim_btn_status:1}),this.setState({claim_btn_text:"提交成功,请等待审核通过"})),(0,y.bindBroadcast)("broadcast_web_pay_suc",function(t){var n=e.context,r=n.auth_info,c=n.fconf,o=JSON.parse(t);if(void 0!==o.apptype&&"uh_memdeal"==o.apptype){var l=c.online_url+"/talent/v3/uh/get_memlist?"+p.default.stringify(s({},r));fetch(l,{credential:"same-origin"}).then(_.parse_online_json).then(function(e){e&&e.my_card&&(a.select("mycard","mem_st").set(e.my_card.mem_st),a.select("mycard","mem_id").set(e.my_card.mem_id))})}})}},{key:"render",value:function(){var e=this.props,t=(e.cursor,e.mycard);return f.default.createElement("div",{className:"get_company_bg"},f.default.createElement("div",{className:"font-0 text-center"},f.default.createElement("img",{style:{height:163},src:"/static/images/get_company_banner.png"})),f.default.createElement("div",{className:"text-white p-x-40"},"欢迎创始人、公司高管认领公司主页，主动维护公司形象，建立品牌信任度！帮助企业提升人才招聘、商业合作效率！"),f.default.createElement("div",{className:"white-bg border-radius-3 m-x m-t-20"},f.default.createElement("div",{className:"border-bottom-e0 clearfix p-y-7 p-l-20 p-r-10"},f.default.createElement("div",{className:"fl l-h-32"},"职场VIP会员"),f.default.createElement("div",{className:"fr"},1==t.mem_st&&t.mem_id>=3?f.default.createElement("div",{className:"company_claim_ok_text"},"已开通"):f.default.createElement("div",{className:"get_company_detail_btn",onClick:this.gotoMemlist},"立即开通"))),f.default.createElement("div",{className:"border-bottom-e0 clearfix p-y-7 p-l-20 p-r-10"},f.default.createElement("div",{className:"fl l-h-32"},"职场身份认证"),f.default.createElement("div",{className:"fr"},this.renderJudge()))),f.default.createElement("div",{className:"font-13 text-white-cbe8ff m-t-30 text-center"},"请确保所认领的公司与职业身份认证公司一致"),f.default.createElement("div",{className:"company_apply_btn m-t-5",onClick:this.submitApply},this.state.claim_btn_text))}}]),t}(f.default.Component),l.contextTypes={auth_info:f.default.PropTypes.object,req:f.default.PropTypes.object,fconf:f.default.PropTypes.object},i);t.default=e.exports=g}});