webpackJsonp([58],{1459:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a(1),l=o(n),c=a(76),i=o(c),s=a(166),u=a(41),r=a(17),d=l.default.createClass({displayName:"SetCoupons",mixins:[u],onTicketClicked:r.debounce(function(){var e=this.props.listtype,t=this.props.ordervalue;0==e&&t>0&&(this.props.ticket.discount>0?this.props.onTicketClicked(this.props.ticket):(0,i.default)("代金券不满足使用条件"))},1e3,!0),componentDidMount:function(){document.body.style.backgroundColor="#f6f6f6"},render:function(){var e,t,a,o=this.props.listtype,n=this.props.ticket,c=this.props.ordervalue;0==o&&(n.discount>0||0==c)?(e="couponAmount",t="",a="couponName"):(e="couponAmount Expired expiredImg",t="Expired",a="couponName Expired");var i,s,u;n.type>=1&&n.type<=9?(i=l.default.createElement("div",{className:"amount"},n.type,l.default.createElement("em",{className:t}," 折")),s=l.default.createElement("div",{className:a},"脉脉折扣券")):10==n.type?(i=l.default.createElement("div",{className:"amount"},n.value,l.default.createElement("em",{className:t}," 元")),s=l.default.createElement("div",{className:a},"脉脉E卡")):(i=l.default.createElement("div",{className:"amount"},n.value,l.default.createElement("em",{className:t}," 元")),s=l.default.createElement("div",{className:a},"脉脉现金券")),n.limit&&n.limit>0&&(u=l.default.createElement("div",{className:"tips"},"满",n.limit,"元可用"));var r=n.valid_date.replace(/-/g,".");return l.default.createElement("div",{className:"couponBody Coupons",onClick:this.onTicketClicked},l.default.createElement("div",{className:e},i,u),l.default.createElement("div",{className:"couponInfo"},s,l.default.createElement("div",{className:"couponValidity"},"有效期至",l.default.createElement("em",{className:t},r)),l.default.createElement("div",{className:"couponDeductible"},"最大抵扣金额:",l.default.createElement("em",{className:t},n.value+"元"))))}});e.exports=s(d)},1460:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},l=a(75),c=o(l),i=a(77),s=o(i),u=a(995),r=o(u),d=a(76),p=o(d),f=a(1),m=a(15),v=a(114),h=f.createClass({displayName:"BtnCoupons",contextTypes:{auth_info:f.PropTypes.object,fconf:f.PropTypes.object},comonentDidMount:function(){document.body.style.backgroundColor="#f6f6f6"},closePage:function(){window.MaiMai_Native.close_native(null,!0)},exchangeCoupon:function(e){var t=this.context,a=t.fconf,o=t.auth_info,l=a.online_url+"mmpay/v4/exchange_coupon?"+m.stringify(n({code:e},o));request=fetch(l,{credentials:"same-origin"}).then(c.default.parse_online_json).then(function(){(0,p.default)("兑换成功"),window.location.reload()}).catch(function(e){(0,p.default)("string"==typeof e?e:"无效的兑换码")}),v("兑换中...",request)},popForExchange:function(){var e=this;s.default.popup(f.createElement(r.default,{title:"兑换代金券",text:"",placeholder:"请输入你的兑换码",input_type:"number",ok:function(t){if(t.length<8)return void alert("兑换码长度不正确");s.default.dismiss(),e.exchangeCoupon(t)}}))},render:function(){return f.createElement("div",{className:"couBtns clearfix"},f.createElement("div",{className:"notUseCoupons",onClick:this.closePage},"不使用代金券"),f.createElement("div",{className:"exchangeCoupons",onClick:this.popForExchange},"兑换代金券"))}});e.exports=h},768:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a(1),l=o(n),c=a(46),i=o(c),s=a(114),u=(o(s),a(1046),a(113)),r=o(u),d=a(15),p=(o(d),a(76)),f=(o(p),a(75)),m=(o(f),a(1096)),v=(o(m),a(1459)),h=o(v),E=a(1460),y=o(E),N=a(166),k=a(981),C=a(41),g=l.default.createClass({displayName:"CouponList",mixins:[C],contextTypes:{auth_info:l.default.PropTypes.object,fconf:l.default.PropTypes.object},closePage:function(){window.MaiMai_Native.close_native(null,!0)},onTicketClicked:function(e){0==this.props.type&&(r.default.sendWebViewBroadcast("coupon_selected",e),this.closePage())},onClickShowOther:function(){0==this.props.type?(0,i.default)("/contact/account/list_coupons?type=2&value="+this.props.ordervalue,"已过期的代金券","fetch"):(0,i.default)("/contact/account/list_coupons?type=0&value="+this.props.ordervalue,"我的代金券","fetch"),this.closePage()},render:function(){var e=this,t=void 0,a=void 0,o=void 0;return this.props.coupons&&this.props.coupons.length>0?t=l.default.createElement("div",null,l.default.createElement("div",null,this.props.coupons.map(function(t,a){return l.default.createElement(h.default,{key:a,ticket:t,ordervalue:e.props.ordervalue,listtype:e.props.type,onTicketClicked:e.onTicketClicked})}))):a=l.default.createElement("div",{className:"couponEmpty"},"暂无代金券"),o=0==this.props.type?l.default.createElement("div",{className:"oldCoupon",onClick:this.onClickShowOther},"查看已过期的券 >>"):l.default.createElement("div",{className:"oldCoupon",onClick:this.onClickShowOther},"查看我的代金券 >>"),l.default.createElement("div",null,l.default.createElement(k,{title:"我的代金券"}),l.default.createElement(y.default,null),l.default.createElement("div",null,a,t,o))}});e.exports=N(g)}});