webpackJsonp([122],{1166:function(e,o,t){"use strict";var i=t(1),n=t(41),a=t(984),s=i.createClass({displayName:"CommonBtnCard",mixins:[n],render:function(){var e=this.props.children;return i.createElement("li",{className:"list-group-item"},i.createElement("div",{className:"media list-group-item-heading list-group-item-text",onClick:this.props.onClick},i.createElement("div",{className:"media-left"},i.createElement("img",{className:"media-object",style:r.avatar,src:this.props.icon})),i.createElement("div",{className:"media-body"},i.createElement("div",{style:a.margin("10px","0px","0px","0px")},i.createElement("span",null,this.props.content),this.props.desc&&i.createElement("span",{className:"text-muted small"},this.props.desc))),e&&i.createElement("div",{style:r.children,className:"media-right"}," ",e," ")))}}),r={children:{paddingTop:5,paddingRight:5},avatar:{width:"35px",height:"35px"}};e.exports=s},855:function(e,o,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a=t(1),s=i(a),r=t(994),l=(i(r),t(981)),c=i(l),d=t(75),f=i(d),p=t(76),u=i(p),m=t(15),h=i(m),_=t(114),v=i(_),g=t(113),w=t(46),M=i(w),y=t(1166),j=i(y),N=t(983),x=i(N),b=t(272),C=i(b),E=t(17),k=i(E);e.exports=s.default.createClass({displayName:"exports",contextTypes:{auth_info:s.default.PropTypes.object,fconf:s.default.PropTypes.object},componentDidMount:function(){document.body.style.background="#f9f9f9",window.onVocationChoosed=this.onVocationChoosed,window.changeProfessionMajor=this.changeProfessionMajor,window.refresh_page=this.refresh_page,window.close_page=this.close_page,window.onProfessionMajorChoosed=this.onProfessionMajorChoosed,(0,g.bindBroadcast)("article_pm_feed_follow",this.onReceiveResult)},componentWillUnmount:function(){document.body.style.background="#f9f9f9",(0,g.unbindBroadcast)("article_pm_feed_follow")},doRequest:function(e,o){var t=this.context,i=t.auth_info,a=t.fconf,s=a.online_url+"user/v3/update?"+h.default.stringify(n({},i)),r=fetch(s,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h.default.stringify(k.default.extend(e,i))}).then(f.default.parse_online_json).then(function(){o()}).catch(f.default.toast_error_handler);(0,v.default)("设置中...",r)},onReceiveResult:function(e){var o=this.props.cursor.select("cells",function(o){return void 0!==e.dist?"人脉"==o.line1:o.profession==e.profession&&o.major==e.major});if(o&&o.get())o.select("selected").set(e.follow);else if(e.cell){var t=2;k.default.each(this.props.cursor.select("cells").get(),function(e,o){e.selected&&(t=o+1)}),this.props.cursor.select("cells").splice([t,0,e.cell])}var i=this.props.cursor.select("professions",function(o){return o.id==e.profession});if(i&&i.get())if(e.follow)i.select("majors").push({id:e.major});else{var n=k.default.filter(i.get("majors"),function(o){return o.id!=e.major});i.select("majors").set(n)}else e.follow&&this.props.cursor.select("professions").push({majors:[{id:e.major}],id:e.profession})},more:function(){if(window.MaiMai_Native.native_choose_vocation){var e={professions:this.props.professions},o=JSON.stringify(e);window.MaiMai_Native.native_choose_vocation_open_url?window.MaiMai_Native.native_choose_vocation_open_url(o,"https://maimai.cn/article/pm_feed"):window.MaiMai_Native.native_choose_vocation&&window.MaiMai_Native.native_choose_vocation(o,"onVocationChoosed")}},onVocationChoosed:function(){window.MaiMai_Native.native_priority_changed&&window.MaiMai_Native.native_priority_changed(),location.reload()},onItemClicked:function(e){if("更多"==e.line1)return void this.more();var o={follow:e.selected,disable_cancel:e.only_can_select};void 0!==e.profession&&(o.p=e.profession),void 0!==e.major&&(o.m=e.major),"好友"==e.line1&&(o.dist=1),"人脉"==e.line1&&(o.dist=2),(0,M.default)("/article/pm_feed?"+h.default.stringify(o),e.line1,"fetch")},changeProfessionMajor:function(){if(window.MaiMai_Native.native_choose_vocation){var e={professions:this.props.user_pc?this.props.user_pc:[]},o=JSON.stringify(e);window.MaiMai_Native.native_choose_vocation&&window.MaiMai_Native.native_choose_vocation(o,"onProfessionMajorChoosed",!1)}},onProfessionMajorChoosed:function(e){var o=JSON.parse(e),t={infos:JSON.stringify({profession:o.profession_id,major:o.major_id,stags:""})};this.doRequest(t,function(){(0,u.default)("修改成功"),(0,g.sendWebViewBroadcast)("action.refresh.myself.fromweb",null),location.reload()})},refresh_page:function(){location.reload()},close_page:function(){window.MaiMai_Native.close_native("",!0)},renderClientMsg:function(){var e=C.default;return e.more_items=[],e.more_items.push({title:"设置我的行业方向",callback:"changeProfessionMajor()"}),e.more_items.push({title:"刷新",callback:"refresh_page()"}),e.more_items.push({title:"关闭",callback:"close_page()"}),s.default.createElement(x.default,{msg_to_app:e})},render:function(){var e=this,o=k.default.map(this.props.cells,function(o){return s.default.createElement(j.default,{key:o.line1+o.line2,icon:o.avatar,content:o.line1,desc:o.line2?" ("+o.line2+")":"",onClick:function(){e.onItemClicked(o)}},o.selected&&s.default.createElement("div",{className:"text-primary small",style:P.rightTxt},"已关注"))});return s.default.createElement("div",null,this.renderClientMsg(),s.default.createElement(c.default,{title:"关注行业动态"}),s.default.createElement("div",{className:"m-t-md m-b m-l text-muted"},"我关注的行业动态"),o)}});var P={rightTxt:{marginRight:"-15px",marginTop:"6px",display:"inline-block",width:"50px"}}}});