webpackJsonp([44,279],{1429:function(e,t,a){"use strict";var n=a(164),c=a(46),r=function(e){return e&&e.__esModule?e:{default:e}}(c),i=a(113),s=a(1),l=a(981),o=s.createClass({displayName:"PubTopicTips",contextTypes:{auth_info:s.PropTypes.object},drawCircle:function(e,t,a){var e=e;if(e.getContext){var n=e.getContext("2d"),c=t/a;n.beginPath(),n.arc(40,40,38,0,2*Math.PI,!1),n.strokeStyle="#e0e0e0",n.stroke(),n.closePath(),n.beginPath(),n.arc(40,40,38,0,2*Math.PI*c,!1),n.strokeStyle="#0a9dff",n.stroke(),n.closePath()}},componentDidMount:function(){var e=this.refs.circleCanvas;document.body.setAttribute("class","topicTipsBg"),this.drawCircle(e,this.props.topic.likes,80),(0,i.bindBroadcast)("User_Info_Changed",this.onUserInfoChanged)},onUserInfoChanged:function(e){this.props.cursor.select("uinfo").merge((0,n.formatUserV3ToUInfo)(e))},componentWillUnmount:function(){(0,i.unbindBroadcast)("User_Info_Changed",this.onUserInfoChanged)},renderJudge:function(){var e=this,t=this.props.topic.judge?s.createElement("p",{style:{color:"#FFA100"}},"已认证"):s.createElement("p",{className:"text-muted"},"未认证，",s.createElement("span",{className:"orangeTxt underline",onClick:function(){(0,n.openJudgePage)(e.props.uinfo.id,e.props.uinfo.judge,e.props.uinfo,e.props.uinfo.figure,"",e.context.auth_info)}},"点此快速认证身份"));return s.createElement("div",{className:"pubTerm1 text-center p-y"},s.createElement("p",null,s.createElement("img",{className:"circle_v",src:"/static/images/"+(this.props.topic.judge?"circle_v_yes.png":"circle_v.png")})),s.createElement("p",{className:"p-y"},s.createElement("img",{className:"authTxtImg",src:"/static/images/auth_txt_img.png"})),t)},render:function(){return s.createElement("div",null,s.createElement(l,{title:"发起话题"}),s.createElement("div",{className:"m-x m-y p-x-10 p-y-10"},"您目前还没有发布话题的权限，获得此权限需要满足下面两项条件:"),s.createElement("div",{className:"m-x m-y p-x-10 p-y"},this.renderJudge(),s.createElement("div",{className:"pubTerm2 text-center m-y p-y"},s.createElement("p",{className:"canvasBox"},s.createElement("canvas",{ref:"circleCanvas",width:"80",height:"80"}),s.createElement("img",{src:"/static/images/thumb.png"})),s.createElement("p",{className:"p-y"},s.createElement("img",{className:"topicTxtImg",src:"/static/images/topic_txt_img3.png"})),s.createElement("p",{className:"text-muted"},"当前获得",this.props.topic.likes,"个赞，",s.createElement("span",{className:"text-blue underline",onClick:function(){(0,r.default)("/article/topic_hot","热门话题","fetch")}},"点此参与话题讨论")))))}});e.exports=o},687:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(1),i=n(r),s=a(75),l=n(s),o=a(15),u=n(o),d=a(76),p=n(d),m=a(114),f=n(m),h=a(997),g=n(h),v=a(271),b=n(v),E=a(50),_=n(E),y=i.default.createClass({displayName:"PubTopic",mixins:[g.default],statics:{validate:function(e){var t=e.title,a=e.desc;if(!t||t.length<8||t>30)throw"请填写问答，字数8~30";return{title:t,desc:a}}},contextTypes:{req:i.default.PropTypes.object,fconf:i.default.PropTypes.object,auth_info:i.default.PropTypes.object},componentDidMount:function(){document.body.style.background="#f5f5f5"},getInitialState:function(){return{title:"",desc:""}},topicGuide:function(){(0,_.default)("/static/html/topicGuide.html","如何发一个好问答")},pub:function(){var e=this.context,t=e.fconf,a=e.auth_info;try{var n=y.validate(this.state),r=t.online_url+"feed/v3/add_topic?"+u.default.stringify(c({},n,a)),i=fetch(r).then(s.parse_online_json).then(function(e){(0,p.default)("问答发布成功！"),window.MaiMai_Native.close_native("",!0)}).catch(l.default.toast_error_handler);(0,f.default)("发送中..",i)}catch(e){alert(e)}},render:function(){return i.default.createElement("div",null,i.default.createElement("div",{className:"panel-heading"},i.default.createElement("span",{className:"text-muted"},"问答")),i.default.createElement("div",{className:"borderTop"},i.default.createElement("div",{className:"pubTopicItem borderBottom"},i.default.createElement("input",{placeholder:"请输入问答，8～30字",valueLink:this.linkState("title")}))),i.default.createElement(b.default,{title:"问答详情",btn:"如何发一个好问答",onClick:this.topicGuide,icon_classname:"glyphicon glyphicon-pencil"}),i.default.createElement("div",{className:"pubTopicRow"},i.default.createElement("div",{className:"servicePriceCenter"},i.default.createElement("textarea",{placeholder:"请输入问答详情（选填）",valueLink:this.linkState("desc")}))),i.default.createElement("div",{className:"panel-default p-x"},i.default.createElement("button",{className:"btn btn-lg m-y btn-block btn-secondary",onClick:this.pub},"提交")))}});e.exports=y},713:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var c=a(1),r=n(c),i=a(687),s=n(i),l=a(1429),o=n(l);e.exports=r.default.createClass({displayName:"exports",render:function(){return this.props.topic.can_add_topic?r.default.createElement(s.default,this.props):r.default.createElement(o.default,this.props)}})}});