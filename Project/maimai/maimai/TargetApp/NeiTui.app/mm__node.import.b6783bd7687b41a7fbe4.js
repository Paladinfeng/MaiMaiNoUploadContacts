webpackJsonp([116],{1468:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=e.exports=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={select:n.props.select||0},n}return o(t,e),l(t,[{key:"onIndexChange",value:function(e,t){this.setState({select:e}),this.props.onMoneyChange(t)}},{key:"render",value:function(){var e=this,t=0==this.state.select?"select_flower":"flower",n=1==this.state.select?"select_milk":"milk",r=2==this.state.select?"select_coffee":"coffee";return c.default.createElement("ul",{className:"moneyCols clearfix margin"},c.default.createElement("li",{onClick:function(){return e.onIndexChange(0,6)}},c.default.createElement("a",{className:t,href:"javascript:void(0)"},c.default.createElement("em",null,"10")),c.default.createElement("p",null,"鲜花6元")),c.default.createElement("li",{onClick:function(){return e.onIndexChange(1,10)}},c.default.createElement("a",{className:n,href:"javascript:void(0)"},c.default.createElement("em",null,"28")),c.default.createElement("p",null,"奶茶10元")),c.default.createElement("li",{onClick:function(){return e.onIndexChange(2,20)}},c.default.createElement("a",{className:r,href:"javascript:void(0)"},c.default.createElement("em",null,"88")),c.default.createElement("p",null,"咖啡20元")))}}]),t}(c.default.Component)},782:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),f=r(i),s=n(981),d=r(s),p=n(166),m=r(p),y=n(1468),h=r(y),b=n(17),v=r(b),g=n(15),_=r(g),E=n(75),O=n(50),j=r(O),w=n(113),C=n(164),x=n(76),k=r(x),N=m.default.Style,P=function(e){function t(){var e,n,r,l;a(this,t);for(var c=arguments.length,i=Array(c),f=0;f<c;f++)i[f]=arguments[f];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onMoneyChange=function(e){r.props.cursor.select("selectMoney").set(e)},r.onPay=function(){var e=r.context.req;(0,w.sendWebViewBroadcast)("addFriendRequestSent",e.query.u2),(0,C.closePage)("",!0)},r.getInput=function(){var e=r.context.req.query.msg;return r.refs&&r.refs.msg_input&&(e=r.refs.msg_input.value),e},r.inputOnChange=function(e){r.forceUpdate()},r.ok=v.default.debounce(function(){var e=r.context,t=e.auth_info,n=e.req,a=r.refs.msg_input.value;if(a.length<10)return void(0,k.default)("申请理由不得少于10个字");var o="/sdk/add_friend/pre_pay?"+_.default.stringify(u({},t,{u2:n.query.u2,lv:n.query.lv,price:r.props.selectMoney||6,msg:a}));fetch(o,{credentials:"same-origin"}).then(E.parse_online_json).then(function(e){(0,w.bindBroadcast)("broadcast_web_pay_suc",function(t){t=JSON.parse(t),t.orderid==e.orderid&&r.onPay()});var t="/pay/pay_cm?"+_.default.stringify({orderid:e.orderid,mmtype:31003,mmextra:"加好友心意礼金",paytype:"加好友心意礼金"});(0,j.default)(t,"加好友心意礼金")}).catch(E.toast_error_handler)},1e3,!0),l=n,o(r,l)}return l(t,e),c(t,[{key:"render",value:function(){var e=this.props.selectMoney||6;this.context.req.query.msg;return f.default.createElement("div",null,f.default.createElement("div",{className:"addfr"},f.default.createElement(d.default,{title:"带心意加好友"}),f.default.createElement(N,{rules:{body:{background:"#F6F6F6"}}}),f.default.createElement("div",{className:"text-muted m-t m-b"},"参考以下物品选择心意金额"),f.default.createElement(h.default,{onMoneyChange:this.onMoneyChange})),f.default.createElement("div",{className:"addfrFrame clearfix"},f.default.createElement("div",{className:"sort clearfix"},f.default.createElement("span",{className:"title"},"附言"),f.default.createElement("div",{className:"lineClamp2 content"},f.default.createElement("textarea",{ref:"msg_input",placeholder:this.context.req.query.attach,value:this.getInput(),onChange:this.inputOnChange})))),f.default.createElement("div",{className:"envelopeSenderNum envelopeInputMargin m-y"},"¥",e),f.default.createElement("div",{className:"addfr"},f.default.createElement("button",{onClick:this.ok,className:"btn btn-lg btn-block btn-orange"},"心意已备好,提交申请"),f.default.createElement("div",{className:"mvip"},"心意代表加好友的诚意，将直接发给对方。")))}}]),t}(f.default.Component);P.contextTypes={req:f.default.PropTypes.object,fconf:f.default.PropTypes.object,auth_info:f.default.PropTypes.object},e.exports=(0,m.default)(P)}});