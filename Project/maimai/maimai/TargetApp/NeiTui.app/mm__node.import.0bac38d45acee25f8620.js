webpackJsonp([195],{736:function(e,t,a){"use strict";(function(t){function n(e){return e&&e.__esModule?e:{default:e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=a(1),i=n(l),o=a(981),u=n(o),s=a(75),f=a(15),c=n(f),d=a(76),m=n(d),p=a(113),h=a(114),_=n(h),y=a(997),g=n(y),b=a(50),v=n(b),k=a(989),w=n(k),x=a(164),j=a(167),E=a(46),C=n(E),T=i.default.createClass({displayName:"FastContactAddmsg",mixins:[g.default],contextTypes:{req:i.default.PropTypes.object,fconf:i.default.PropTypes.object,auth_info:i.default.PropTypes.object},getInitialState:function(){return{remark:""}},componentDidMount:function(){document.body.style.backgroundColor="#f1f1f1",(0,p.bindBroadcast)("broadcast_web_pay_suc",function(e){void 0===JSON.parse(e).appid&&(0,x.closePage)("",!0)})},postDeal:function(){var e=this.context,a=e.auth_info,n=e.fconf,l=e.req,i=this.props.fuser,o=this.state.remark;if(o=t.trim(o||""),o.length<=0)return void(0,m.default)("输入内容不能为空");if(o.length>300)return void(0,m.default)("输入内容不能超过300字");if(o.length<10)return void(0,m.default)("输入内容不能少于10个字");if(1!=i.mem){var u=n.online_url+"talent/v3/uh/add_deals?"+c.default.stringify(r({u2list:l.query.u2_list,remark:o,fr:"fc_batch"},a));(0,_.default)("请求中...",fetch(u,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.default.stringify({})}).then(s.parse_online_json).then(function(e){var t="/pay/pay_gift?"+c.default.stringify({uhdealid:e.uhdealid,cost:e.total_amount,tpl:"chatgift",is_multi:1});(0,v.default)(t,"支付"),setTimeout(function(){(0,j.showModalForConfirm)({title:"支付心意才能极速联系对方! 24小时未回应立即退款",ok_text:"现在支付",ok:function(){(0,v.default)(t,"支付")},cancel_text:"返回编辑"})},500)}))}else{var u=n.online_url+"talent/v3/uh/sends?"+c.default.stringify(r({u2list:l.query.u2_list,remark:o,fr:"fc_batch"},a));(0,_.default)("请求中...",fetch(u,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c.default.stringify({})}).then(s.parse_online_json).then(function(e){1==e.ret?(alert("发送成功"),(0,x.closePage)("",!0)):(0,C.default)("/uh_memlist?fr=uh_chat_batch","购买会员","fetch")}))}},render:function(){var e=this.context,t=e.req,a=(e.auth_info,this.props.memlist),n="已选择"+t.query.u2_cnt+"人";return i.default.createElement("div",null,i.default.createElement(u.default,{title:"极速联系"}),i.default.createElement(w.default,{key:"cmf",title:n,common_fr_cards:this.props.contact_cards,noArrow:"true"}),i.default.createElement("div",{className:"inputBox"},i.default.createElement("textarea",{placeholder:"请描述您的事情，限10~300字",valueLink:this.linkState("remark")})),a.mem_info.mem_st&&1==a.mem_info.mem_st&&a.mem_info.member.uh_left>0&&i.default.createElement("em",{className:"jQuan"},"您还有",a.mem_info.member.uh_left,"个极速联系劵"),i.default.createElement("div",{className:"fast_addmsg_submit",onClick:this.postDeal},i.default.createElement("img",{src:"https://maimai.cn/images/icon_hj.png"}),i.default.createElement("span",null,"提交")))}});e.exports=T}).call(t,a(280))}});