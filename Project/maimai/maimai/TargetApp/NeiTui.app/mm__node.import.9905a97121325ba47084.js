webpackJsonp([230],{752:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(15),r=n(o),l=a(75),s=a(981),i=n(s),f=a(1),d=n(f),u=a(1007),m=n(u),p=a(165),h=n(p),_=a(46),w=n(_),y=a(271),g=n(y),k=a(1085),E=n(k),C=a(279),v=n(C),b=a(17),x=(n(b),a(982)),N=d.default.createClass({displayName:"App",contextTypes:{auth_info:d.default.PropTypes.object,req:d.default.PropTypes.object,fconf:d.default.PropTypes.object},reloadData:function(){window.MaiMai_Native.native_refresh()},loadData:function(e,t){var a=e.auth_info,n=(e.fconf,"/sdk/contact/rec_frs?"+r.default.stringify(c({page:t,count:10},a)));return(0,l.fetch_timeout)(fetch(n,{credentials:"same-origin"}),1e4).then(l.parse_online_json)},loadMore:function(){var e=this,t=this.props.cursor;this.refs.loader.bindRequest(function(){return e.loadData(e.context,e.nextPage).then(function(a){t.select("contacts","contacts").concat(a.contacts),t.select("contacts","remain").set(a.remain),e.nextPage++})})},gotoSearchContact:function(){(0,w.default)("/search/contacts_all?"+r.default.stringify({blank:"true",highlight:"true",fr:"expand_contacts_search"}),"","fetch",{show_search_title:!0,search_hint:"搜索人脉",search_focus:!0})},componentWillUnmount:function(){},componentDidMount:function(){this.context.auth_info.u;this.nextPage=1},renderFollow:function(){var e=function(){(0,w.default)("/contact/my_follows","更多关注","fetch")};return d.default.createElement(E.default,{key:"更多关注",onClick:e,title:"关注",leftIcon:"/static/images/follow.png"})},renderContacts:function(){var e=this,t=this.props,a=t.contacts,n=t.cursor,c=t.mycard;return d.default.createElement(g.default,{title:"你可能想认识",key:"contacts"},d.default.createElement("ul",{className:"list-group"},a.contacts.map(function(t,a){return d.default.createElement(m.default,{key:t.id,cursor:n.select("contacts","contacts",a),contact:t,status:c.status,pingback:{fr:2,position:a},from:"dist2_list",mycard:e.props.mycard})})))},renderWordsContacts:function(){var e=this,t=this.props,a=t.words_result,n=t.cursor,c=t.mycard,o=function(e,t){var a="/contact/words_friends?"+r.default.stringify({words:e.words,from:"static_words_in_"+t,company:e.company,position:e.position});(0,w.default)(a,"更多好友","fetch")};return d.default.createElement("div",null,a.map(function(t,a){if(t.show)return d.default.createElement(g.default,{title:t.words,key:"word_result"+a,btn:"更多>",onClick:function(){o(t,a)},btn_class:"text-muted",icon_classname:"text-muted"},t.contacts.map(function(t,o){return d.default.createElement(m.default,{key:t.id,cursor:n.select("words_result",a,"contacts",o),contact:t,status:c.status,pingback:{fr:2,position:"word_friend"+a+"-"+o},from:"static_words_out_"+a,search:!0,mycard:e.props.mycard})}))}))},renderCommonContacts:function(e,t){if(!(e.cards.length<=0)){var a=this.props,n=a.cursor,c=a.mycard,o=e.more?"更多>":"",l=function(){if(e.more){var a="/contact/words_friends?"+r.default.stringify({words:e.words,type:t,from:"common_in_"+t});(0,w.default)(a,"更多好友","fetch")}};return d.default.createElement(g.default,{title:e.words,key:e.words,btn:o,onClick:l,btn_class:"text-muted",icon_classname:"text-muted"},e.cards.map(function(e,a){var o=e.card;return d.default.createElement(m.default,{key:o.id,cursor:n.select("info",t,"cards",a,"card"),contact:o,status:c.status,pingback:{fr:2,position:t+"card-"+a},from:"common_out_"+t,search:!0,mycard:c})}))}},renderCommonContactsCell:function(e,t){var a=this.props,n=a.news,c=a.alls;if(!(e.cards.length<=0)){var o=function(){if(e.more){var a="/contact/words_friends?"+r.default.stringify({words:e.words,type:t,from:"common_in_"+t});(0,w.default)(a,"更多好友","fetch")}};return d.default.createElement(E.default,{key:"work_empty",onClick:o,title:"同事 / 前同事",leftIcon:"/static/images/company.jpg"},n&&n.new_company>0&&d.default.createElement("span",{className:"small",style:{color:"#ff9600"}},n.new_company,"个新人脉")||c.new_company&&d.default.createElement("span",{className:"text-info small"},c.new_company,"人")||null)}},cellClick:function(e,t){var a="/contact/words_friends?"+r.default.stringify({words:e.words,type:t,from:"common_in_"+t});(0,w.default)(a,e.words,"fetch")},renderColleaguesCell:function(e,t){var a=this,n=this.props,c=n.news,o=n.alls;if(!(e.cards.length<=0))return d.default.createElement(E.default,{key:t+"_cell",onClick:function(){a.cellClick(e,t)},title:e.words,leftIcon:"/static/images/company.jpg"},c&&c.new_company>0&&d.default.createElement("span",{className:"small",style:{color:"#ff9600"}},c.new_company,"个新人脉")||o.new_company&&d.default.createElement("span",{className:"text-info small"},o.new_company,"人")||null)},renderSchoolmatesCell:function(e,t){var a=this,n=this.props,c=n.news,o=n.alls;if(!(e.cards.length<=0))return d.default.createElement(E.default,{key:t+"_cell",onClick:function(){a.cellClick(e,t)},title:e.words,leftIcon:"/static/images/benke.png"},c&&c.new_school>0&&d.default.createElement("span",{className:"small",style:{color:"#ff9600"}},c.new_school,"个新人脉")||o.new_school&&d.default.createElement("span",{className:"text-info small"},o.new_school,"人")||null)},renderHometownCell:function(e,t){var a=this,n=this.props,c=n.news,o=n.alls;if(!(e.cards.length<=0))return d.default.createElement(E.default,{key:t+"_cell",onClick:function(){a.cellClick(e,t)},title:e.words,leftIcon:"/static/images/jiaxiang.png"},c&&c.new_ht>0&&d.default.createElement("span",{className:"small",style:{color:"#ff9600"}},c.new_ht,"个新人脉")||o.new_ht&&d.default.createElement("span",{className:"text-info small"},o.new_ht,"人")||null)},renderMajorCell:function(e,t){var a=this;if(!(e.cards.length<=0)){var n=(0,v.default)(this.props.mycard.profession,this.props.mycard.major,"|");return d.default.createElement(E.default,{key:t+"_cell",onClick:function(){a.cellClick(e,t)},title:e.words,leftIcon:"/static/images/tonghang.png"},d.default.createElement("span",{className:"text-info small"},n))}},render:function(){var e=this.props,t=e.contacts,a=e.cursor;e.info,this.props.mycard.id,this.props.mycard.id;return d.default.createElement("div",null,d.default.createElement(i.default,{title:"拓展人脉"}),d.default.createElement("div",{className:"list_search_bg"},d.default.createElement("div",{className:"search_btn",onClick:this.gotoSearchContact},d.default.createElement("i",{className:"search_icon"}),"搜索人脉")),d.default.createElement(g.default,{title:""},this.renderFollow()),d.default.createElement(x,{loadMore:this.loadMore,hasMore:t.remain>0,loader:d.default.createElement(h.default,{ref:"loader",reload:this.loadMore,cursor:a.select("loading_status")})},this.renderContacts()))}});e.exports=N}});