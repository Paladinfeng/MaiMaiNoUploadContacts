webpackJsonp([83],{1156:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=a(1),i=r(s),u=a(171),f=r(u),d=a(46),m=r(d),p=a(15),h=r(p),y=function(e){function t(){var e,a,r,l;n(this,t);for(var c=arguments.length,s=Array(c),i=0;i<c;i++)s[i]=arguments[i];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.fill=function(){var e=r.props.contact;e.shared?(0,m.default)("/contact/detail2/"+e.mmid,"人脉详情","fetch"):(0,m.default)("/contact/share_friend_fill_info?"+h.default.stringify({mobile:e.mobile,name:e.name}),"标注人脉印象",{})},l=a,o(r,l)}return l(t,e),c(t,[{key:"render",value:function(){var e=this.props.contact;return i.default.createElement("div",{className:"border-bottom-e0 p-x p-y p-relative",onClick:this.fill},i.default.createElement("div",{className:"media-left font-0 media-middle"},i.default.createElement("img",{className:"avatar-45 radius-50",src:e.avatar})),i.default.createElement("div",{className:"media-body media-middle"},i.default.createElement("div",{className:"font-bold"},e.name),i.default.createElement("div",null,i.default.createElement("span",{className:"share_coin_icon2 media-middle m-r-5"}),i.default.createElement("span",{className:"small text-muted media-middle"},"50人脉币"))),i.default.createElement("div",{className:"media-right media-middle p-l-0"},i.default.createElement("div",{className:e.shared?"share_friend_text":"share_friend_btn"},e.shared?"已被标注":"去标注")),i.default.createElement(f.default,{dist:1}))}}]),t}(i.default.Component);t.default=e.exports=y},799:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,s,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),f=a(1),d=r(f),m=a(981),p=r(m),h=a(15),y=r(h),_=a(1156),b=r(_),v=a(165),E=r(v),g=a(46),w=(r(g),a(75)),j=r(w),N=a(113),O=a(17),P=r(O),x=a(76),k=r(x),M=a(114),T=r(M),C=a(982);t.default=e.exports=(s=c=function(e){function t(){var e,a,r,l;n(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.loadMore=function(){var e=r.props.cursor,t=r.refs.loader;t&&t.bindRequest(function(){return fetch("/contact/outapp_fr_list?"+y.default.stringify({start:r.props.start||0,jsononly:1}),{credentials:"same-origin"}).then(w.parse_online_json).then(function(t){e.select("contacts").concat(t.data.contacts||[]),e.select("more").set(t.data.more),e.select("start").set(t.data.start)})})},r.onShare=function(e){var t=r.props,a=t.cursor,n=(t.contacts,t.currency),o=P.default.findIndex(r.props.contacts,function(t){return t.mobile==e.mobile});o>=0&&(a.select("contacts",o,"shared").set(1),a.select("currency","total").set(n.total+50),a.select("currency","total1").set(n.total1+50))},r.markAll=P.default.debounce(function(){var e=r.context,t=e.fconf,a=e.auth_info,n=r.props,o=n.cursor,l=n.contacts,c=n.currency,s=[],u={};if(l.forEach(function(e,t){1!=e.shared&&(u[e.mobile]=e.name,s.push(t))}),0==s.length)return void(0,k.default)("当页已全部标注");var f=t.online_url+"user/v5/upadfrs?"+y.default.stringify(i({},a)),d=fetch(f,{credentials:"same-origin",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:y.default.stringify({nminfos:JSON.stringify(u)})}).then(j.default.parse_online_json).then(function(){(0,k.default)("当页已全部标注"),s.forEach(function(e){return o.select("contacts",e,"shared").set(1)}),o.select("currency","total").set(c.total+50*s.length),o.select("currency","total1").set(c.total1+50*s.length)}).catch(j.default.toast_error_handler);(0,T.default)("请求中...",d)},500,!0),l=a,o(r,l)}return l(t,e),u(t,[{key:"componentDidMount",value:function(){(0,N.bindBroadcast)("share_friend",this.onShare)}},{key:"componentWillUnmount",value:function(){(0,N.unbindBroadcast)("share_friend",this.onShare)}},{key:"render",value:function(){var e=this.props.more||0;return d.default.createElement("div",{className:"add_friend_requested share_friend_bg"},d.default.createElement(p.default,{title:"标注人脉"}),d.default.createElement("div",{className:"w-100 font-0"},d.default.createElement("img",{className:"mw-100",src:"/static/images/share_friend_banner5.png"})),d.default.createElement("div",{className:"share_friend_coin"},d.default.createElement("div",{className:"fl"},d.default.createElement("span",{className:"share_coin_icon3 media-middle m-r-5"}),d.default.createElement("div",{className:"d-i-b media-middle"},"我的人脉币：",this.props.currency.total)),d.default.createElement("div",{className:"fr"},"总赚取人脉币 ",this.props.currency.total1)),d.default.createElement("div",{className:"share_friend_list"},d.default.createElement(C,{loadMore:this.loadMore,hasMore:e>0,loader:d.default.createElement(E.default,{ref:"loader",reload:this.loadMore,cursor:this.props.cursor.select("loading_status")})},this.props.contacts.map(function(e){if(!e.in_app)return d.default.createElement(b.default,{key:e.id||e.mmid,contact:e})}))),d.default.createElement("div",{className:"share_friend_shadow m-b-20"},d.default.createElement("img",{src:"/static/images/share_friend_shadow.png"})),d.default.createElement("div",{style:{height:116}}),"}",d.default.createElement("div",{className:"add_friends_btn_fixed p-y",style:{background:"#2EBAD9"}},d.default.createElement("div",{className:"text-center text-white"},"推荐理由: 有两把刷子"),d.default.createElement("div",{className:"add_friends_btn m-y-10 font-bold",style:{color:"#333"},onClick:this.markAll},"一键标注")))}}]),t}(d.default.Component),c.contextTypes={auth_info:d.default.PropTypes.object,req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,env:d.default.PropTypes.object},s)}});