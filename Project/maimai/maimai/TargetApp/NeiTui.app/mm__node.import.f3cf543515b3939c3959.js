webpackJsonp([78],{1673:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=e.exports=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChecked=function(e){var t=n.props.friend;1==n.state.checked?n.setState({checked:0}):n.setState({checked:1}),n.props.handleChecked&&n.props.handleChecked(t.id),e.stopPropagation()},n.state={checked:n.props.friend.default_checked},n}return o(t,e),c(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.friend;return l.default.createElement("div",{className:"p-x-30 p-y-10",onClick:this.handleChecked},l.default.createElement("div",{className:"media-left media-middle"},l.default.createElement("div",{className:"font-0 avatar-35"},l.default.createElement("img",{className:"avatar-35 radius-50",src:e.avatar}))),l.default.createElement("div",{className:"media-body media-middle"},l.default.createElement("div",{className:"lineClamp1"},e.name)),l.default.createElement("div",{className:"media-right media-middle"},l.default.createElement("span",{className:1==this.state.checked?"checked_25":"check_25"})))}}]),t}(l.default.Component)},976:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,l,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n(1),d=a(f),p=n(47),h=(a(p),n(15)),m=a(h),_=n(981),y=a(_),v=n(1673),b=a(v),k=n(274),g=a(k),j=n(76),E=a(j),O=n(75),w=a(O),P=n(46),C=a(P);t.default=e.exports=(l=i=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChecked=function(e){var t=n.state.checked_us,a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e),n.setState({checked_us:t})},n.startGame=function(){var e=n.state.checked_us.length,t=n.context,a=t.req,r=t.fconf,o=t.auth_info,c=a.query.fr;if(e<5)return void(0,E.default)("再添加"+(5-e)+"位好友，才能开始游戏哟~");var i=r.online_url+"contact/v5/friend_tags/marking?"+m.default.stringify(u({fr:c,us:n.state.checked_us.join(",")},o));fetch(i).then(w.default.parse_online_json).then(function(e){if("ok"==e.result){var t="/tag/tag_game_choose?"+m.default.stringify({fr:c,u:n.props.u,us:n.state.checked_us.join(","),mark_id:e.data.mark_id});(0,C.default)(t,"贴标签","fetch")}}).catch(function(e){(0,E.default)(e.error_msg?e.error_msg:"请求失败")})},n.state={checked_us:n.props.checked_us},n}return c(t,e),s(t,[{key:"componentDidMount",value:function(){g.default.isSupportTansMenuBar(this.context)&&g.default.setMenuBarStyle({banner_trans:!0,banner_color:"",banner_lightstyle:"",hideTitle:!0})}},{key:"render",value:function(){var e=this,t=this.props.friends,n=g.default.isSupportTansMenuBar(this.context),a=g.default.isSupportTansShowTitleMenuBar(this.context),r=void 0;return r=this.state.checked_us.length<5?"再添加"+(5-this.state.checked_us.length)+"位好友，开始游戏":"开始游戏",d.default.createElement("div",{className:""},d.default.createElement(y.default,{title:"选择好友"}),a&&d.default.createElement("div",{className:"tag_game_back tag_game_back_position"}),n&&d.default.createElement("div",{style:{height:"iphoneX"==this.context.env.device?80:64}}),d.default.createElement("div",{className:"text-center font-20 m-b-25"},"添加你最想贴标签的好友"),d.default.createElement("div",{className:"tgame_friend_list_wrap",ref:"tgame_friend_list",style:{top:n?115:52}},d.default.createElement("div",{className:"tgame_friend_list"},t.map(function(t,n){return d.default.createElement(b.default,{key:"friend"+n,friend:t,handleChecked:e.handleChecked})}))),d.default.createElement("div",{className:"tgame_btn",onClick:this.startGame},r))}}]),t}(d.default.Component),i.contextTypes={auth_info:d.default.PropTypes.object,fconf:d.default.PropTypes.object,req:d.default.PropTypes.object,env:d.default.PropTypes.object},l)}});