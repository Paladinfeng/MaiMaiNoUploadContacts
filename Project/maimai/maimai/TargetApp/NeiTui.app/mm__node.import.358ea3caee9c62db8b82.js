webpackJsonp([73],{1462:function(t,e,a){"use strict";var s=a(1),o=s.createClass({displayName:"UploadBankImg",render:function(){var t=this.props.has_photo,e=this.props.photo_url,a="已上传",o="idImgBox p-x-10 p-y-10";return t||(e="/static/images/bankImg1.png",a="【示例】",o="idImgBox_grey p-x-10 p-y-10"),s.createElement("div",null,s.createElement("div",{className:"m-y p-t-10"},s.createElement("div",{className:"p-x p-y",style:{margin:"20px 40px 0"}},s.createElement("div",{className:o},s.createElement("img",{src:e}))),s.createElement("p",{className:"m-b-0 text-center"},a),s.createElement("div",{className:"m-x m-y text-center"},s.createElement("div",{className:"btn w-100 btn-secondary",onClick:this.props.showbtns},"上传银行卡正面照片"))))}});t.exports=o},770:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},n=a(1),r=s(n),i=a(46),l=s(i),c=a(114),p=(s(c),a(1046),a(113)),d=(s(p),a(15)),u=s(d),h=a(76),f=s(h),m=a(75),_=s(m),v=a(1096),y=(s(v),a(1462)),g=s(y),b=a(1097),x=s(b),w=a(164),N=a(166),E=a(981),k=a(41),C=r.default.createClass({displayName:"UploadCardImgPanel",mixins:[k],contextTypes:{auth_info:r.default.PropTypes.object,fconf:r.default.PropTypes.object},getInitialState:function(){return{show_upload:!1}},closePage:function(){window.MaiMai_Native.close_native(null,!0)},componentDidMount:function(){(0,p.bindBroadcast)("bank_card_added",this.closePage)},showUploadButtons:function(){this.setState({show_upload:!0})},set_file:function(t){var e=this,a=this.context,s=a.fconf,n=a.auth_info,r=s.online_url+"mmpay/v4/set_file?"+u.default.stringify(o({ftype:2,fid:t.id,cardnum:this.props.cardnum,cardid:this.props.cardid},n));fetch(r).then(_.default.parse_online_json).then(function(a){e.props.cursor.select("photo_url").set(t.url),e.props.cursor.select("has_photo").set(1)}).catch(_.default.toast_error_handler)},upload_callback:function(t){var e=JSON.parse(t);this.set_file(e)},onUploadClick:function(t,e){if(this.setState({show_upload:!1}),1==e||2==e){var a={type:2,compress:.6,security:1,select_type:e};(0,w.uploadImageToServer)(JSON.stringify(a),this.upload_callback)||(0,f.default)("请使用客户端上传照片")}},onNextClick:function(){if(!this.props.add_card)return void window.MaiMai_Native.close_native(null,!0);(0,l.default)("/contact/account/add_bank_card?"+u.default.stringify({cardnum:this.props.cardnum,type:this.props.type,deposit:this.props.deposit,dpvalue:this.props.dpvalue}),"我的银行卡","fetch")},render:function(){var t=void 0,e=void 0,a=void 0;this.state.show_upload&&(t=r.default.createElement(x.default,{show_type:"3",onClick:this.onUploadClick}));var s=this.onNextClick,o="btn w-100 btn-secondary";return this.props.add_card>0?(e=r.default.createElement("div",{className:"lightBlueTips small"},"由于第三方支付合作方要求,用户绑卡时需上传银行卡正面照片."),this.props.has_photo||(s=null,o="btn w-100 btn-grey-bg"),a="下一步"):a=this.props.has_photo?"完成":"关闭",r.default.createElement("div",null,r.default.createElement(E,{title:"银行卡信息"}),e,r.default.createElement(g.default,{has_photo:this.props.has_photo,photo_url:this.props.photo_url,showbtns:this.showUploadButtons}),r.default.createElement("div",{className:"m-x m-y text-center"},r.default.createElement("div",{className:o,onClick:s},a)),t)}});t.exports=N(C)}});