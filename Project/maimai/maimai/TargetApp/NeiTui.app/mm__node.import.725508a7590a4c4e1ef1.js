webpackJsonp([6],{1082:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,c,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),d=n(u),f=a(47),p=(n(f),a(115),a(15)),m=n(p),h=a(47),_=(c=o=function(e){function t(){var e,a,n,l;i(this,t);for(var o=arguments.length,c=Array(o),s=0;s<o;s++)c[s]=arguments[s];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.gotoRegister=function(){var e;e=n.props.cshow_url?n.props.cshow_url+"&":"http://maimai.cn/show2?";var t=e+m.default.stringify({regfr:"fcard",abtag:"b"});n.props.reg_url&&(t=n.props.reg_url),window.location=t},l=a,r(n,l)}return l(t,e),s(t,[{key:"componentDidMount",value:function(){this.reportItemHeight()}},{key:"reportItemHeight",value:function(){if(this.props.updateItemHeight){var e=h.findDOMNode(this.refs.personInfoBottom);this.props.updateItemHeight(e.clientHeight)}}},{key:"render",value:function(){return"didi_client"==this.context.req.query.regfr?d.default.createElement("div",{ref:"personInfoBottom"}):d.default.createElement("div",{ref:"personInfoBottom",className:"livevideoBottomWrap",onClick:this.gotoRegister},d.default.createElement("div",{className:"p-relative articleBottomBox"},d.default.createElement("div",{className:"articleBottomBg"}),d.default.createElement("div",{className:"articleBottom p-absolute text-white"},d.default.createElement("div",{className:"media-left p-r-10"},d.default.createElement("div",{className:"articleBottomAvatar"},d.default.createElement("img",{className:"w-100 radius-45",src:this.props.avatar}))),d.default.createElement("div",{className:"media-body media-middle font-14"},"我还有遍布12750公司",d.default.createElement("br",null),"的人脉想跟你共享"),d.default.createElement("div",{className:"media-right media-middle p-r"},d.default.createElement("div",{className:"download_btn_white small"},"立即下载")))),d.default.createElement("div",{className:"text-center small clearfix"},d.default.createElement("img",{className:"w-100",src:"../../static/images/detail_bottom.png"})))}}]),t}(d.default.Component),o.contextTypes={req:d.default.PropTypes.object},c);t.default=e.exports=_},1092:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(984),l=a(993),o=n(l),c=a(47),s=n(c),u=a(1),d=a(17),f=a(15),p=(a(985)("app"),a(991),a(90)),m=a(75),h=a(114),_=a(1004),v=a(41),y=a(115).launch_webview,b=a(46),g=(a(116),a(168)),x=a(999),w=a(1005),E=w.showInputPanel,k=w.clearInput,N=a(1014);e.exports=u.createClass({displayName:"exports",mixins:[v],contextTypes:{auth_info:u.PropTypes.object,fconf:u.PropTypes.object,env:u.PropTypes.object},getInitialState:function(){return{expand_txt:null,line_clamp:15,showInput:!1}},componentDidMount:function(){window.onInputFinished=w.onInputFinished,this.checkExpandTxt()},checkExpandTxt:function(){this.refs.txt.isTextOverflow()&&this.setState({expand_txt:"展开"})},getCoordinates:function(e){return s.default.findDOMNode(e).getBoundingClientRect().height},componentWillUnmount:function(){window.onInputFinished=null},showFeedDetail:d.debounce(function(){var e=this.props,t=e.feed,a=e.is_exp,n=this.context,r=n.auth_info,l=n.fconf,o=t.feed.text,c=o.length>250&&"operation_topic"!=t.feed.data_str;if(r.u>0){if(c&&!a?b("/article/detail?fid="+t.fid,"查看全文","fetch"):x(t.fid),t.feed.search_qs&&t.feed.search_order){var s=l.online_url+"search/web/s_pb?"+f.stringify(i({srcu:r.u,type:"feed",targetid:t.feed.id,order:t.feed.search_order,qs:t.feed.search_qs},r));fetch(s)}}else c&&!a?b("/article/detail?fid="+t.fid,"查看全文","fetch"):location.href="/web/feed_detail?fid="+t.fid},1e3,!0),like:function(e){var t=this;e.stopPropagation();var a=this.props,n=a.feed,r=a.cursor,l=this.context,o=l.auth_info,c=l.fconf;if(r&&o.u>0)try{var s=n.me_like;this.props.cursor.select("me_like").set(1==s?0:1);var u=n.feed.likes;this.props.cursor.select("feed","likes").set((1==s?-1:1)+u);var d=c.online_url+"feed/v3/like?"+f.stringify(i({fid:this.props.feed.fid,like:1==s?0:1},o));fetch(d).then(m.parse_online_json).catch(m.toast_error_handler).catch(function(e){t.props.cursor.select("me_like").set(s),t.props.cursor.select("feed","likes").set(u)})}catch(e){alert(e)}else o.u<0&&y()},gotoDetail:function(e){this.refs.avatar.gotoDetail(e)},spreadComment:function(e,t){var a=this,n=this.context,r=n.auth_info,l=n.fconf,o=this.props.feed,c="live_video_"+o.fid;if(!e)return void toast("回复内容不能为空");var s=new FormData;s.append("fid",o.fid),s.append("text",e),s.append("at_user_info",t);var u=l.online_url+"feed/v3/comment_spread?"+f.stringify(i({},r)),d=fetch(u,{method:"post",body:s}).then(m.parse_online_json).then(function(t){k(c),a.props.cursor.select("spread_feed","feed").set({summary:e})}).catch(m.toast_error_handler);h("请求中...",d)},reply:function(e){e.stopPropagation();var t=this.props.feed;if(window.MaiMai_Native.native_show_inputpanel){var a="live_video_"+t.fid,n=this.props.contact||t.contact;E("回复",a,this.spreadComment,"回复 "+n.name)}else this.replaceState({showInput:!this.state.showInput})},renderInputPanel:function(){if(this.context.env.from_pc){var e=this.props.feed,t=this.props.contact||e.contact,a="回复 "+t.name;return u.createElement("div",{className:this.state.showInput?"p-b":"hidden",style:{marginLeft:50},onClick:function(e){e.stopPropagation()}},u.createElement(_,{placeHolder:a,onClickSend:this.spreadComment,maxWord:250}))}},onExpandTxtClicked:function(e){e.stopPropagation(),"展开"==this.state.expand_txt?this.setState({expand_txt:null,line_clamp:0}):this.showFeedDetail()},renderExpandTxt:function(){var e=this.state.expand_txt,t=this.props.type;if(e)return u.createElement("div",{className:"text-primary liveReply "+(t?"":"text-center"),onClick:this.onExpandTxtClicked},e,t?"":u.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}}))},render:function(){var e=this.state.line_clamp,t=this.props,a=t.feed,n=t.reply,i=t.type,l=(t.author_card,t.is_exp),c=this.props.contact||a.contact,s=this.props.author_card&&0==this.props.author_card.dist&&this.props.author_card.id!=c.id&&!n&&0!=c.dist;return u.createElement("li",{className:"border-bottom-e0 list-unstyled p-y-20 clearfix ",onClick:this.showFeedDetail},u.createElement("div",{className:"media m-b-10"},u.createElement("div",{className:"media-left media-middle"},u.createElement(g,{ref:"avatar",customClass:"avatar-24 radius-50",card:c,image_id:this.props.image_id,onClick:this.gotoDetail})),u.createElement("div",{className:"media-body media-middle"},u.createElement("div",{className:"lineClamp1 text-muted "+(i?"font-14 text-gray-7d":"")},u.createElement("span",{onClick:this.gotoDetail},c.name),1==c.judge&&u.createElement("span",{className:"add_v_img"}),1==c.mem_st&&N.renderMember(c.mem_id))),u.createElement("div",{className:"media-right media-middle text-right p-l-0"},this.props.cursor&&u.createElement("div",{style:{width:"60px"},className:"p-r-20 "+(a.me_like?"red_heart_icon":"gray_heart_icon")+(i?" font-12 text-gray-808393":""),onClick:this.like},a.feed.likes>0&&a.feed.likes),u.createElement("div",{style:{width:"50px",display:"none"}},this.props.cursor&&u.createElement("img",{src:a.me_like?"/static/images/ding2.png":"/static/images/ding1.png",style:T.img}),u.createElement("span",{className:"text-light small"}," ",a.feed.likes>0&&a.feed.likes)))),u.createElement("div",{className:"m-b-10 "+(l?"exp_topic_title":""),style:e>0?(0,r.textOverflow)(e):null},u.createElement(o.default,{ref:"txt",text:a.feed.summary||a.feed.richtext||a.feed.text})),this.renderExpandTxt(),s&&u.createElement("span",{className:"text-primary liveReply",onClick:this.reply},"回复"),this.props.children,n&&u.createElement("div",{className:"gray-bg-f9 p-x-10 p-y-10"},u.createElement("div",{className:"media-body media-middle font-13 text-muted"},u.createElement("span",null,n.contact.name),"回复:",u.createElement(p,{text:n.feed.summary||n.feed.richtext||n.feed.text,support_dref:!0}))),s&&this.renderInputPanel())}});var T={heading:{marginTop:-10,marginLeft:-20,marginRight:-20},like:{marginBottom:3},avatarSize:{width:42,height:42,WebkitBorderRadius:"2px"},img:{width:"14px",height:"14px",marginBottom:"4px"},tableCell:{display:"table-cell"},zanBox:{display:"table-cell",textAlign:"center",verticalAlign:"middle",width:50}}},1138:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),d=a(15),f=n(d),p=a(75),m=n(p),h=a(1092),_=n(h),v=a(1008),y=n(v),b=a(986),g=n(b),x=a(46),w=n(x),E=a(290),k=n(E),N=a(1093),T=n(N),j=a(1017),M=n(j),C=a(1056),O=n(C),P=a(115),S=a(114),q=n(S),B=function(e){function t(){var e,a,n,l;i(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.more_topic=function(){var e=n.context.req;(0,w.default)("/article/topic_relative?"+f.default.stringify({id:e.query.id}),"更多问答","fetch")},n.article_all=function(){var e=n.context.req;(0,w.default)("/article/topic_article_relative?"+f.default.stringify({id:e.query.id}),"更多专栏","fetch")},n.topic_more=function(){var e=n.context,t=e.req,a=e.auth_info,i=n.props,r=i.cursor,l=i.feeds,c=i.topicid;r.select("content_status").set("loading");var s="/sdk/article/topic_more?"+f.default.stringify(o({id:t.query.id||c,start:l.length,count:40},a)),u=fetch(s,{credentials:"same-origin"}).then(m.default.parse_online_json).then(function(e){r.select("feeds").concat(e.feeds),r.select("more").set(e.more),r.select("content_status").set(null)}).catch(function(e){r.select("content_status").set(null),m.default.toast_error_handler(e)});(0,q.default)("加载中..",u)},l=a,r(n,l)}return l(t,e),c(t,[{key:"renderContent",value:function(){var e=this,t=this.props,a=t.feeds,n=t.content_status,i=t.feeds_count,r=t.more,l=t.tag_datas,o=t.text,c=1==r&&i>a.length&&!n,s=o||"回答",d="loading"==n;return u.default.createElement("div",null,i>0&&u.default.createElement("div",{className:"font-16 p-t p-b-5 p-x-20 bg-F3F6F7"},"全部",i,"条",s),u.default.createElement("ul",{key:"content-2",className:"list-group m-b-0 topic_contentB bg-F3F6F7"},a.map(function(t,a){var n=null;return e.props.author_card&&t.spread_feed&&(n=t.spread_feed,n.contact=e.props.author_card),u.default.createElement(_.default,{key:t.fid,feed:t,type:"topicB",is_exp:!!l.render_info,reply:n,author_card:t.contact,cursor:e.props.cursor.select("feeds",a)},u.default.createElement(y.default,{class:"topic_feedlistB",images:t.feed.pics,max_count:3,type_multi:!0}))}),c&&u.default.createElement(g.default,{onClick:this.topic_more},u.default.createElement("span",null,"更多",s),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})),d&&u.default.createElement("div",{dangerouslySetInnerHTML:{__html:(0,k.default)()}})))}},{key:"renderRelateArticle",value:function(){var e=this.props.re_articles;if(e&&e.articles.length>0)return[u.default.createElement("div",{key:"relete-3",className:"panel-heading p-x-20 p-t p-b-5 bg-F3F6F7"},u.default.createElement("span",{className:"text-black-3 font-16"},"相关专栏")),u.default.createElement("ul",{key:"relete-4",className:"list-group re_articlesB m-b-0"},e.articles.map(function(e){return u.default.createElement(T.default,{key:e.id,feed:e})}),e.more>0&&u.default.createElement(g.default,{onClick:this.article_all},u.default.createElement("span",null,"更多专栏"),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})))]}},{key:"renderRelateTopic",value:function(){if(this.props.re&&this.props.re.length>0)return[u.default.createElement("div",{key:"relete-1",className:"panel-heading p-x-20 p-t p-b-5 bg-F3F6F7"},u.default.createElement("span",{className:"text-black-3 font-16"},"相关问答")),u.default.createElement("ul",{key:"relete-2",className:"list-group re_topicB m-b-0"},this.props.re.map(function(e){return u.default.createElement(M.default,{key:e.id,topic:e,type:"topicB"})}),u.default.createElement(g.default,{onClick:this.more_topic},u.default.createElement("span",null,"更多问答"),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})))]}},{key:"renderHotTopic",value:function(){if(this.props.hot&&this.props.hot.length>0)return[u.default.createElement("div",{key:"hot-1",className:"panel-heading p-x-20 p-t p-b-5 bg-F3F6F7"},u.default.createElement("span",{className:"text-black-3 font-16"},"热门问答")),u.default.createElement("ul",{key:"hot-2",className:"list-group hot_topicB m-b-0"},this.props.hot.map(function(e){return u.default.createElement(M.default,{key:e.id,topic:e,hideTag:!0})}),u.default.createElement(g.default,{onClick:function(){return(0,P.launch_webview)()}},u.default.createElement("span",null,"更多热门问答"),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})))]}},{key:"renderHotArticle",value:function(){var e=this.context.auth_info;if(this.props.hot_article&&this.props.hot_article.length>0)return[u.default.createElement("div",{key:"relete-article",className:"panel-heading p-x-20 p-t p-b-5 bg-F3F6F7"},u.default.createElement("span",{className:"text-black-3 font-16"},"推荐头条")),u.default.createElement("ul",{key:"relete-article-u",className:"list-group hot_articleB"},this.props.hot_article.map(function(e){return u.default.createElement(O.default,{key:e.fid,feed:e,xSpace:20})}),e.u>0&&u.default.createElement(g.default,{onClick:function(){return(0,w.default)("/article/headline?fr=topic","行业头条","fetch")}},u.default.createElement("span",null,"更多行业头条"),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})))]}},{key:"render",value:function(){var e=this.context,t=e.auth_info;e.fconf;return u.default.createElement("div",null,this.renderContent(),this.renderRelateArticle(),this.renderRelateTopic(),t.u<0&&this.renderHotTopic(),this.renderHotArticle())}}]),t}(u.default.Component);B.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object,wx_sdk:u.default.PropTypes.object},e.exports=B},1419:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,c,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),d=n(u),f=a(15),p=(n(f),a(115)),m=a(1091);t.default=e.exports=(c=o=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSwipe=function(e){a.setState({current_index:e})},a.state={current_index:0},a}return l(t,e),s(t,[{key:"renderTopic",value:function(e){var t=(this.context.fconf,this.context.req.query.regfr),a=function(){t?(0,p.launch_webview)("regfr="+t,!0):(0,p.launch_webview)("",!0)};return d.default.createElement("div",{className:"p-x p-t-10 p-b"},d.default.createElement("div",{className:"media-left media-middle"},d.default.createElement("img",{className:"avatar-37 b-r-c",src:e.author_card.avatar})),d.default.createElement("div",{className:"media-body media-middle text-white font-13"},e.tag_datas.title),d.default.createElement("div",{className:"media-right media-middle"},d.default.createElement("div",{className:"clearfix"},d.default.createElement("a",{href:"javascript:;",onClick:a,style:{fontSize:"85%"},className:"btn topic_btn fr coverLink"},"打开App"))))}},{key:"render",value:function(){var e=this,t=this.props.topics;return d.default.createElement("div",{className:"topic_down_App",style:{height:60}},d.default.createElement(m,{callback:this.onSwipe,shouldUpdate:this.updateReactSwipe,auto:5e3,continuous:!0},t.map(function(t){return e.renderTopic(t)})),d.default.createElement("div",{className:"carousel slide"},d.default.createElement("ol",{className:"mai_carousel-indicators"},t.map(function(t,a){return d.default.createElement("li",{key:t.topicid,className:e.state.current_index==a?"active":""})}))))}}]),t}(d.default.Component),o.contextTypes={req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,auth_info:d.default.PropTypes.object,env:d.default.PropTypes.object,wx_sdk:d.default.PropTypes.object},c)},1420:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),d=a(15),f=n(d),p=a(981),m=n(p),h=a(50),_=n(h),v=a(46),y=n(v),b=a(75),g=n(b),x=a(170),w=n(x),E=a(115),k=a(114),N=n(k),T=a(116),j=n(T),M=a(1014),C=a(168),O=n(C),P=a(1008),S=n(P),q=a(1059),B=n(q),F=a(993),D=n(F),I=a(113),R=a(167),A=a(1005),W=a(998),H=n(W),J=a(983),L=n(J),Q=a(76),U=n(Q),K=a(47),z=n(K),Z=a(984),V=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSendTxtTopic=function(e){var t=a.context,n=t.fconf,i=t.auth_info,r=n.online_url+"feed/v3/add?"+f.default.stringify(o({text:e},i)),l=fetch(r,{credentials:"same-origin"}).then(g.default.parse_online_json).then(function(e){a.reloadData(e.feed),(0,A.clearInput)(a.getInputCacheKey())}).catch(w.default.toast_error_handler);(0,N.default)("设置中...",l)},a.getInputCacheKey=function(){return"topic_"+a.context.req.query.id},a.reloadData=function(e){try{var t={fid:e.id,feed:{id:e.id,uid:e.main.u.id,text:e.main.text,crtime_string:e.crtime,likes:0,pics:e.main.pics,type:e.ftype},contact:e.main.u,me_like:!1};a.props.cursor.select("feeds").unshift(t)}catch(e){(0,b.toast_error_handler)(e)}a.props.cursor.select("feeds_count").set(a.props.feeds_count+1)},a.native_publish_success=function(e){var t=JSON.parse(e).publish_return_data;"pub_topic"!=t.target&&a.reloadData(t.feed)},a.topic_all=function(){var e=a.context,t=e.req,n=(e.auth_info,a.props.feeds);(0,y.default)("/article/topic_all?"+f.default.stringify({id:t.query.id,start:n.length}),"更多回答","fetch")},a.deleteTopic=function(){var e=a.context,t=e.fconf,n=e.auth_info,i=a.props,r=i.topicid,l=i.feeds;if(l&&l.length>0)return void(0,U.default)("已经有人参与了问答，无法删除");if(1==confirm("确认删除此问答?")){var c=t.online_url+"feed/v3/del_topic?"+f.default.stringify(o({topic_id:r},n));fetch(c).then(g.default.parse_online_json).then(function(){window.MaiMai_Native.close_native?window.MaiMai_Native.close_native(null,!0):(0,U.default)("问答删除成功")}).catch(g.default.toast_error_handler)}},a.closeTopic=function(){MaiMai_Native.close_native(null,!0)},a.gotoDetail=function(e){a.refs.avatar.gotoDetail(e)},a.inviteFriends=function(){if(a.context.env.from_pc)return void(0,U.default)("请使用脉脉app邀请");var e=a.props.topicid,t=a.context.auth_info;window.invite_cb=function(a){var n="/sdk/article/topic_invite?"+f.default.stringify(o({topicid:e,us:a},t));fetch(n,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){(0,U.default)("邀请成功")}).catch(b.toast_error_handler)},window.MaiMai_Native.native_choose_contacts("invite_cb",JSON.stringify({title:"邀请LV2好友参与",count:10,selectTooManyTips:"一次最多邀请10个好友",type:2,confirmButtonText:"邀请",min_level:2}),"")},a.onExpandTxtClicked=function(e){e.stopPropagation(),a.setState({expand_txt:null,line_clamp:0})},a.goToSendFeed=function(){var e=a.context,t=e.req;if(e.auth_info.u>0){if(window.MaiMai_Native.native_publish||window.MaiMai_Native.native_add_topic){var n={target:"topic_add_feed",title:"参与问答",max_limit:5e3,right_button_text:"发布",text_holder:"说上几句吧...",extra_infomation:JSON.stringify({hash:w.default.generateFeedHash(),operation_topic:t.query.id,article_url:window.location.href,tags:t.query.query})};return void(window.MaiMai_Native.native_add_topic?(n.ui_tag=16,window.MaiMai_Native.native_add_topic(JSON.stringify(n))):window.MaiMai_Native.native_publish(JSON.stringify(n)))}(0,_.default)("/article/pub_feed_pc?"+f.default.stringify({tags:t.query.query,id:t.query.id,article_url:window.location.href}),"参与问答")}else(0,E.launch_webview)()},a.follow=function(){var e=a.context,t=e.auth_info,n=e.fconf;if(t.u<0)return void(0,E.launch_webview)();var i=a.props.sub.me?0:1,r=o({sub:i,topic_id:a.props.topicid},t),l=n.online_url+"feed/v3/sub_topic?"+f.default.stringify(r),c=fetch(l,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){a.props.cursor.select("sub","me").set(i),a.props.cursor.select("sub","n").set(a.props.sub.n+(0==i?-1:1))}).catch(b.toast_error_handler);(0,N.default)("设置中...",c)},a.share=function(){if(a.context.auth_info.u<0)return void(0,E.launch_webview)();MaiMai_Native.native_share(1)},a.pub_topic=function(){var e=a.context;e.req;e.auth_info.u>0?window.MaiMai_Native.native_publish_topic?window.MaiMai_Native.native_publish_topic(JSON.stringify({target:"pub_topic",title:"发起问答",right_button_text:"确定",header_holder:"请输入问答，8～30字",header_min_limit_tips:"问答标题应在8~30字之间",header_max_limit_tips:"问答标题应在8~30字之间",header_min_limit:8,header_max_limit:30,text_holder:"请输入问答详情（选填）\n\n可以是\n1.自己的观点\n2.对问答的进一步说明",max_limit:500,max_limit_tips:"问答详情不能多于500字",ui_tag:44,extra_infomation:JSON.stringify({})})):(0,y.default)("/article/pub_topic_detail","发起问答",{}):(0,E.launch_webview)()},a.state={expand_txt:null,line_clamp:7},a}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;window.deleteTopic=this.deleteTopic,window.closeTopic=this.closeTopic,window.native_image_data=H.default;var t=this.context,a=t.req,n=t.auth_info,i=(t.fconf,this.props),r=i.cursor,l=i.author_card;(0,I.bindBroadcast)("pub_feed",this.reloadData),(0,I.bindBroadcast)("native_publish_success",this.native_publish_success);var c="/sdk/article/topic?"+f.default.stringify(o({id:a.query.id},n));fetch(c,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){r.merge(e.data)}).catch(b.toast_error_handler);var s=document.location.href.replace("&from_page=pub_topic","");r.select("share_url").set(s),"pub_topic"==a.query.from_page&&l&&n.u==l.mmid&&(window.history.replaceState({},document.title,s),setTimeout(function(){(0,R.showModalForConfirm)({title:"问答发布成功,分享给好友,一起来讨论吧",ok_text:"确定",ok:function(){e.share()},cancel_text:"取消"})},1e3)),this.checkExpandTxt()}},{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var a=this.props,n=a.tag_datas,i=a.feeds_count,r=a.author_card,l=r?r.avatar:"https://maimai.cn/static/images/mailogo.jpg",o={title:n.title,desc:"共"+i+"条回答",link:window.location.href,imgUrl:l,success:function(){},cancel:function(){}};t.wx_sdk.onMenuShareAppMessage(o),t.wx_sdk.onMenuShareTimeline(o),t.wx_sdk.onMenuShareQQ(o),t.wx_sdk.onMenuShareQZone(o)}}},{key:"checkExpandTxt",value:function(){this.props.tag_datas.text&&this.refs.txt&&this.refs.txt.isTextOverflow()&&this.setState({expand_txt:"展开"})}},{key:"getCoordinates",value:function(e){return z.default.findDOMNode(e).getBoundingClientRect().height}},{key:"componentWillUnmount",value:function(){(0,I.unbindBroadcast)("pub_feed"),(0,I.unbindBroadcast)("native_publish_success"),window.deleteTopic=null,window.closeTopic=null}},{key:"renderDomainSkill",value:function(){var e=this.props.tag_datas.tags?this.props.tag_datas.tags:"";return e.length>0?(e=e.split(","),u.default.createElement("div",{className:"article_domain_skill_wrap"},u.default.createElement("div",{className:"article_domain_skills"},e.map(function(e){return u.default.createElement("span",{className:"article_domain_skill"},e)})))):void 0}},{key:"renderTitle",value:function(){var e=this.props,t=e.tag_datas,a=e.feeds_count,n=e.cursor,i=e.author_card,r=e.feeds_active_count,l=this.context.auth_info,o="";a&&(o=" -"+a+"回答"),r&&(o+=(o.length>0?"，":" -")+r+"赞同");var c={share_info:{name:"问答",title:t.title+o,url:n.select("share_url").get(),desc:"共"+a+"条回答",card_id:this.props.topicid,icon_callback:'native_image_data("user_avatar")',card_type:4}},s=[];return s.push({title:"分享问答",callback:"MaiMai_Native.native_share(1)"}),i&&l.u==i.mmid&&s.push({title:"删除问答",callback:"deleteTopic()"}),s.push({title:"刷新此链接",callback:"MaiMai_Native.native_refresh()"}),s.push({title:"在浏览器中打开",callback:"MaiMai_Native.native_open_browser()"}),s.push({title:"关闭此链接",callback:"closeTopic()"}),c.more_items=s,u.default.createElement("div",null,u.default.createElement(m.default,{title:c.share_info.title}),u.default.createElement(L.default,{msg_to_app:c}))}},{key:"renderAuthorCard",value:function(){var e=this.props.author_card;if(e)return u.default.createElement("div",{className:"p-x-20 m-b-10"},u.default.createElement("div",{className:"media-left media-middle"},u.default.createElement(O.default,{ref:"avatar",customClass:"avatar-24 radius-50",card:e,image_id:"user_avatar"})),u.default.createElement("div",{className:"media-body media-middle"},u.default.createElement("div",{className:"text-muted"},u.default.createElement("span",{onClick:this.gotoDetail},e.name),u.default.createElement("span",null," · ",j.default.getCareer(e)),1==e.judge&&u.default.createElement("span",{className:"add_v_img"}),1==e.mem_st&&(0,M.renderMember)(e.mem_id))))}},{key:"renderExpandTxt",value:function(){var e=this.state.expand_txt;if(e)return u.default.createElement("div",{className:"text-info liveReply m-t-10",onClick:this.onExpandTxtClicked},e)}},{key:"renderFollowCard",value:function(){var e=this.context,t=e.env,a=e.auth_info,n=this.props.tag_datas,i="p-x-20 media-table w-100 clearfix";return 1!=n.status&&(i+=" borderBottom"),u.default.createElement("div",{className:i},u.default.createElement("div",{className:"media-left media-middle text-muted w-60 p-r-0"},u.default.createElement("span",{className:"p-r"},this.props.feeds_count,"个回答"),u.default.createElement("span",null,this.props.feeds_active_count,"个赞同")),u.default.createElement("div",{className:"media-right clearfix w-40 text-primary p-l-0",style:{visibility:a.u>0?"visible":"hidden"}},u.default.createElement("div",{className:"fr topicFocus text-right"},u.default.createElement("span",{className:this.props.sub.me?"":"topicFocusBg",onClick:this.follow},this.props.sub.me?"取消关注":"关注")),!t.from_pc&&u.default.createElement("div",{className:"fr p-r-10"},u.default.createElement("span",{className:"topicShare",onClick:this.share},"分享"))))}},{key:"renderActionCard",value:function(){var e=this.context.auth_info,t=this.props.tag_datas;if(!(e.u<0||1!=t.status))return u.default.createElement("div",{className:"p-x-20"},u.default.createElement("div",{className:"media-table w-100 text-center"},u.default.createElement("div",{className:"media-left p-y halfWidth media-middle",onClick:this.inviteFriends},u.default.createElement("div",{className:"btn btn-outline-0089e9 btn-radius-26 w-100",style:{padding:"10px 12px"}},u.default.createElement("span",{className:"media-middle topicInviteIcon"}),u.default.createElement("span",null,"邀请参与"))),u.default.createElement("div",{className:"media-right p-l-0 p-y halfWidth media-middle",onClick:this.goToSendFeed},u.default.createElement("div",{className:"btn btn-primary btn-radius-26 w-100",style:{padding:"10px 12px"}},u.default.createElement("span",{className:"media-middle topicJoinIcon"}),u.default.createElement("span",null,"参与问答")))))}},{key:"renderRelatedArticle",value:function(){if(this.props.articleid){var e=this.props,t=e.article_title,a=e.articleid,n=function(){(0,y.default)("/article/detail?fid="+a+"&from=topic",t,"fetch")};return u.default.createElement("div",{className:"p-x-20 m-t m-b-20"},u.default.createElement("div",{className:"text-muted"},u.default.createElement("span",{className:"group_article_icon m-r-5"}),"相关文章"),u.default.createElement("div",{className:"lineClamp2"},u.default.createElement("span",{className:"d-i-b text-primary",onClick:n},t)))}}},{key:"render",value:function(){var e=this.props,t=e.tag_datas,a=e.tags,n=e.white_list,i=e.topic_imgs,r=this.context,l=(r.fconf,r.env),o=this.state.line_clamp;return u.default.createElement("div",null,this.renderDomainSkill(),this.renderTitle(),u.default.createElement("div",{className:"p-b-15 text-black-3 "+(t.tags?"":"p-t-30")},l.from_pc&&n.cnt>0&&u.default.createElement("div",{className:"pull-right p-r-10"},u.default.createElement("div",{className:"btn btn-block btn-blue-outline btn-small",onClick:this.pub_topic},"+发起问答")),u.default.createElement("div",{className:"tagsContainer"},a.map(function(e,t){return u.default.createElement(B.default,{tag:e,key:t})})),u.default.createElement("p",{className:"p-x-20 font-18 m-b-10"},t.title),this.renderAuthorCard(),t.text&&u.default.createElement("div",{className:"p-x-20 m-b"},u.default.createElement("div",{className:"font-15",style:o>0?(0,Z.textOverflow)(o):null},u.default.createElement(D.default,{ref:"txt",text:t.text,support_dref:!0})),this.renderExpandTxt()),i&&i.length>0&&u.default.createElement("div",{className:"m-b p-l-20"},u.default.createElement(S.default,{images:i})),this.renderRelatedArticle(),this.renderFollowCard(),this.renderActionCard()))}}]),t}(u.default.Component);V.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object,wx_sdk:u.default.PropTypes.object},e.exports=V},1421:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),d=a(981),f=n(d),p=a(15),m=n(p),h=a(50),_=n(h),v=a(46),y=n(v),b=a(75),g=n(b),x=a(170),w=n(x),E=a(115),k=a(114),N=n(k),T=a(168),j=n(T),M=a(1008),C=n(M),O=a(1059),P=n(O),S=a(993),q=n(S),B=a(113),F=a(167),D=a(1005),I=a(998),R=n(I),A=a(76),W=n(A),H=a(47),J=n(H),L=a(983),Q=n(L),U=a(984),K=a(277),z=function(e){function t(e){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSendTxtTopic=function(e){var t=a.context,n=t.fconf,i=t.auth_info,r=n.online_url+"feed/v3/add?"+m.default.stringify(o({text:e},i)),l=fetch(r,{credentials:"same-origin"}).then(g.default.parse_online_json).then(function(e){a.reloadData(e.feed),(0,D.clearInput)(a.getInputCacheKey())}).catch(w.default.toast_error_handler);(0,N.default)("设置中...",l)},a.getInputCacheKey=function(){return"topic_"+a.context.req.query.id},a.reloadData=function(e){try{var t={fid:e.id,feed:{id:e.id,uid:e.main.u.id,text:e.main.text,crtime_string:e.crtime,likes:0,pics:e.main.pics,type:e.ftype},contact:e.main.u,me_like:!1};a.props.cursor.select("feeds").unshift(t)}catch(e){(0,b.toast_error_handler)(e)}a.props.cursor.select("feeds_count").set(a.props.feeds_count+1)},a.native_publish_success=function(e){var t=JSON.parse(e).publish_return_data;"pub_topic"!=t.target&&a.reloadData(t.feed)},a.topic_all=function(){var e=a.context,t=e.req,n=(e.auth_info,a.props.feeds);(0,y.default)("/article/topic_all?"+m.default.stringify({id:t.query.id,start:n.length}),"更多回答","fetch")},a.deleteTopic=function(){var e=a.context,t=e.fconf,n=e.auth_info,i=a.props,r=i.topicid,l=i.feeds;if(l&&l.length>0)return void(0,W.default)("已经有人参与了问答，无法删除");if(1==confirm("确认删除此问答?")){var c=t.online_url+"feed/v3/del_topic?"+m.default.stringify(o({topic_id:r},n));fetch(c).then(g.default.parse_online_json).then(function(){window.MaiMai_Native.close_native?window.MaiMai_Native.close_native(null,!0):(0,W.default)("问答删除成功")}).catch(g.default.toast_error_handler)}},a.closeTopic=function(){MaiMai_Native.close_native(null,!0)},a.gotoDetail=function(e){a.refs.avatar.gotoDetail(e)},a.inviteFriends=function(){if(a.context.env.from_pc)return void(0,W.default)("请使用脉脉app邀请");var e=a.props.topicid,t=a.context.auth_info;window.invite_cb=function(a){var n="/sdk/article/topic_invite?"+m.default.stringify(o({topicid:e,us:a},t));fetch(n,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){(0,W.default)("邀请成功")}).catch(b.toast_error_handler)},window.MaiMai_Native.native_choose_contacts("invite_cb",JSON.stringify({title:"邀请LV2好友参与",count:10,selectTooManyTips:"一次最多邀请10个好友",type:2,confirmButtonText:"邀请",min_level:2}),"")},a.onExpandTxtClicked=function(e){e.stopPropagation(),a.setState({expand_txt:null,line_clamp:0})},a.goToSendFeed=function(){var e=a.context,t=e.req,n=e.auth_info;if(n.u>0){var i=t.query.from?t.query.from:"",r=t.query.fr?t.query.fr:"";if((0,K.pingback)("topic","add_feed","",{u:n.u,from:i}),window.MaiMai_Native.native_publish||window.MaiMai_Native.native_add_topic){var l={target:"topic_add_feed",title:"参与问答",max_limit:5e3,right_button_text:"发布",text_holder:"说上几句吧...",extra_infomation:JSON.stringify({hash:w.default.generateFeedHash(),operation_topic:t.query.id,article_url:window.location.href,tags:t.query.query,from:i,fr:r})};return void(window.MaiMai_Native.native_add_topic?(l.ui_tag=16,window.MaiMai_Native.native_add_topic(JSON.stringify(l))):window.MaiMai_Native.native_publish(JSON.stringify(l)))}(0,_.default)("/article/pub_feed_pc?"+m.default.stringify({tags:t.query.query,id:t.query.id,article_url:window.location.href}),"参与问答")}else(0,E.launch_webview)()},a.follow=function(){var e=a.context,t=e.auth_info,n=e.fconf;if(t.u<0)return void(0,E.launch_webview)();var i=a.props.sub.me?0:1,r=o({sub:i,topic_id:a.props.topicid},t),l=n.online_url+"feed/v3/sub_topic?"+m.default.stringify(r),c=fetch(l,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){a.props.cursor.select("sub","me").set(i),a.props.cursor.select("sub","n").set(a.props.sub.n+(0==i?-1:1))}).catch(b.toast_error_handler);(0,N.default)("设置中...",c)},a.share=function(){if(a.context.auth_info.u<0)return void(0,E.launch_webview)();MaiMai_Native.native_share(1)},a.pub_topic=function(){var e=a.context,t=e.req,n=e.auth_info,i=t.query.fr?t.query.fr:"";n.u>0?window.MaiMai_Native.native_publish_topic?window.MaiMai_Native.native_publish_topic(JSON.stringify({target:"pub_topic",title:"发起问答",right_button_text:"确定",header_holder:"请输入问答，8～30字",header_min_limit_tips:"问答标题应在8~30字之间",header_max_limit_tips:"问答标题应在8~30字之间",header_min_limit:8,header_max_limit:30,text_holder:"请输入问答详情（选填）\n\n可以是\n1.自己的观点\n2.对问答的进一步说明",max_limit:500,max_limit_tips:"问答详情不能多于500字",ui_tag:44,extra_infomation:JSON.stringify({fr:i})})):(0,y.default)("/article/pub_topic_detail","发起问答",{}):(0,E.launch_webview)()},a.state={expand_txt:null,line_clamp:7},a}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;window.deleteTopic=this.deleteTopic,window.closeTopic=this.closeTopic,window.native_image_data=R.default;var t=this.context,a=t.req,n=t.auth_info,i=(t.fconf,this.props),r=i.cursor,l=i.author_card;(0,B.bindBroadcast)("pub_feed",this.reloadData),(0,B.bindBroadcast)("native_publish_success",this.native_publish_success);var c="/sdk/article/topic?"+m.default.stringify(o({id:a.query.id},n));fetch(c,{credentials:"same-origin"}).then(b.parse_online_json).then(function(e){r.merge(e.data)}).catch(b.toast_error_handler);var s=document.location.href.replace("&from_page=pub_topic","");r.select("share_url").set(s),"pub_topic"==a.query.from_page&&l&&n.u==l.mmid&&(window.history.replaceState({},document.title,s),setTimeout(function(){(0,F.showModalForConfirm)({title:"问答发布成功,分享给好友,一起来讨论吧",ok_text:"确定",ok:function(){e.share()},cancel_text:"取消"})},1e3)),this.checkExpandTxt()}},{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var a=this.props,n=a.tag_datas,i=a.feeds_count,r=a.author_card,l=r?r.avatar:"https://maimai.cn/static/images/mailogo.jpg",o={title:n.title,desc:"共"+i+"条回答",link:window.location.href,imgUrl:l,success:function(){},cancel:function(){}};t.wx_sdk.onMenuShareAppMessage(o),t.wx_sdk.onMenuShareTimeline(o),t.wx_sdk.onMenuShareQQ(o),t.wx_sdk.onMenuShareQZone(o)}}},{key:"checkExpandTxt",value:function(){this.props.tag_datas.text&&this.refs.txt&&this.refs.txt.isTextOverflow()&&this.setState({expand_txt:"展开"})}},{key:"getCoordinates",value:function(e){return J.default.findDOMNode(e).getBoundingClientRect().height}},{key:"componentWillUnmount",value:function(){(0,B.unbindBroadcast)("pub_feed"),(0,B.unbindBroadcast)("native_publish_success"),window.deleteTopic=null,window.closeTopic=null}},{key:"renderDomainSkill",value:function(){var e=this.props.tag_datas.tags?this.props.tag_datas.tags:"";return e.length>0?(e=e.split(","),u.default.createElement("div",{className:"article_domain_skill_wrap"},u.default.createElement("div",{className:"article_domain_skills"},e.map(function(e){return u.default.createElement("span",{className:"article_domain_skill"},e)})))):void 0}},{key:"renderTitle",value:function(){var e=this.props,t=e.tag_datas,a=e.feeds_count,n=e.cursor,i=e.author_card,r=e.feeds_active_count,l=this.context.auth_info,o="";a&&(o=" -"+a+"回答"),r&&(o+=(o.length>0?"，":" -")+r+"赞同");var c={share_info:{name:"问答",title:t.title+o,url:n.select("share_url").get(),desc:"共"+a+"条回答",card_id:this.props.topicid,icon_callback:'native_image_data("user_avatar")',card_type:4}},s=[];return s.push({title:"分享问答",callback:"MaiMai_Native.native_share(1)"}),i&&l.u==i.mmid&&s.push({title:"删除问答",callback:"deleteTopic()"}),s.push({title:"刷新此链接",callback:"MaiMai_Native.native_refresh()"}),s.push({title:"在浏览器中打开",callback:"MaiMai_Native.native_open_browser()"}),s.push({title:"关闭此链接",callback:"closeTopic()"}),c.more_items=s,u.default.createElement("div",null,u.default.createElement(f.default,{title:"问答"}),u.default.createElement(Q.default,{msg_to_app:c}))}},{key:"renderAuthorCard",value:function(){var e=this.props.author_card;if(e)return u.default.createElement("div",{className:"fl"},u.default.createElement("div",{className:"media-middle fl m-r-10"},u.default.createElement(j.default,{ref:"avatar",customClass:"avatar-24 radius-50",card:e,image_id:"user_avatar"})),u.default.createElement("span",{className:"text-muted media-middle",onClick:this.gotoDetail},e.name))}},{key:"renderExpandTxt",value:function(){var e=this.state.expand_txt;if(e)return u.default.createElement("div",{className:"liveReply m-t-10 text-primary font-16",onClick:this.onExpandTxtClicked},e)}},{key:"renderFollowCard",value:function(){var e=this.context,t=(e.env,e.auth_info,this.props.tag_datas),a="clearfix fr text-gray-7d";return 1!=t.status&&(a+=" borderBottom"),u.default.createElement("div",{className:a},u.default.createElement("span",{className:"p-r-20 after-circular"},this.props.feeds_count,"个回答"),u.default.createElement("span",{className:"p-r-20 after-circular"},this.props.feeds_active_count,"个赞"),u.default.createElement("span",{className:this.props.sub.me?"":"topicFocusBgC",onClick:this.follow},this.props.sub.me?"取消关注":"关注"))}},{key:"renderActionCard",value:function(){var e=this.context.auth_info,t=this.props.tag_datas;if(!(e.u<0||1!=t.status))return u.default.createElement("div",{className:"p-x-20 p-y-5 border-top-e1e9ec"},u.default.createElement("div",{className:"media-table w-100 text-center font-16"},u.default.createElement("div",{className:"media-left halfWidth media-middle border-right-e0",onClick:this.inviteFriends},u.default.createElement("div",{className:"w-100 p-y-10 text-gray-787D97"},u.default.createElement("span",{className:"media-middle topicInviteIconC"}),u.default.createElement("span",null,"邀请回答"))),u.default.createElement("div",{className:"media-right halfWidth media-middle",onClick:this.goToSendFeed},u.default.createElement("div",{className:"text-blue w-100 p-y-10"},u.default.createElement("span",{className:"media-middle topicJoinIconC"}),u.default.createElement("span",null,"添加回答")))))}},{key:"renderRelatedArticle",value:function(){if(this.props.articleid){var e=this.props,t=e.article_title,a=e.articleid,n=function(){(0,y.default)("/article/detail?fid="+a+"&from=topic",t,"fetch")};return u.default.createElement("div",{className:"p-x-20 m-t m-b-20"},u.default.createElement("div",{className:"text-muted"},u.default.createElement("span",{className:"group_article_icon m-r-5"}),"相关文章"),u.default.createElement("div",{className:"lineClamp2"},u.default.createElement("span",{className:"d-i-b text-primary",onClick:n},t)))}}},{key:"render",value:function(){var e=this.props,t=e.tag_datas,a=e.tags,n=e.white_list,i=e.topic_imgs,r=this.context,l=(r.fconf,r.env),o=this.state.line_clamp;return u.default.createElement("div",null,this.renderDomainSkill(),this.renderTitle(),u.default.createElement("div",{className:"text-black-3 "+(t.tags?"":"p-t-30")},l.from_pc&&n.cnt>0&&u.default.createElement("div",{className:"pull-right p-r-10"},u.default.createElement("div",{className:"btn btn-block btn-blue-outline btn-small",onClick:this.pub_topic},"+发起问答")),u.default.createElement("div",{className:"tagsContainer"},a.map(function(e){return u.default.createElement(P.default,{tag:e})})),u.default.createElement("p",{className:"p-x-20 font-22 m-b-10 l-h-30 font-bold"},t.title),t.text&&u.default.createElement("div",{className:"p-x-20 m-b"},u.default.createElement("div",{className:"font-16 text-gray-7d l-h-26",style:o>0?(0,U.textOverflow)(o):null},u.default.createElement(q.default,{ref:"txt",text:t.text,support_dref:!0})),this.renderExpandTxt()),i&&i.length>0&&u.default.createElement("div",{className:"m-b p-x-20 headerC_topic_img"},u.default.createElement(C.default,{images:i})),this.renderRelatedArticle(),u.default.createElement("div",{className:"clearfix p-x-20 m-t-13 m-b-20"},this.renderAuthorCard(),this.renderFollowCard()),this.renderActionCard()))}}]),t}(u.default.Component);z.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object,wx_sdk:u.default.PropTypes.object},e.exports=z},1422:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),d=a(15),f=n(d),p=a(981),m=n(p),h=a(76),_=n(h),v=a(75),y=n(v),b=a(115),g=a(114),x=n(g),w=a(113),E=a(167),k=a(1005),N=a(998),T=n(N),j=a(983),M=n(j),C=a(46),O=n(C),P=a(50),S=n(P),q=a(47),B=n(q),F=a(276),D=n(F),I=function(e){function t(){var e,a,n,l;i(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.onSendTxtTopic=function(e){var t=n.context,a=t.fconf,i=t.auth_info,r=a.online_url+"feed/v3/add?"+f.default.stringify(o({text:e},i)),l=fetch(r,{credentials:"same-origin"}).then(y.default.parse_online_json).then(function(e){n.reloadData(e.feed),(0,k.clearInput)(n.getInputCacheKey())}).catch(feed_utils.toast_error_handler);(0,x.default)("设置中...",l)},n.getInputCacheKey=function(){return"topic_"+n.context.req.query.id},n.reloadData=function(e){try{var t={fid:e.id,feed:{id:e.id,uid:e.main.u.id,text:e.main.text,crtime_string:e.crtime,likes:0,pics:e.main.pics,type:e.ftype},contact:e.main.u,me_like:!1};n.props.cursor.select("feeds").unshift(t)}catch(e){(0,v.toast_error_handler)(e)}n.props.cursor.select("feeds_count").set(n.props.feeds_count+1)},n.native_publish_success=function(e){var t=JSON.parse(e).publish_return_data;"pub_topic"!=t.target&&n.reloadData(t.feed)},n.topic_all=function(){var e=n.context,t=e.req,a=(e.auth_info,n.props.feeds);(0,O.default)("/article/topic_all?"+f.default.stringify({id:t.query.id,start:a.length}),"更多回答","fetch")},n.deleteTopic=function(){var e=n.context,t=e.fconf,a=e.auth_info,i=n.props,r=i.topicid,l=i.feeds;if(l&&l.length>0)return void(0,_.default)("已经有人参与了问答，无法删除");if(1==confirm("确认删除此问答?")){var c=t.online_url+"feed/v3/del_topic?"+f.default.stringify(o({topic_id:r},a));fetch(c).then(y.default.parse_online_json).then(function(){window.MaiMai_Native.close_native?window.MaiMai_Native.close_native(null,!0):(0,_.default)("问答删除成功")}).catch(y.default.toast_error_handler)}},n.closeTopic=function(){MaiMai_Native.close_native(null,!0)},n.gotoDetail=function(e){n.refs.avatar.gotoDetail(e)},n.follow=function(){var e=n.context,t=e.auth_info,a=e.fconf;if(t.u<0)return void(0,b.launch_webview)();var i=n.props.sub.me?0:1,r=o({sub:i,topic_id:n.props.topicid},t),l=a.online_url+"feed/v3/sub_topic?"+f.default.stringify(r),c=fetch(l,{credentials:"same-origin"}).then(v.parse_online_json).then(function(e){n.props.cursor.select("sub","me").set(i),n.props.cursor.select("sub","n").set(n.props.sub.n+(0==i?-1:1))}).catch(v.toast_error_handler);(0,x.default)("设置中...",c)},n.share=function(){if(n.context.auth_info.u<0)return void(0,b.launch_webview)();MaiMai_Native.native_share(1)},n.sendId=function(){var e=n.context,t=e.auth_info,a=e.fconf,i=a.online_url+"feed/v3/request_activity?"+f.default.stringify(o({activity_id:1},t));fetch(i,{credentials:"same-origin"}).then(v.parse_online_json).then(function(e){"ok"==e.result?(0,_.default)("感谢您的参与，脉脉小助手将于三日内与你联系。"):(0,_.default)(e.error_msg)}).catch(v.toast_error_handler)},n.pubExp=function(){var e=n.context.auth_info;D.default.lt(e.version,"4.17.38")?(0,E.showModalForConfirm)({title:"请先升级客户端",ok_text:"知道了"}):(0,S.default)("/article/pub_exp?fr=topic","发布公司体验")},l=a,r(n,l)}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;window.deleteTopic=this.deleteTopic,window.closeTopic=this.closeTopic,window.native_image_data=T.default;var t=this.context,a=t.req,n=t.auth_info,i=(t.fconf,this.props),r=i.cursor,l=i.author_card;(0,w.bindBroadcast)("pub_feed",this.reloadData),(0,w.bindBroadcast)("native_publish_success",this.native_publish_success);var c="/sdk/article/topic?"+f.default.stringify(o({id:a.query.id},n));fetch(c,{credentials:"same-origin"}).then(v.parse_online_json).then(function(e){r.merge(e.data)}).catch(v.toast_error_handler);var s=document.location.href.replace("&from_page=pub_topic","");r.select("share_url").set(s),"pub_topic"==a.query.from_page&&l&&n.u==l.mmid&&(window.history.replaceState({},document.title,s),setTimeout(function(){(0,E.showModalForConfirm)({title:"问答发布成功,分享给好友,一起来讨论吧",ok_text:"确定",ok:function(){e.share()},cancel_text:"取消"})},1e3)),this.checkExpandTxt()}},{key:"componentWillReceiveProps",value:function(e,t){if(!this.props.wx_sdk_inited&&e.wx_sdk_inited){var a=this.props,n=a.tag_datas,i=a.feeds_count,r=a.author_card,l=r?r.avatar:"https://maimai.cn/static/images/mailogo.jpg",o={title:n.title,desc:"共"+i+"条回答",link:window.location.href,imgUrl:l,success:function(){},cancel:function(){}};t.wx_sdk.onMenuShareAppMessage(o),t.wx_sdk.onMenuShareTimeline(o),t.wx_sdk.onMenuShareQQ(o),t.wx_sdk.onMenuShareQZone(o)}}},{key:"checkExpandTxt",value:function(){this.props.tag_datas.text&&this.refs.txt&&this.refs.txt.isTextOverflow()&&this.setState({expand_txt:"展开"})}},{key:"getCoordinates",value:function(e){return B.default.findDOMNode(e).getBoundingClientRect().height}},{key:"componentWillUnmount",value:function(){(0,w.unbindBroadcast)("pub_feed"),(0,w.unbindBroadcast)("native_publish_success"),window.deleteTopic=null,window.closeTopic=null}},{key:"renderDomainSkill",value:function(){var e=this.props.tag_datas.tags?this.props.tag_datas.tags:"";return e.length>0?(e=e.split(","),u.default.createElement("div",{className:"article_domain_skill_wrap"},u.default.createElement("div",{className:"article_domain_skills"},e.map(function(e){return u.default.createElement("span",{className:"article_domain_skill"},e)})))):void 0}},{key:"renderTitle",value:function(){var e=this.props,t=e.tag_datas,a=e.feeds_count,n=e.cursor,i=e.author_card,r=e.feeds_active_count,l=this.context.auth_info,o="";a&&(o=" -"+a+"回答"),r&&(o+=(o.length>0?"，":" -")+r+"赞同");var c={share_info:{name:"问答",title:t.title+o,url:n.select("share_url").get(),desc:"共"+a+"条回答",card_id:this.props.topicid,icon_callback:'native_image_data("user_avatar")',card_type:4}},s=[];return s.push({title:"分享问答",callback:"MaiMai_Native.native_share(1)"}),i&&l.u==i.mmid&&s.push({title:"删除问答",callback:"deleteTopic()"}),s.push({title:"刷新此链接",callback:"MaiMai_Native.native_refresh()"}),s.push({title:"在浏览器中打开",callback:"MaiMai_Native.native_open_browser()"}),s.push({title:"关闭此链接",callback:"closeTopic()"}),c.more_items=s,u.default.createElement("div",null,u.default.createElement(m.default,{title:c.share_info.title}),u.default.createElement(M.default,{msg_to_app:c}))}},{key:"renderFollowCardWhite",value:function(){var e=this.context,t=e.env,a=e.auth_info,n=this.props.tag_datas,i="p-x-20 media-table w-100 clearfix";return 1!=n.status&&(i+=" borderBottom"),u.default.createElement("div",{className:i},u.default.createElement("div",{className:"text-white-fff media-left media-middle  w-60 p-r-0"},u.default.createElement("span",{className:"p-r"},this.props.feeds_count,"个回答"),u.default.createElement("span",null,this.props.feeds_active_count,"个赞同")),u.default.createElement("div",{className:"text-white-fff media-right clearfix w-40  p-l-0",style:{visibility:a.u>0?"visible":"hidden"}},u.default.createElement("div",{className:"fr topicFocus text-right"},u.default.createElement("span",{className:this.props.sub.me?"":"topicFocusWhite",onClick:this.follow},this.props.sub.me?"取消关注":"关注")),!t.from_pc&&u.default.createElement("div",{className:"fr p-r-10"},u.default.createElement("span",{className:"topicShareWhite",onClick:this.share},"分享"))))}},{key:"renderActionCardWhite",value:function(){var e=this.context.auth_info,t=this.props.tag_datas,a=JSON.parse(t.render_info);if(!(e.u<0||1!=t.status))return u.default.createElement("div",{className:"p-x-20"},u.default.createElement("div",{className:"clearfix w-100 text-center m-t-20"},u.default.createElement("div",{className:"fl halfWidth media-middle h-25"},u.default.createElement("img",{src:a.icon,className:"mx-w-100",style:{width:"168px"}})),D.default.lt(e.version,"4.17.38")&&u.default.createElement("div",{className:"fr p-l-0 halfWidth media-middle text-right",onClick:this.sendId},u.default.createElement("div",{className:"btn btn-radius-26 btn-white p-y-3 p-x-17"},u.default.createElement("span",{className:"text-white-fff font-16"},"申请参与")))))}},{key:"render",value:function(){var e=this.props,t=e.tag_datas,a=e.from_pc,n=e.in_app,i=JSON.parse(t.render_info);return u.default.createElement("div",null,this.renderDomainSkill(),this.renderTitle(),u.default.createElement("div",{className:"company_experience w-100",style:{backgroundImage:"url('"+i.background+"')"}},u.default.createElement("div",{className:"text-center p-t-90 m-b-25 font-18 text-white-fff"},t.title),this.renderFollowCardWhite(),this.renderActionCardWhite()),!a&&n&&u.default.createElement("div",{className:"edit_btn_bg"},u.default.createElement("a",{href:"javascript:;",className:"edit_btn",onClick:this.pubExp},"写公司体验，赢脉脉会员")))}}]),t}(u.default.Component);I.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object},e.exports=I},1423:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1),u=n(s),d=a(15),f=n(d),p=a(75),m=n(p),h=a(1092),_=n(h),v=a(1008),y=n(v),b=a(986),g=n(b),x=a(46),w=n(x),E=a(290),k=n(E),N=a(1093),T=n(N),j=a(1017),M=n(j),C=a(1056),O=n(C),P=a(115),S=function(e){function t(){var e,a,n,l;i(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=n=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.more_topic=function(){var e=n.context.req;(0,w.default)("/article/topic_relative?"+f.default.stringify({id:e.query.id}),"更多话题","fetch")},n.article_all=function(){var e=n.context.req;(0,w.default)("/article/topic_article_relative?"+f.default.stringify({id:e.query.id}),"更多专栏","fetch")},n.topic_more=function(){var e=n.context,t=e.req,a=e.auth_info,i=n.props,r=i.cursor,l=i.feeds;r.select("content_status").set("loading");var c="/sdk/article/topic_more?"+f.default.stringify(o({id:t.query.id,start:l.length,count:40},a));fetch(c,{credentials:"same-origin"}).then(m.default.parse_online_json).then(function(e){r.select("feeds").concat(e.feeds),r.select("more").set(e.more),r.select("content_status").set(null)}).catch(function(e){r.select("content_status").set(null),m.default.toast_error_handler(e)})},l=a,r(n,l)}return l(t,e),c(t,[{key:"renderContent",value:function(){var e=this,t=this.props,a=t.feeds,n=t.content_status,i=t.feeds_count,r=t.more,l=1==r&&i>a.length&&!n,o="loading"==n;return u.default.createElement("div",null,i>0&&u.default.createElement("div",{className:"font-16 p-t-20 p-x-20"},"全部",i,"条观点"),u.default.createElement("ul",{key:"content-2",className:"list-group p-x-20 m-b-0"},a.map(function(t,a){var n=null;return e.props.author_card&&t.spread_feed&&(n=t.spread_feed,n.contact=e.props.author_card),u.default.createElement(_.default,{key:t.fid,feed:t,reply:n,author_card:e.props.author_card,cursor:e.props.cursor.select("feeds",a)},u.default.createElement(y.default,{images:t.feed.pics,max_count:3,type_multi:!0}))}),l&&u.default.createElement(g.default,{onClick:this.topic_more},u.default.createElement("span",null,"更多观点"),u.default.createElement("span",{className:"more_down_icon p-relative",style:{marginLeft:5}})),o&&u.default.createElement("div",{dangerouslySetInnerHTML:{__html:(0,k.default)()}})))}},{key:"renderRelateArticle",value:function(){var e=this.props.re_articles;if(e&&e.articles.length>0)return[u.default.createElement("div",{key:"relete-3",className:"panel-heading p-x-20"},u.default.createElement("span",null," "),u.default.createElement("span",{className:"text-muted pull-left"},"相关专栏")),u.default.createElement("ul",{key:"relete-4",className:"list-group"},e.articles.map(function(e){return u.default.createElement(T.default,{key:e.id,feed:e})}),e.more>0&&u.default.createElement(g.default,{title:"更多专栏 >>",onClick:this.article_all}))]}},{key:"renderRelateTopic",value:function(){if(this.props.re&&this.props.re.length>0)return[u.default.createElement("div",{key:"relete-1",className:"panel-heading p-x-20"},u.default.createElement("span",null," "),u.default.createElement("span",{className:"text-muted pull-left"},"相关话题")),u.default.createElement("ul",{key:"relete-2",className:"list-group"},this.props.re.map(function(e){return u.default.createElement(M.default,{key:e.id,topic:e})}),u.default.createElement(g.default,{title:"更多话题 >>",onClick:this.more_topic}))]}},{key:"renderHotTopic",value:function(){if(this.props.hot&&this.props.hot.length>0)return[u.default.createElement("div",{key:"hot-1",className:"panel-heading p-x"},u.default.createElement("span",null," "),u.default.createElement("span",{className:"text-muted pull-left"},"热门话题")),u.default.createElement("ul",{key:"hot-2",className:"list-group"},this.props.hot.map(function(e){return u.default.createElement(M.default,{key:e.id,topic:e,hideTag:!0})}),u.default.createElement(g.default,{title:"更多热门话题 >>",onClick:function(){return(0,P.launch_webview)()}}))]}},{key:"renderHotArticle",value:function(){var e=this.context.auth_info;if(this.props.hot_article&&this.props.hot_article.length>0)return[u.default.createElement("div",{key:"relete-article",className:"panel-heading p-x"},u.default.createElement("span",null," "),u.default.createElement("span",{className:"text-muted pull-left"},"推荐头条")),u.default.createElement("ul",{key:"relete-article-u",className:"list-group"},this.props.hot_article.map(function(e){return u.default.createElement(O.default,{key:e.fid,feed:e,xSpace:20})}),e.u>0&&u.default.createElement(g.default,{title:"更多行业头条 >>",onClick:function(){return(0,w.default)("/article/headline?fr=topic","行业头条","fetch")}}))]}},{key:"render",value:function(){var e=this.context,t=e.auth_info;e.fconf;return u.default.createElement("div",null,this.renderContent(),this.renderRelateArticle(),this.renderRelateTopic(),t.u<0&&this.renderHotTopic(),this.renderHotArticle())}}]),t}(u.default.Component);S.contextTypes={auth_info:u.default.PropTypes.object,req:u.default.PropTypes.object,fconf:u.default.PropTypes.object,env:u.default.PropTypes.object,wx_sdk:u.default.PropTypes.object},e.exports=S},295:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,c,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(1),d=n(u),f=a(981),p=(n(f),a(15)),m=n(p),h=a(983),_=(n(h),a(1082)),v=n(_),y=a(1419),b=n(y),g=a(1420),x=(n(g),a(1421)),w=n(x),E=a(1422),k=n(E),N=a(1423),T=n(N),j=a(1138),M=n(j);t.default=e.exports=(c=o=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"renderBottomBar",value:function(){var e=this.context,t=e.auth_info,a=e.env,n=e.req,i=this.props,r=i.author_card,l=i.cshow_url,o=l?l+"&":"http://maimai.cn/show2?";if(o+=m.default.stringify({regfr:n.query.regfr||"topic_btm"}),-1==t.u&&a.mobile&&r)return d.default.createElement(v.default,{avatar:r.avatar,cshow_url:l,reg_url:o})}},{key:"renderTopicBanner",value:function(){var e=this.context.auth_info,t=this.props.banner;if(!(e.u>0)&&t&&0!=t.length)return d.default.createElement(b.default,{topics:this.props.banner,topicid:this.props.topicid})}},{key:"renderHeaderTemplate",value:function(){this.context.auth_info.u;return this.props.tag_datas.render_info?d.default.createElement(k.default,this.props):d.default.createElement(w.default,this.props)}},{key:"renderContentTemplate",value:function(){return this.context.auth_info.u%2==0?d.default.createElement(M.default,this.props):d.default.createElement(T.default,this.props)}},{key:"render",value:function(){var e=this.context,t=(e.auth_info,e.fconf,this.context.auth_info.u%2);return d.default.createElement("div",null,this.renderTopicBanner(),d.default.createElement("div",{className:"l-h-22"},d.default.createElement("div",null,this.renderHeaderTemplate()),d.default.createElement("div",{className:"gray-bg-f2",style:t?{height:4}:{height:0}}),d.default.createElement("div",{className:"panel panel-default"},d.default.createElement(M.default,this.props)),this.renderBottomBar()))}}]),t}(d.default.Component),o.hideHeader=!0,o.contextTypes={req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,auth_info:d.default.PropTypes.object,env:d.default.PropTypes.object,wx_sdk:d.default.PropTypes.object},c)}});