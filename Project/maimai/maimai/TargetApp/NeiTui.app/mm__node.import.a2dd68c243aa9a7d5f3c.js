webpackJsonp([287],{949:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),u=a(1),f=i(u),_=a(981),m=i(_),p=a(274),g=i(p),v=a(17),h=i(v),b=a(1207),N=i(b),w=a(278),y=i(w),E=a(282),x=a(113),M=i(x),T=a(170),O=i(T),S=a(115),j=a(50),k=i(j),C=(o=r=function(e){function t(){var e,a,i,s;n(this,t);for(var r=arguments.length,o=Array(r),d=0;d<r;d++)o[d]=arguments[d];return a=i=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),i.shareCb=function(e){var t=i.context,a=t.auth_info,n=t.fconf;if(0==e){var l=n.online_url+"ge/v1/egg_pingback?"+N.default.stringify(c({egg_id:i.props.today_egg.id,action:"share_succ"},a));fetch(l,{credentials:"same-origin"})}},i.onShareClicked=h.default.debounce(function(){var e=i.props,t=e.card,a=e.title,n=e.today_egg,l=i.context,s=l.fconf,r=l.req,o=l.auth_info,d=s.online_url+"ge/v1/egg_pingback?"+N.default.stringify(c({egg_id:i.props.today_egg.id,action:"share"},o));if(fetch(d,{credentials:"same-origin"}),window.MaiMai_Native.native_share_v2){var u="我已经在脉脉坚持学习“"+a+"”"+n.seq_id+"天，越有层级的人越会坚持学习，快来跟我一起进步吧。",f=s.web_url+"article/course_share?"+N.default.stringify({u2:t.encode_mmid,egg_id:n.id,hidx:r.query.hidx});window.MaiMai_Native.native_share_v2(3,JSON.stringify({icon_url:t.avatar,title:u,url:f}))}},500,!0),i.goToSendFeed=h.default.debounce(function(){var e=i.context.auth_info,t=i.props.topic_id;if(e.u>0){if(window.MaiMai_Native.native_publish||window.MaiMai_Native.native_add_topic){var a={target:"topic_add_feed",title:"参与讨论",max_limit:5e3,right_button_text:"发布",text_holder:"说上几句吧...",extra_infomation:JSON.stringify({hash:O.default.generateFeedHash(),operation_topic:t,article_url:window.location.href})};return void(window.MaiMai_Native.native_add_topic?(a.ui_tag=16,window.MaiMai_Native.native_add_topic(JSON.stringify(a))):window.MaiMai_Native.native_publish(JSON.stringify(a)))}(0,k.default)("/article/pub_feed_pc?"+N.default.stringify({id:t,article_url:window.location.href}),"参与讨论")}else(0,S.launch_webview)()}),s=a,l(i,s)}return s(t,e),d(t,[{key:"componentWillMount",value:function(){(0,E.localeZh)(y.default)}},{key:"componentDidMount",value:function(){g.default.isSupportTansShowTitleMenuBar(this.context)&&g.default.setMenuBarStyle({banner_trans:!0,hideTitle:1}),M.default.sendWebViewBroadcast("course_sign_suc",{sign:!0,sign_date:this.props.sign_info.sign_last_date}),M.default.bindBroadcast("shareToWeixinCircle",this.shareCb),M.default.bindBroadcast("native_publish_success",function(){window.MaiMai_Native.close_native(null,!0)})}},{key:"componentWillUnmount",value:function(){M.default.sendWebViewBroadcast("course_sign_suc")}},{key:"render",value:function(){var e=g.default.isSupportTansShowTitleMenuBar(this.context)?122:65,t=this.props,a=t.card,i=t.today_egg,n=t.sign_info,l=t.img_head,s=t.title,r=(0,y.default)(n.sign_last_date);return f.default.createElement("div",{className:"course_sign_bg"},f.default.createElement(m.default,{title:"课程签到"}),f.default.createElement("div",{className:"p-relative",style:{paddingTop:e}},f.default.createElement("div",{className:"course_sign_bg_img"},f.default.createElement("img",{className:"mw-100",src:"/static/images/course/course_sign_bg.png"})),f.default.createElement("div",{className:"course_sign_wrapper"},f.default.createElement("div",{className:"course_sign_con"},f.default.createElement("div",{className:"course_sign_user"},f.default.createElement("div",{className:"font-0 avatar-70 m-x-auto m-b-7"},f.default.createElement("img",{className:"radius-50 avatar-70",src:a.avatar})),f.default.createElement("div",{className:"font-17 p-x lineClamp1"},a.name),f.default.createElement("div",{className:"font-14 text-info p-x lineClamp1"},a.company+a.position),f.default.createElement("div",{className:"course_sign_time"},r.format("dddd")," ",r.format("YYYY.MM.DD"))),f.default.createElement("div",{className:"course_sign_info"},f.default.createElement("div",{className:"fl halfWidth"},f.default.createElement("div",{className:"font-35 text-orange-ffab20 font-bold m-b-10"},n.sign_total),f.default.createElement("div",{className:"font-12"},"坚持签到")),f.default.createElement("div",{className:"fl halfWidth"},f.default.createElement("div",{className:"font-35 text-orange-ffab20 font-bold m-b-10"},n.sign_max),f.default.createElement("div",{className:"font-12"},"连续签到"))),f.default.createElement("div",{className:"course_sign_line"},f.default.createElement("div",{className:"course_sign_text"},"今日课程")),f.default.createElement("div",{className:"course_sign_item"},f.default.createElement("div",{className:"media-left"},f.default.createElement("div",{className:"course_sign_item_img"},f.default.createElement("img",{className:"w-100 mw-100",src:l}))),f.default.createElement("div",{className:"media-body"},f.default.createElement("div",{className:"font-16 font-bold m-b-5"},s),f.default.createElement("div",{className:"lineClamp2 m-b-5"},i.title),f.default.createElement("div",{className:"font-12 text-info"},"Day ",i.seq_id))))),this.context.auth_info.u>0?f.default.createElement("div",{className:"m-t-13 course_share_warp"},f.default.createElement("div",{className:"font-20 text-white l-h-28 m-b-10"},"说点什么"),f.default.createElement("div",{className:"something_topic",onClick:this.goToSendFeed},"记录下这堂课的感受，优秀评论可提升知名度"),f.default.createElement("div",{className:"clearfix p-b-20"},f.default.createElement("div",{className:"course_sign_discuss_btn fl",onClick:this.goToSendFeed},"参与讨论"),f.default.createElement("div",{onClick:this.onShareClicked,className:"fr course_sign_share_btn"}))):f.default.createElement("div",{className:"course_sign_ewm"},f.default.createElement("img",{className:"mw-100",src:"/static/images/course/course_sign_ewm.png"}))))}}]),t}(f.default.Component),r.contextTypes={req:f.default.PropTypes.object,fconf:f.default.PropTypes.object,env:f.default.PropTypes.object,auth_info:f.default.PropTypes.object,wx_sdk:f.default.PropTypes.object},o);t.default=e.exports=C}});