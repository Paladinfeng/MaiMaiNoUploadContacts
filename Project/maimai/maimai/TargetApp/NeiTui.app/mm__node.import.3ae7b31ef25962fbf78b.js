webpackJsonp([175],{891:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i,c,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=n(1),s=o(f),d=n(75),p=n(15),h=o(p),y=n(273),m=o(y),v=n(165),b=o(v),_=n(981),g=(n(50),n(46)),j=n(982),E=(n(63),n(990)),P=(n(17),n(116));t.default=e.exports=(c=i=function(e){function t(){var e,n,o,l;r(this,t);for(var i=arguments.length,c=Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.loadMore=function(e){var t=o.context,n=(t.fconf,t.req,t.auth_info,o.props),r=n.cursor,a=(n.searchTokens,o.refs.loader);a&&a.bindRequest(function(){var e=20*o.nextPage,t="/service/srvlist_d1?"+h.default.stringify({limit:20,offset:e,jsononly:1});return fetch(t,{credentials:"same-origin"}).then(d.parse_online_json).then(function(e){r.select("services").concat(e.data.services),r.select("more").set(e.data.more),o.nextPage++})})},o.openDetail=function(e){g("/service/detail?id="+e,"服务详情","fetch")},l=n,a(o,l)}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.nextPage=1}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.services,o=t.more,r=t.cursor,a=this.context;a.req,a.auth_info;return void 0===n?s.default.createElement("div",null):this.props.loading||this.props.failed?s.default.createElement(b.default,{ref:"loading",reload:this.onReload,failed:this.props.failed}):0==n.length?s.default.createElement("div",{style:E.empty},"好友暂无服务。"):s.default.createElement("div",null,s.default.createElement(_,{title:"好友的服务"}),s.default.createElement(j,{loadMore:function(){e.loadMore(1)},hasMore:1==o,loader:s.default.createElement(b.default,{ref:"loader",reload:function(){e.loadMore(2)},cursor:r.select("loading_status")})},s.default.createElement("div",{className:"panel panel-default"},s.default.createElement("ul",{className:"list-group"},n.map(function(t,n){var o=P.getCareer(t.contact,""),r=t.price_desc+"    "+t.paynum+"人购买",a="发布人："+t.contact.name+(o?" | "+o:"");return s.default.createElement(m.default,{key:t._id,avatar:t.contact.avatar,line1:t.title,line2:r,line3:a,judge3:t.contact.judge,clickHandler:function(){e.openDetail(t._id)}})})))))}}]),t}(s.default.Component),i.contextTypes={req:s.default.PropTypes.object,fconf:s.default.PropTypes.object,auth_info:s.default.PropTypes.object},c)}});