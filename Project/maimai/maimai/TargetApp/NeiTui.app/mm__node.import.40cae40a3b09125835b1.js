webpackJsonp([198],{700:function(e,t,a){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=(a(17),a(15)),i=a(50),r=a(76),o=a(75),l=a(114),c=a(1),p=a(981),u=a(166),h=c.createClass({displayName:"App",contextTypes:{auth_info:c.PropTypes.object,req:c.PropTypes.object},open:function(e){this.context.auth_info.u>0?this.open_inapp(e):this.open_outapp(e)},open_outapp:function(e){var t=this.props,a=t.status,s=t.cursor,i=t.detail,r=this.context.auth_info._csrf,l=this.context.req.query.tk;if(1==a.status){var c="bd_cm_go?"+n.stringify({orderid:i.id,_csrf:r,tk:l});fetch(c,{credentials:"same-origin"}).then(o.parse_online_json).then(function(e){alert("红包已到账，打开脉脉即可提现或消费。"),s.merge(e),location.href=i.button_url}).catch(o.alert_error_handler)}else location.href=i.button_url},open_inapp:function(e){var t=this.props,a=t.status,c=t.cursor,p=t.detail,u=t.canshare,h=this.context.auth_info;if(1==a.status){var m,d="bd_cm_go?"+n.stringify(s({orderid:p.id},h));MaiMai_Native.canOpenInMaiMaiContainer&&!MaiMai_Native.canOpenInMaiMaiContainer(p.button_url)&&(m=window.open());var _=fetch(d,{credentials:"same-origin"}).then(o.parse_online_json).then(function(e){r("已存入余额，可提现或消费",3e3),i(p.button_url,"",!1,m),c.merge(e),window.MaiMai_Native.native_share_v2&&p.sharenum&&location.replace(location.href+"&refresh=1")}).catch(o.toast_error_handler).catch(function(){m.close()});l("正在拆红包",_)}else 3==p.status&&(window.MaiMai_Native.native_share_v2&&u&&location.replace(location.href+"&refresh=1"),i(this.props.detail.button_url))},visit_history:function(e){i("./history?orderid="+this.props.detail.id,"红包详情")},render:function(){var e=m[this.props.status.status],t=e.msg,a=e.className,s=e.show_icon,n=this.context.auth_info;return c.createElement("div",{className:"text-center"},c.createElement(p,{title:n.u>0?"红包详情":"脉脉红包"}),c.createElement("img",{className:"img-responsive",src:"/static/images/envelopeTop.png"}),c.createElement("img",{className:"img-responsive center-block",style:d.redRadius,src:this.props.detail.logo}),c.createElement("div",{className:"container"},c.createElement("h4",null,this.props.detail.customer+"给"+this.props.detail.target+"的红包"),c.createElement("p",null,this.props.value>0&&c.createElement("span",{className:"display-1"},this.props.value),this.props.value>0&&"元"),c.createElement("p",{className:"center-block small"},s&&c.createElement("img",{style:d.small_icon,src:"/static/images/sad.png"}),t&&c.createElement("span",{className:a},t)),c.createElement("div",{style:d.btnAbsolute},c.createElement("p",null,c.createElement("button",{type:"button",className:"btn btn-warning btn-lg btn-block small",onClick:this.open},this.props.detail.button)))))}}),m={"-1":{msg:"您不能领取此红包",className:"text-muted"},0:{msg:"已存入余额，可消费或提现",className:"text-info"},1:{className:"text-muted"},2:{msg:"手慢了，该红包已过期",className:"text-muted",show_icon:!0}},d={redRadius:{marginTop:-60,zIndex:1,width:90,height:90,border:"2px solid #d52d2d",borderRadius:55},small_icon:{width:12,height:12,marginRight:2},btnAbsolute:{position:"absolute",left:"50%",bottom:30,marginLeft:-140,width:280}};e.exports=u(h)}});