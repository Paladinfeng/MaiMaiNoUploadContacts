webpackJsonp([86],{1440:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),l=n(i),u=r(50),f=n(u),d=function(e){function t(e){c(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.openMyMember=function(e){e&&e.stopPropagation(),(0,f.default)("/uh_memlist?tpl=show&fr=contact_member_ad","会员中心")},r}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.show_ad_contact,t=void 0,r=void 0;return 1==e&&(t="解锁搜索限制,可多得561w+人才",r="开通会员,立即获得人才提升招聘效率"),2==e&&(t="解锁搜索限制,可多得586w+客户线索",r="开通会员,立即联系客户提升成单率"),l.default.createElement("li",{className:"list-unstyled",onClick:this.openMyMember},l.default.createElement("div",{className:"p-x-10 p-y-10 media-middle"},l.default.createElement("div",{className:"media-left"},l.default.createElement("div",{className:"search_contact_avatar_wrap"},l.default.createElement("img",{className:"w-100 avatar-52 radius-50",src:"/static/images/search_ad_avatar.png"}),l.default.createElement("span",{className:"search_contact_lock_icon"}))),l.default.createElement("div",{className:"media-body media-middle"},l.default.createElement("div",{className:"font-15 m-b-5"},t),l.default.createElement("div",{className:"font-13 text-muted"},r)),l.default.createElement("div",{className:"media-right p-l-0 media-middle"},l.default.createElement("div",{className:"search_contact_lock_btn"},l.default.createElement("span",{className:"icon_lock_blue icon_lock_center"})))))}}]),t}(l.default.Component);t.default=e.exports=d},732:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,i,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),m=r(75),p=r(981),h=(n(p),r(15)),y=n(h),_=r(46),v=n(_),g=r(50),q=n(g),b=r(165),j=n(b),E=r(996),w=n(E),k=r(283),x=r(1021),C=n(x),P=r(1007),N=n(P),F=r(1020),O=n(F),M=r(1440),S=n(M),L=r(113),T=n(L),R=r(270),I=r(982),H=r(63),W=r(990),A=r(1009),J=r(17),B=r(164).getCache,D=r(164).putCache;r(76);t.default=e.exports=(i=s=function(e){function t(){var e,r,n,a;c(this,t);for(var s=arguments.length,i=Array(s),u=0;u<s;u++)i[u]=arguments[u];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={srch_member_tips_click:1},n.getChildContext=function(){return n.context.req.query.talent?l({from:"search_talent_search"},H.getChildContext(n)):H.getChildContext(n)},n.loadMore=function(){var e=n.context,t=(e.fconf,e.req),r=(e.auth_info,n.props),c=r.cursor,o=r.searchTokens,a=n.refs.loader;a&&a.bindRequest(function(){var e="/search/contacts?"+y.default.stringify({count:20,page:n.nextPage||1,query:n.query||t.query.query,dist:t.query.dist||0,cid:t.query.cid,company:t.query.company,forcomp:t.query.forcomp||"0",searchTokens:JSON.stringify(o),highlight:"true",school:t.query.school,profession:n.profession,major:n.major,province:n.province,city:n.city,me:t.query.me,jsononly:1,frm:t.query.frm||"webview#/search/contacts"});return fetch(e,{credentials:"same-origin"}).then(m.parse_online_json).then(function(e){c.select("contacts").concat(e.data.contacts),c.select("more").set(e.data.more),n.nextPage++})})},n.loadHotWords=function(){var e=n.props.cursor;return fetch("/search/hotwords",{credentials:"same-origin"}).then(m.parse_online_json).then(function(t){e.select("hotwords").set(t.hotwords),e.select("contacts").set(void 0)}).catch(function(t){e.select("hotwords").set(void 0)})},n.onReload=function(){n.query&&n.query.length>0&&n.searchContent(n.query)},n.searchContent=J.throttle(function(e){var t=this,r=this.props.cursor,n=this.context.req;if(!(e&&0!=e.length||this.province||this.city||this.profession||this.major))return r.merge({contacts:void 0,loading:null,hotwords:void 0}),this.loadHotWords();if(!this.query||this.query==e){r.select("locsFilter","close").set(!0),r.select("pfmjsFilter","close").set(!0),r.merge({loading:"loading",failed:!1,contacts:[],more:0});var c="/search/contacts?"+y.default.stringify({query:this.query,count:20,page:0,dist:n.query.dist||0,cid:n.query.cid,company:n.query.company,forcomp:n.query.forcomp||"0",school:n.query.school,profession:this.profession,major:this.major,province:this.province,city:this.city,me:n.query.me,highlight:"true",jsononly:1,frm:n.query.frm||"webview#/search/contacts"});return fetch(c,{credentials:"same-origin"}).then(m.parse_online_json).then(function(n){t.query==e&&r.merge(J.extend(n.data,{loading:null}))}).catch(function(n){t.query==e&&r.merge({failed:!0})})}},1e3),n.searchCallback=function(e){var t=JSON.parse(e);this.nextPage=1,this.query&&this.query==t.keyword||(this.query=t.keyword,0==t.keyword.length&&this.props.cursor.merge({contacts:void 0,loading:null,hotwords:void 0}),this.searchContent(this.query))},n.getCacheToState=function(e){B(e,function(t){if(t){var r={};r[e]=parseInt(t),n.setState(r)}else{var r={};r[e]=0,n.setState(r)}})},n.toggleLocsFilter=function(){var e=n.props.cursor.select("locsFilter","close").get();n.props.cursor.select("locsFilter","close").set(!e),n.props.cursor.select("pfmjsFilter","close").set(!0)},n.togglePfmjsFilter=function(){var e=n.props.cursor.select("pfmjsFilter","close").get();n.props.cursor.select("pfmjsFilter","close").set(!e),n.props.cursor.select("locsFilter","close").set(!0)},n.onSelectLoc=function(e,t){if(e!=n.selectedLoc.province||t!=n.selectedLoc.city){n.selectedLoc.province=e,n.selectedLoc.city=t,n.province=e>0?n.locs[e].name:"",n.city=t>0?n.locs[e].items[t].name:"";var r=n.context.req;n.query=n.query||r.query.query,n.searchContent(n.query)}},n.onSelectedPfmj=function(e,t){if(e!=n.selectedPfmj.profession||t!=n.selectedPfmj.major){n.selectedPfmj.profession=e,n.selectedPfmj.major=t,n.profession=e>0?n.pfmjs[e].name:"",n.major=t>0?n.pfmjs[e].items[t].name:"";var r=n.context.req;n.query=n.query||r.query.query,n.searchContent(n.query)}},n.onCancelSelectLoc=function(){n.props.cursor.select("locsFilter","parent").set(n.selectedLoc.province),n.props.cursor.select("locsFilter","child").set(n.selectedLoc.city)},n.onCancelSelectPfmj=function(){n.props.cursor.select("pfmjsFilter","parent").set(n.selectedPfmj.profession),n.props.cursor.select("pfmjsFilter","child").set(n.selectedPfmj.major)},n.openMember=function(){(0,q.default)("/uh_memlist?tpl=show&fr=search_tips","会员中心"),D("srch_member_tips_click",1),n.setState({srch_member_tips_click:1})},n.goMember=function(){(0,q.default)("/uh_memlist?tpl=show&fr=search_page","会员中心")},n.close_alert=function(){n.setState({srch_member_tips_click:1}),D("srch_member_tips_click",1)},n.doAdsearch=function(){(0,v.default)("/search/uh_adsearch_index?"+y.default.stringify({}),"","fetch",{show_search_title:!0,search_hint:"请输入人名、职位、企业等关键字",search_focus:!1})},n.renderFilter=function(){if(n.context.req.query.talent)return d.default.createElement("div",null);var e=(n.province||"")+(n.city||""),t="filter_third filter_border highlight";e||(e="全部城市",t+="filter_third");var r=(n.profession||"")+(n.major||""),c="filter_third filter_border highlight";return r||(r="全部行业",c+="filter_third"),d.default.createElement("div",null,d.default.createElement("div",{className:"searchFilter"},d.default.createElement("div",{className:t,onClick:n.toggleLocsFilter},d.default.createElement("span",null,e)),d.default.createElement("div",{className:c,onClick:n.togglePfmjsFilter},d.default.createElement("span",null,r)),d.default.createElement("div",{className:"filter_third",onClick:n.doAdsearch},d.default.createElement("span",null,"高级搜索"))),d.default.createElement(A,{cursor:n.props.cursor.select("locsFilter"),items:n.locs,onSelect:n.onSelectLoc,onCancel:n.onCancelSelectLoc}),d.default.createElement(A,{cursor:n.props.cursor.select("pfmjsFilter"),items:n.pfmjs,onSelect:n.onSelectedPfmj,onCancel:n.onCancelSelectPfmj}))},n.renderHeadLoader=function(){return d.default.createElement("div",null,n.renderFilter(),d.default.createElement("div",{className:"searchList"},d.default.createElement(j.default,{ref:"loading",reload:n.onReload,failed:n.props.failed})))},n.renderEmptyResult=function(){var e=n.query||n.context.req.query.query;return d.default.createElement("div",null,n.renderFilter(),e&&d.default.createElement("div",{className:"searchList",style:W.empty},"没有找到相关结果"),!e&&d.default.createElement("div",{className:"searchList",style:W.empty},"请输入搜索词"))},n.show_ad_contact=function(){var e=n.props.mycard,t=n.context.req,r=t.query&&t.query.dist,c="("+e.profession+", "+e.major+")",o=0,a=["(0, 19)","(1, 28)","(2, 17)","(3, 34)","(5, 15)","(6, 31)","(7, 14)","(9, 9)","(10, 14)","(12, 7)","(14, 22)","(15, 7)","(18, 31)"],s=["(0, 10)","(1, 23)","(2, 10)","(3, 14)","(5, 17)","(6, 29)","(9, 0)","(10, 13)","(12, 2)","(14, 17)","(15, 5)","(18, 26)"];return"3"!=r||e.mem_st&&e.mem_st>0?o:(a.forEach(function(e){if(e==c)return void(o=1)}),0==o&&s.forEach(function(e){if(e==c)return void(o=2)}),167776!=e.id&&81747!=e.id||(o=2),o)},a=r,o(n,a)}return a(t,e),u(t,[{key:"componentWillMount",value:function(){if("undefined"!=typeof window){this.locs=k.cst.loc.map(function(e){var t=e.cities.map(function(e){return{name:e.city}});return t.unshift({name:"全部"}),{name:e.province,items:t}}),this.locs.unshift({name:"全部",items:[{name:"全部"}]}),this.pfmjs=k.cst.pfmj.map(function(e){var t=e.majors.map(function(e){return{name:e.name}});return t.unshift({name:"全部"}),{name:e.name,items:t}}),this.pfmjs.unshift({name:"全部",items:[{name:"全部"}]});var e=this.context.req;this.query=e.query.query,this.province=e.query.province,this.city=e.query.city,this.profession=e.query.profession,this.major=e.query.major;var t=this.province&&J.findIndex(this.locs,{name:this.province}),r=this.city&&(t>0?J.findIndex(this.locs[t].items,{name:this.city}):-1);t>=0?r=r>0?r:0:(t=0,r=-1);var n=this.profession&&J.findIndex(this.pfmjs,{name:this.profession}),c=this.major&&(n>0?J.findIndex(this.pfmjs[n].items,{name:this.major}):-1);n>=0?c=c>0?c:0:(n=0,c=-1),this.selectedLoc={province:t,city:r},this.selectedPfmj={profession:n,major:c},this.props.cursor.merge({locsFilter:{parent:t,child:r,close:!0},pfmjsFilter:{parent:n,child:c,close:!0}})}}},{key:"componentDidMount",value:function(){var e=this;T.default.bindBroadcast("broadcast_web_pay_suc",function(){setTimeout(function(){e.onReload()},1e3)}),this.nextPage=1,window.search_callback=this.searchCallback.bind(this),this.getCacheToState("srch_member_tips_click")}},{key:"componentWillUnmount",value:function(){window.search_callback=null}},{key:"render",value:function(){var e=this,t=this.props,r=t.contacts,n=t.cursor,c=t.more,o=t.hotwords,a=this.context,s=a.req,i=a.auth_info;if(void 0===r)return!s.query.talent&&window.MaiMai_Native.native_set_search_key?d.default.createElement(C.default,{search:"contacts",hotwords:o}):this.renderFilter();if(this.props.loading||this.props.failed)return this.renderHeadLoader();var l=this.query||s.query.query;if(0==r.length||!l)return this.renderEmptyResult();var u=!1,f=this.props.mycard;f&&1!=f.mem_st&&(u=!0);var m=this.show_ad_contact(),p=r.concat();m>0&&p.splice(2,0,{con_type:"member_ad"});var h=this.props.is_mmax;return d.default.createElement("div",null,this.renderFilter(),d.default.createElement("div",{className:s.query.talent?"":"searchList"},r.length>0||d.default.createElement(w.default,{tips:"暂时没有相关"+s.query.dist==1?"好友":"人脉",onClick:function(){}}),1!=this.state.srch_member_tips_click&&u&&d.default.createElement("div",{className:"taskTips yellowBg p-y-10 p-l-10 clearfix"},d.default.createElement("div",{className:"fl"},d.default.createElement("span",{className:"small search_tips_icon searchTipsText",onClick:this.openMember},"解锁3度人脉限制，扩大你的搜索范围！")),d.default.createElement("div",{className:"fr",onClick:this.close_alert},d.default.createElement("span",{className:"p-x-10"},"×"))),d.default.createElement(I,{loadMore:this.loadMore,hasMore:c>0&&i.u>0,loader:d.default.createElement(j.default,{ref:"loader",reload:this.loadMore,cursor:n.select("loading_status")})},d.default.createElement("div",{className:"panel panel-default"},d.default.createElement("ul",{className:"list-group"},p.map(function(t,r){return m>0&&2==r?d.default.createElement(S.default,{key:"contact_member_ad",show_ad_contact:m}):1!=t.contact.dist&&0!=t.contact.dist||1==h?t.contact.outofrel||1==h?d.default.createElement(O.default,{contact:t.contact,key:t.contact.id,from:s.query.frm||"webview#/search/contacts",cursor:n.select("contacts",r,"contact"),search:!0,mycard:e.props.mycard,is_mmax:h}):d.default.createElement(N.default,{contact:t.contact,key:t.contact.id,from:s.query.frm||"webview#/search/contacts",cursor:n.select("contacts",r,"contact"),search:!0,mycard:e.props.mycard}):d.default.createElement(R,{key:t.contact.mmid,contact:t.contact})})))),h>0&&d.default.createElement("ul",{className:"m-t-30 search_tel_tip"},d.default.createElement("li",null,"非会员搜索手机号上限每月5次"),d.default.createElement("li",null,"商务版会员搜索手机号上限每月15次"),d.default.createElement("li",null,"VIP版会员搜索手机号上限每月80次"),d.default.createElement("li",null,"招聘版会员搜索手机号每月上限200次"))))}}]),t}(d.default.Component),s.contextTypes={req:d.default.PropTypes.object,fconf:d.default.PropTypes.object,auth_info:d.default.PropTypes.object},s.childContextTypes=l({from:d.default.PropTypes.string},H.contentTypes),i)}});