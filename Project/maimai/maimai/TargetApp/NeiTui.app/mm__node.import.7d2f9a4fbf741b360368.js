webpackJsonp([60],{1477:function(e,t,n){"use strict";var r=n(63),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(1),i=(n(50),n(166)),s=n(117),c=n(41),l=(n(90),n(171),a.createClass({displayName:"commonCard",mixins:[c],contextTypes:o.default.contentTypes,render:function(){var e=[];return this.props.icon&&e.push(a.createElement("img",{key:"icon",style:s.icon,src:this.props.icon})),this.props.line1&&e.push(a.createElement("span",{key:"line1",style:s.title},o.default.mark(this,this.props.line1))),this.props.line2&&e.push(a.createElement("span",{key:"line2",style:s.subTitle},o.default.mark(this,this.props.line2))),a.createElement("li",{onClick:this.props.clickHandler,className:this.props.className?this.props.className:"list-group-item",style:{overflow:"auto",textAlign:"left",border:"0px"}},e)}}));e.exports=i(l)},1478:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(113),h=n(15),y=r(h),m=n(75);t.default=e.exports=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.reloadData=function(){var e=r.context,t=e.fconf,n=e.auth_info;fetch(t.online_url+"/contact/v4/req_st?"+y.default.stringify(l({},n))).then(m.parse_online_json).then(function(e){r.props.cursor.set(e)})},i=n,a(r,i)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){(0,d.bindBroadcast)("User_Info_Changed",this.reloadData),(0,d.bindBroadcast)("addFriendRequestSent",this.reloadData)}},{key:"componentWillUnmount",value:function(){(0,d.unbindBroadcast)("User_Info_Changed",this.reloadData),(0,d.unbindBroadcast)("addFriendRequestSent",this.reloadData)}},{key:"render",value:function(){var e=this.props.permission.limit-this.props.permission.reqcnt;return e<0&&(e=0),f.default.createElement("div",{style:{lineHeight:"45px",textAlign:"center",color:"#9da8b3"}},"今日剩余加好友名额:",f.default.createElement("span",{className:"text-remind"},e),"/"+this.props.permission.limit)}}]),t}(f.default.Component),s.contextTypes={auth_info:f.default.PropTypes.object,req:f.default.PropTypes.object,fconf:f.default.PropTypes.object},c)},801:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(981),h=r(d),y=n(15),m=r(y),b=n(270),_=(r(b),n(165)),v=r(_),g=n(46),x=r(g),j=n(78),k=(r(j),n(1122)),E=r(k),w=n(1007),O=r(w),M=n(1477),P=r(M),T=n(75),N=n(1478),C=r(N),A=n(982),q={tdLeft:{padding:"0px",margin:"0px",border:"0px",borderTop:"1px solid #eee",borderBottom:"1px solid #eee"},tdRight:{padding:"0px",margin:"0px",border:"0px",borderTop:"1px solid #eee",borderLeft:"1px solid #eee",borderBottom:"0.5px solid #eee"}};t.default=e.exports=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.loadMore=function(){var e=r.props.cursor,t=r.refs.loader;t&&t.bindRequest(function(){var t=r.props.page||0,n="/sdk/contact/rec_frs?"+m.default.stringify(l({page:t,count:10},r.context.auth_info));return fetch(n,{credentials:"same-origin"}).then(T.parse_online_json).then(function(n){e.select("contacts").get()?e.select("contacts").concat(n.contacts||[]):e.select("contacts").set(n.contacts),e.select("more").set(n.remain),e.select("page").set(t+1),e.select("fetched_contacts").set(!0)})})},i=n,a(r,i)}return i(t,e),u(t,[{key:"searchContacts",value:function(){(0,x.default)("/search/contacts?"+m.default.stringify({dist:3}),"更多人脉","fetch",{show_search_title:!0,search_hint:"搜索人脉"})}},{key:"openScanAction",value:function(){window.MaiMai_Native.open_native_scan()}},{key:"openNearbyAction",value:function(){window.MaiMai_Native.native_nearby_friend()}},{key:"renderActionItem",value:function(){if("undefined"!=typeof MaiMai_Native&&MaiMai_Native.open_native_scan&&MaiMai_Native.native_nearby_friend)return f.default.createElement("table",{className:"table",style:q.tdLeft},f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("td",{style:q.tdLeft,onClick:this.openScanAction},f.default.createElement(P.default,{key:"scan_card",icon:"/static/images/scan.png",line1:"扫二维码加好友",line2:"面对面扫二维码名片"})),f.default.createElement("td",{style:q.tdRight,onClick:this.openNearbyAction},f.default.createElement(P.default,{key:"near_by",icon:"/static/images/nearby.png",line1:"活动/会场加好友",line2:"添加附近脉友"})))))}},{key:"renderLeftNum",value:function(){return f.default.createElement(C.default,{permission:this.props.permission,cursor:this.props.cursor.select("permission")})}},{key:"render",value:function(){var e=this,t=this.props.more||0,n=this.props.contacts||[];return f.default.createElement("div",{className:"add_friend_requested"},f.default.createElement(h.default,{title:"添加好友"}),!this.context.env.from_pc&&f.default.createElement(E.default,{placeholder:"搜索更多人脉",onClick:this.searchContacts}),this.renderActionItem(),this.renderLeftNum(),f.default.createElement(A,{loadMore:this.loadMore,hasMore:!this.props.fetched_contacts||t>0,loader:f.default.createElement(v.default,{ref:"loader",reload:this.loadMore,cursor:this.props.cursor.select("loading_status")})},n.map(function(t,n){return f.default.createElement(O.default,{contact:t,status:e.props.mystatus.status,key:t.id,cursor:e.props.cursor.select("contacts",n),from:"add_friend_list",mycard:e.props.mycard,pingback:{fr:4,position:n}})})))}}]),t}(f.default.Component),s.contextTypes={auth_info:f.default.PropTypes.object,req:f.default.PropTypes.object,fconf:f.default.PropTypes.object,env:f.default.PropTypes.object},c)}});