webpackJsonp([279],{687:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=a(1),i=n(c),o=a(75),r=n(o),u=a(15),d=n(u),s=a(76),f=n(s),p=a(114),m=n(p),h=a(997),b=n(h),v=a(271),y=n(v),_=a(50),E=n(_),g=i.default.createClass({displayName:"PubTopic",mixins:[b.default],statics:{validate:function(e){var t=e.title,a=e.desc;if(!t||t.length<8||t>30)throw"请填写问答，字数8~30";return{title:t,desc:a}}},contextTypes:{req:i.default.PropTypes.object,fconf:i.default.PropTypes.object,auth_info:i.default.PropTypes.object},componentDidMount:function(){document.body.style.background="#f5f5f5"},getInitialState:function(){return{title:"",desc:""}},topicGuide:function(){(0,E.default)("/static/html/topicGuide.html","如何发一个好问答")},pub:function(){var e=this.context,t=e.fconf,a=e.auth_info;try{var n=g.validate(this.state),c=t.online_url+"feed/v3/add_topic?"+d.default.stringify(l({},n,a)),i=fetch(c).then(o.parse_online_json).then(function(e){(0,f.default)("问答发布成功！"),window.MaiMai_Native.close_native("",!0)}).catch(r.default.toast_error_handler);(0,m.default)("发送中..",i)}catch(e){alert(e)}},render:function(){return i.default.createElement("div",null,i.default.createElement("div",{className:"panel-heading"},i.default.createElement("span",{className:"text-muted"},"问答")),i.default.createElement("div",{className:"borderTop"},i.default.createElement("div",{className:"pubTopicItem borderBottom"},i.default.createElement("input",{placeholder:"请输入问答，8～30字",valueLink:this.linkState("title")}))),i.default.createElement(y.default,{title:"问答详情",btn:"如何发一个好问答",onClick:this.topicGuide,icon_classname:"glyphicon glyphicon-pencil"}),i.default.createElement("div",{className:"pubTopicRow"},i.default.createElement("div",{className:"servicePriceCenter"},i.default.createElement("textarea",{placeholder:"请输入问答详情（选填）",valueLink:this.linkState("desc")}))),i.default.createElement("div",{className:"panel-default p-x"},i.default.createElement("button",{className:"btn btn-lg m-y btn-block btn-secondary",onClick:this.pub},"提交")))}});e.exports=g}});